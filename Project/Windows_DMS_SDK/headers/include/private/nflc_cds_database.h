/* cds_db.h
 * Copyright (C) 2011-2014 ACCESS CO.,LTD.
 * All rights are reserved by ACCESS CO.,LTD., whether the whole or part
 * of the source code including any modifications is concerned.
 *
 * This is an unpublished source code of ACCESS CO.,LTD., and must be
 * treated as confidential material.  The above copyright notice does
 * not evidence any actual or intended publication of this source code.
 */

#include <peer_database.h>
#include <dlna_cds_search.h>

#ifndef _CDS_DATABASE_H
#define _CDS_DATABASE_H

#ifdef DLNA_DB_SUPPORT_JOURNAL_MODE_WAL
#define CDS_DB_CHECKPOINT_OFFSET 100
#endif /* DLNA_DB_SUPPORT_JOURNAL_MODE_WAL */

#define CDS_DB_SUPPORT_REFERENCE_TABLE
#define CDS_DB_SUPPORT_INDEXING_DATABSE_CONNECTION
#define CDS_DB_SOFT_HEAP_SIZE                 2*1024*1024
#define CDS_DB_MAX_INDEXING_BUSY_RETRIES 50
#define CDS_DB_SQLITE_MAX_BUSY_RETRIES 200
#define CDS_DB_BUSY_HANDLER_INDEXING_WAIT_VAL 100000
#define CDS_DB_BUSY_HANDLER_WAIT_VAL          10000
#define CDS_DB_DATABASE_NAME_SIZE 36
#define CDS_DB_DATABASE_QUERY_SIZE 512

#ifdef DLNA_DB_MEMSYS5_ALLOCATOR
#define CDS_DB_MEMSYS5_MEM_SIZE  512*1024
#define CDS_DB_MEMSYS5_MIN_ALLOC_SIZE 128
#endif /* DLNA_DB_MEMSYS5_ALLOCATOR */
#ifdef DLNA_DB_LOOKASIDE_ALLOCATOR_CONFIG
#define CDS_DB_LOOKASIDE_SLOT_SIZE  64
#define CDS_DB_LOOKASIDE_SLOT_COUNT 32
#endif /* DLNA_DB_LOOKASIDE_ALLOCATOR_CONFIG */
#ifdef DLNA_DB_SCRATCH_MEMORY_CONFIG
#define CDS_DB_SINGLE_SCRATCH_ALLOCATION_SIZE  16*1024
#define CDS_DB_MAX_SIMULTANEOUS_ALLOCATIONS_COUNT 4
#endif /* DLNA_DB_SCRATCH_MEMORY_CONFIG */
#ifdef DLNA_DB_PAGE_CACHE_MEMORY_CONFIG
#define CDS_DB_SINGLE_PAGE_CACHE_ALLOCATION_SIZE  1160
#define CDS_DB_MAX_PAGE_CACHE_ALLOCATIONS_COUNT 64
#endif /* DLNA_DB_PAGE_CACHE_MEMORY_CONFIG */

#ifdef MEDIA_PROCESSING_EXTENSION
#define CDS_DB_USER_VERSION 20160306
#else /*MEDIA_PROCESSING_EXTENSION*/
#define CDS_DB_USER_VERSION 20160307
#endif /*MEDIA_PROCESSING_EXTENSION*/

#define CDS_DB_INVALID_OBJECT          -1
#define NFLC_CDS_DATABASE_OK            0
#define NFLC_CDS_DATABASE_ERROR         1
#define NFLC_CDS_DATABASE_CONSTRAINT    2
#define NFLC_CDS_DATABSE_ROW            3
#define NFLC_CDS_DATABASE_DONE          4

#define CDS_DB_SUPPORT_DATABASE_INDEX
#define CDS_DB_SUPPORT_INDEX_DC_TITLE
#define CDS_DB_SUPPORT_INDEX_UPNP_CLASS
#define CDS_DB_SUPPORT_INDEX_UPNP_ALBUM
#define CDS_DB_SUPPORT_INDEX_MEDIA_TYPE
#define CDS_DB_SUPPORT_INDEX_MEDIA_CLASS_TYPE
#define CDS_DB_SUPPORT_INDEX_PARENT_ID
#define CDS_DB_SUPPORT_INDEX_FILEPATH
#define CDS_DB_SUPPORT_INDEX_UPNP_GENRE
#define CDS_DB_SUPPORT_INDEX_UPNP_ARTIST
#define CDS_DB_SUPPORT_INDEX_UPNP_ARTIST_INDEX
#define CDS_DB_SUPPORT_INDEX_YEAR
#define CDS_DB_SUPPORT_INDEX_MONTH
#define CDS_DB_SUPPORT_INDEX_PROTO_METADATA_ID
#define CDS_DB_SUPPORT_INDEX_PROTO_PROTOCOLINFO
#define CDS_DB_SUPPORT_INDEX_REF_MEDIA_ID
#define CDS_DB_SUPPORT_INDEX_USERMETA_METADATA_ID
#define CDS_DB_SUPPORT_INDEX_SUBTITLE_VIDEO_ID

#ifdef DEVELOPEMENT_MULTIPLE_QUERIES_OPTIMIZATION
#define MULTIPLE_QUERIES_MAX 100
#endif /*DEVELOPEMENT_MULTIPLE_QUERIES_OPTIMIZATION*/

#define CDS_DB_METADATA_TABLE           "tMetadata"
#define CDS_DB_REFERENCE_TABLE          "tReference"
#define CDS_DB_SUBTITLE_TABLE           "tSubtitle"
#define CDS_DB_EXTENDED_METADATA_TABLE  "tExtendedMetadata"
#define CDS_DB_USER_METADATA_TABLE      "tUserMetadata"
#define CDS_DB_PROTOCOL_TABLE           "tProtocol"
#define CDS_DB_RESOURCE_TABLE           "tResource"
#define CDS_DB_OBJECT_RIGHTS_TABLE      "tObjectsRights"

#ifdef DEVELOPMENT_ENABLE_ADS
#define CDS_DB_MPD_SEGMENTS_TABLE      "tMpdsegments"
#endif /*DEVELOPMENT_ENABLE_ADS*/


#ifdef DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER

#define CDS_DB_PLAYLIST_MAP_TABLE           "tPlaylistMap"

#endif /* DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER */

#ifdef DEVELOPMENT_ENABLE_CVP_SERVER_PLAYSPEED
#define CDS_DB_SCALEDFILE_TABLE 	      "tScaledFile"
#endif /* DEVELOPMENT_ENABLE_CVP_SERVER_PLAYSPEED */

#define CDS_DB_PROPERTY_ID                  "id"
#define CDS_DB_PROPERTY_PARENT_ID           "parentID"
#define CDS_DB_PROPERTY_REF_ID              "refID"
#define CDS_DB_PROPERTY_STORAGE_DEVICE_ID   "deviceID"
#define CDS_DB_PROPERTY_MEDIA_CLASS_TYPE    "mediaClassType"
#define CDS_DB_PROPERTY_IS_CONTAINER        "is_container"
#define CDS_DB_PROPERTY_VALID_FLAG          "validFlag"
#define CDS_DB_PROPERTY_SHARED_FLAG         "sharedFlag"
#define CDS_DB_PROPERTY_REMOTE_FLAG         "remoteFlag"
#define CDS_DB_PROPERTY_MODTIME             "modTime"
#define CDS_DB_PROPERTY_MEDIA_TYPE          "mediaType"
#define CDS_DB_PROPERTY_PG_VALUE            "pgValue"
#define CDS_DB_PROPERTY_FILEPATH            "filePath"
#define CDS_DB_PROPERTY_RESTRICTED          "restricted"
#define CDS_DB_PROPERTY_YEAR                "mtime_year"
#define CDS_DB_PROPERTY_MONTH               "mtime_month"
#define CDS_DB_PROPERTY_DAY                 "mtime_day"
#define CDS_DB_PROPERTY_COMPOSER            "composer"
#define CDS_DB_PROPERTY_KEYWORDS            "keywords"
#define CDS_DB_PROPERTY_ARTIST_INDEX        "artist_index"
#define CDS_DB_PROPERTY_ADD_DATE            "addDate"
#define CDS_DB_PROPERTY_LAST_PLAY_DATE      "lastPlayDate"
#define CDS_DB_PROPERTY_PLAY_COUNT          "playCount"

#define CDS_DB_PROPERTY_CONTAINER_SEARCHABLE		"searchable"
#define CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT		"childCount"
#define CDS_DB_PROPERTY_CONTAINER_PLAYABLE_MEDIACOUNT	"playable_mediaCount"

#define CDS_DB_PROPERTY_DC_TITLE        "dc_title"
#define CDS_DB_PROPERTY_DC_CREATOR      "dc_creator"
#define CDS_DB_PROPERTY_DC_DATE         "dc_date"
#define CDS_DB_PROPERTY_DC_RIGHTS       "dc_rights"

#define CDS_DB_PROPERTY_RES_AT_SIZE_HIGH    "res_size_high"
#define CDS_DB_PROPERTY_RES_AT_SIZE_LOW     "res_size_low"
#define CDS_DB_PROPERTY_RES_AT_DURATION     "res_duration"
#define CDS_DB_PROPERTY_RES_AT_BITRATE      "res_bitrate"
#define CDS_DB_PROPERTY_RES_AT_SAMPLEFREQ   "res_sampleFreq"
#define CDS_DB_PROPERTY_RES_AT_FPS          "res_fps"
#define CDS_DB_PROPERTY_RES_AT_AUDIOCHANN   "res_nrAudioChannels"
#define CDS_DB_PROPERTY_RES_AT_WIDTH        "res_width"
#define CDS_DB_PROPERTY_RES_AT_HEIGHT       "res_height"

#define CDS_DB_PROPERTY_STREAMING		        "streaming"

#define CDS_DB_PROPERTY_UPNP_CLASS                  "upnp_class"
#define CDS_DB_PROPERTY_UPNP_ARTIST                 "upnp_artist"
#define CDS_DB_PROPERTY_UPNP_ALBUM                  "upnp_album"
#define CDS_DB_PROPERTY_UPNP_GENRE                  "upnp_genre"
#define CDS_DB_PROPERTY_UPNP_PLAYLIST               "upnp_playlist"
#define CDS_DB_PROPERTY_UPNP_ALBUMARTURI_ORIGINAL   "upnp_albumArtURI_original"
#define CDS_DB_PROPERTY_UPNP_ALBUMARTURI_PROFILE    "upnp_albumArtURI_profile"
#define CDS_DB_PROPERTY_UPNP_ALBUMARTURI_TN         "upnp_albumArtURI_tn"
#define CDS_DB_PROPERTY_UPNP_ITEM_URI               "itemURI"
#define CDS_DB_PROPERTY_UPNP_ORIGINAL_TRACKNO       "upnp_OriginalTrackNumber"
#define CDS_DB_PROPERTY_UPNP_RATING                 "upnp_rating"
#define CDS_DB_PROPERTY_UPNP_CONTAINER_UPDATE_ID    "upnp_containerUpdateID"

#define CDS_DB_PROPERTY_LAST_IDX_TIME               "last_idx_time"

#define CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED   "dlnaManaged"
#define CDS_DB_PROPERTY_DLNAORG_FLAGS         "dlnaORG_Flags"
#define CDS_DB_PROPERTY_DLNAORG_IFOFLAG       "ifo_flg"
#define CDS_DB_PROPERTY_DLNAORG_MIMETYPE      "mimeType"

#define CDS_DB_PROPERTY_IMAGE_PROFILE   "image_profile"

#define CDS_DB_PROPERTY_REFERENCE_INVALID       "reference_invalid"

#define CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT   "audioCount"
#define CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT   "imageCount"
#define CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT   "videoCount"
#define CDS_DB_PROPERTY_EXT_ID                  "extID"

#define CDS_DB_PROPERTY_REFERENCE_ID                "id"
#define CDS_DB_PROPERTY_REFERENCE_MEDIA_ID          "ref_mediaID"
#define CDS_DB_PROPERTY_REFERENCE_TYPE              "ref_type"
#define CDS_DB_PROPERTY_REFERENCE_FILEPATH          "ref_fullPath"
#define CDS_DB_PROPERTY_REFERENCE_DC_TITLE          "ref_title"
#define CDS_DB_PROPERTY_REFERENCE_RES               "ref_res"
#define CDS_DB_PROPERTY_REFERENCE_RES_AT_WIDTH      "ref_width"
#define CDS_DB_PROPERTY_REFERENCE_RES_AT_HEIGHT     "ref_height"
#define CDS_DB_PROPERTY_REFERENCE_RES_AT_SIZE_HIGH  "ref_size_high"
#define CDS_DB_PROPERTY_REFERENCE_RES_AT_SIZE_LOW   "ref_size_low"
#define CDS_DB_PROPERTY_REFERENCE_RES_AT_PINFO      "ref_protocolInfo"
#define CDS_DB_PROPERTY_REFERENCE_PROFILE           "ref_profile"
#define CDS_DB_PROPERTY_REFERENCE_SCALETYPE         "ref_scaleType"
#define CDS_DB_PROPERTY_REFERENCE_PERMILLAGE        "ref_permillage"
#define CDS_DB_PROPERTY_REFERENCE_DLNAORG_PINFO_PN  "ref_pInfoPN"
#define CDS_DB_PROPERTY_REFERENCE_DLNAORG_PINFO_CI  "ref_pInfoCI"
#define CDS_DB_PROPERTY_REFERENCE_DLNAORG_PINFO_OP  "ref_pInfoOP"
#define CDS_DB_PROPERTY_REFERENCE_DLNAORG_MIMETYPE  "ref_mimeType"

#define CDS_DB_PROPERTY_SUBTITLE_ID			"id"
#define CDS_DB_PROPERTY_SUBTITLE_VIDEOID		"st_videoID" /*METADATA*/
#define CDS_DB_PROPERTY_SUBTITLE_FOLDER_ID              "st_folderID" /*METADATA*/
#define CDS_DB_PROPERTY_SUBTITLE_TYPE			"st_type"
#define CDS_DB_PROPERTY_SUBTITLE_TITLE                  "st_title"
#define CDS_DB_PROPERTY_SUBTITLE_LANGUAGE		"st_lang"
#define CDS_DB_PROPERTY_SUBTITLE_FILEPATH		"st_filePath"
#define CDS_DB_PROPERTY_SUBTITLE_STREAMNUMBER		"st_streamNumber"
#define CDS_DB_PROPERTY_SUBTITLE_RES                    "st_res"

#define CDS_DB_PROPERTY_DRM_TYPE			"drm_type"
#define CDS_DB_PROPERTY_DRM_MODE			"drm_mode"
#define CDS_DB_PROPERTY_DRM_RETENSION			"drm_retState"
#define CDS_DB_PROPERTY_DRM_APS				"drm_APS"
#define CDS_DB_PROPERTY_DRM_ICT				"drm_ICT"
#define CDS_DB_PROPERTY_DRM_EPN				"drm_EPN"
#define CDS_DB_PROPERTY_DRM_CCI				"drm_CCI"
#define CDS_DB_PROPERTY_DRM_PCPENCRYPTED_SIZE_LOW       "drm_PCPEncryptedSize_low"
#define CDS_DB_PROPERTY_DRM_PCPENCRYPTED_SIZE_HIGH      "drm_PCPEncryptedSize_high"
#define CDS_DB_PROPERTY_DRM_VALID                       "drm_ifExists"
#define CDS_DB_PROPERTY_DRM_PROTECTED                   "drm_protected"

#define CDS_DB_PROPERTY_EXTMETA_ID			"id"
#define CDS_DB_PROPERTY_EXTMETA_METADATA_ID		"tMetadata_id"

#define CDS_DB_PROPERTY_EXTMETA_GPSINFO_VALID		"gpsInfo_ifExists"
#define CDS_DB_PROPERTY_EXTMETA_GPSINFO_IF_CHECKED	"gpsInfo_ifChecked"
#define CDS_DB_PROPERTY_EXTMETA_GPSINFO_LATITUDE	"gpsInfo_latitude"
#define CDS_DB_PROPERTY_EXTMETA_GPSINFO_LONGITUDE	"gpsInfo_longitude"

#define CDS_DB_PROPERTY_EXTMETA_COVERART_VALID		"coverArt_ifExists"
#define CDS_DB_PROPERTY_EXTMETA_COVERART_COVERURI 	"coverArt_coverURI"
#define CDS_DB_PROPERTY_EXTMETA_COVERART_COVERWIDTH 	"coverArt_coverWidth"
#define CDS_DB_PROPERTY_EXTMETA_COVERART_COVERHEIGHT    "coverArt_coverHeight"

#define CDS_DB_PROPERTY_EXTMETA_AUDIO_COMMENT		"audioComment"
#define CDS_DB_PROPERTY_EXTMETA_AUDIO_YEAR          "audioYear"

#define CDS_DB_PROPERTY_USERMETA_ID                       "id"
#define CDS_DB_PROPERTY_USERMETA_METADATA_ID              "tMetadata_id"
#define CDS_DB_PROPERTY_USERMETA_NAME                     "name"
#define CDS_DB_PROPERTY_USERMETA_VALUE                    "value"

#define CDS_DB_PROPERTY_PROTOCOL_ID                       "id"
#define CDS_DB_PROPERTY_PROTOCOL_METADATA_ID              "tMetadata_id"
#define CDS_DB_PROPERTY_PROTOCOL_PINFO                    "protocolInfo"
#define CDS_DB_PROPERTY_PROTOCOL_PINFO_RELAXED            "protocolInfoRelaxed"

#define CDS_DB_PROPERTY_RESOURCE_ID             "id"
#define CDS_DB_PROPERTY_RESOURCE_METADATA_ID    "tMetadataID"
#define CDS_DB_PROPERTY_RESOURCE_TYPE           "type"
#define CDS_DB_PROPERTY_RESOURCE_FILEPATH       "filePath"
#define CDS_DB_PROPERTY_RESOURCE_URI            "uri"
#define CDS_DB_PROPERTY_RESOURCE_WIDTH          "width"
#define CDS_DB_PROPERTY_RESOURCE_HEIGHT         "height"
#define CDS_DB_PROPERTY_RESOURCE_SIZE_HIGH      "sizeHigh"
#define CDS_DB_PROPERTY_RESOURCE_SIZE_LOW       "sizeLow"
#define CDS_DB_PROPERTY_RESOURCE_DURATION       "duration"
#define CDS_DB_PROPERTY_RESOURCE_BITRATE        "bitrate"
#define CDS_DB_PROPERTY_RESOURCE_SAMPLEFREQ     "sampleFreq"
#define CDS_DB_PROPERTY_RESOURCE_AUDIOCHANN     "nrAudioChannels"
#define CDS_DB_PROPERTY_RESOURCE_PINFO          "protocolInfo"

#ifdef DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER

#define CDS_DB_PROPERTY_PLAYLIST_MAP_ID                   "id"
#define CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID          "playlist_id"
#define CDS_DB_PROPERTY_PLAYLIST_MAP_CONTENT_ID           "content_id"

#endif /* DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER */

/* Stream object rights properties */
#define CDS_DB_PROPERTY_OBJRIGHT_ID                       "id"
#define CDS_DB_PROPERTY_OBJRIGHT_METADATA_ID              "tMetadata_id"
#define CDS_DB_PROPERTY_OBJRIGHT_IS_DRM_PROTECT           "drm_protect"
#define CDS_DB_PROPERTY_OBJRIGHT_ALLOW_DTCP_PROTECT       "allow_dtcp_protect"
#define CDS_DB_PROPERTY_OBJRIGHT_SUBSCRIPTION_TIME        "subscr_time"
#define CDS_DB_PROPERTY_OBJRIGHT_CCI                      "cci"
#define CDS_DB_PROPERTY_OBJRIGHT_RETENTION_TIME           "retention_time"
#define CDS_DB_PROPERTY_OBJRIGHT_CONCURENT_VIEW           "concurent_view"
#define CDS_DB_PROPERTY_OBJRIGHT_PLAYCOUNT                "playcount"
#define CDS_DB_PROPERTY_OBJRIGHT_ALLOW_DISTRIBUTION       "allow_distrib"
#define CDS_DB_PROPERTY_OBJRIGHT_NO_DEVICES_ACCESSED      "no_dev_accessed"
#define CDS_DB_PROPERTY_OBJRIGHT_NO_DEVICES_ALLOWED       "no_dev_allowed"

#ifdef DEVELOPMENT_ENABLE_ADS
#define CDS_DB_PROPERTY_MPD_SEGMENTS_ID       "id"
#define CDS_DB_PROPERTY_MPD_SEGMENTS_MPD_ID   "mpd_id"
#define CDS_DB_PROPERTY_MPD_SEGMENTS_FILEPATH "filepath"
#endif /*DEVELOPMENT_ENABLE_ADS*/

#ifdef DEVELOPMENT_ENABLE_CVP_SERVER_PLAYSPEED
#define CDS_DB_PROPERTY_SCALEDFILE_ID                     "id"
#define CDS_DB_PROPERTY_SCALEDFILE_METADATA_ID            "tMetadata_id"
#define CDS_DB_PROPERTY_SCALEDFILE_PLAYSPEED              "playspeed"
#define CDS_DB_PROPERTY_SCALEDFILE_FILEPATH               "filepath"
#endif /* DEVELOPMENT_ENABLE_CVP_SERVER_PLAYSPEED */

#define CDS_DB_INDEX_DC_TITLE				"iDCTitle"
#define CDS_DB_INDEX_UPNP_CLASS				"iUPNPClass"
#define CDS_DB_INDEX_UPNP_ALBUM				"iUPNPAlbum"
#define CDS_DB_INDEX_MEDIA_TYPE                         "iMediaType"
#define CDS_DB_INDEX_MEDIA_CLASS_TYPE                   "iMediaClassType"
#define CDS_DB_INDEX_PARENT_ID                          "iParentID"
#define CDS_DB_INDEX_FILEPATH                           "iFilepath"
#define CDS_DB_INDEX_UPNP_ARTIST			"iUPNPArtist"
#define CDS_DB_INDEX_UPNP_GENRE				"iUPNPGenre"
#define CDS_DB_INDEX_UPNP_ARTIST_INDEX  		"iUPNPArtistIndex"
#define CDS_DB_INDEX_YEAR			        "iYear"
#define CDS_DB_INDEX_MONTH				"iMonth"

#define CDS_DB_PROTO_INDEX_METADATA_ID                  "iProtoMetadataID"
#define CDS_DB_PROTO_INDEX_PROTOIFO                     "iProtoProtoInfo"

#define CDS_DB_RES_INDEX_METADATA_ID                    "iResMetadataID"

#define CDS_DB_REF_INDEX_MEDIA_ID                       "iRefMediaID"

#define CDS_DB_USERMETA_INDEX_METADATA_ID               "iUMMetadataID"

#define CDS_DB_ST_INDEX_VIDEO_ID                        "iSTVideoID"

#define SPACE " "
#define LITERAL_LOWER_U "u"
#define CDS_DB_COMMA ","
#define CDS_DB_DOT "."
#define CDS_DB_ASTERIX " * "
#define CDS_DB_STRING_SELECT				" SELECT "
#define CDS_DB_STRING_UPDATE                            " UPDATE "
#define CDS_DB_STRING_FROM				" FROM "
#define CDS_DB_STRING_WHERE				" WHERE "
#define CDS_DB_STRING_AND                               " AND "
#define CDS_DB_STRING_ORDER_BY                          " ORDER BY "
#define CDS_DB_STRING_UNION                             " UNION "
#define CDS_DB_STRING_UNION_ALL                         " UNION ALL "
#define CDS_DB_STRING_ASC                               "ASC"
#define CDS_DB_STRING_DESC                              "DESC"
#define CDS_DB_STRING_COLLATE                           "COLLATE NOCASE"
#define CDS_DB_STRING_DEFAULT                           "DEFAULT"
#define CDS_DB_OFFSET_LIMIT_END_QUERY\
        " LIMIT %i"\
        " OFFSET %i;"

#define CDS_DB_PARAMS_VALID_SHARED_PG\
	"validFlag=%i"\
	CDS_DB_STRING_AND\
	"sharedFlag=%i"\
	CDS_DB_STRING_AND\
	"pgValue<=%i"

#define CDS_DB_OPERATOR_EQUAL                   "="
#define CDS_DB_OPERATOR_NOT_EQUAL               "!="
#define CDS_DB_OPERATOR_GREATERTHAN             ">"
#define CDS_DB_OPERATOR_LESSTHAN                "<"
#define CDS_DB_OPERATOR_GREATERTHAN_EQUAL       ">="
#define CDS_DB_OPERATOR_LESSTHAN_EQUAL          "<="
#define CDS_DB_OPERATOR_LIKE                    "LIKE"
#define CDS_DB_OPERATOR_NOT_LIKE                "NOT LIKE"
#define CDS_DB_OPERATOR_IS_NULL                 "IS NULL"
#define CDS_DB_OPERATOR_IS_NOT_NULL             "IS NOT NULL"

#define CDS_DB_FUNCTION_COUNT_ID " count(id) "

#define CDS_DB_SORT_CRITERIA_IS_CONTAINER                       CDS_DB_PROPERTY_IS_CONTAINER SPACE CDS_DB_STRING_DESC
#define CDS_DB_SORT_CRITERIA_ID_ASC                             CDS_DB_PROPERTY_ID SPACE CDS_DB_STRING_ASC
#define CDS_DB_SORT_CRITERIA_ID_DSC                             CDS_DB_PROPERTY_ID SPACE CDS_DB_STRING_DESC
#define CDS_DB_SORT_CRITERIA_REF_ID_ASC                         CDS_DB_PROPERTY_REF_ID SPACE CDS_DB_STRING_ASC
#define CDS_DB_SORT_CRITERIA_REF_ID_DSC                         CDS_DB_PROPERTY_REF_ID SPACE CDS_DB_STRING_DESC
#define CDS_DB_SORT_CRITERIA_DC_DATE_ASC                        CDS_DB_PROPERTY_DC_DATE SPACE CDS_DB_STRING_ASC
#define CDS_DB_SORT_CRITERIA_DC_DATE_DSC                        CDS_DB_PROPERTY_DC_DATE SPACE CDS_DB_STRING_DESC
#define CDS_DB_SORT_CRITERIA_TRACKNO_ASC                        CDS_DB_PROPERTY_UPNP_ORIGINAL_TRACKNO SPACE CDS_DB_STRING_ASC
#define CDS_DB_SORT_CRITERIA_TRACKNO_DSC                        CDS_DB_PROPERTY_UPNP_ORIGINAL_TRACKNO SPACE CDS_DB_STRING_DESC
#define CDS_DB_SORT_CRITERIA_RES_AT_SIZE_ASC                    CDS_DB_PROPERTY_RES_AT_SIZE_HIGH SPACE CDS_DB_STRING_ASC CDS_DB_COMMA SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW SPACE CDS_DB_STRING_ASC
#define CDS_DB_SORT_CRITERIA_RES_AT_SIZE_DSC                    CDS_DB_PROPERTY_RES_AT_SIZE_HIGH SPACE CDS_DB_STRING_DESC CDS_DB_COMMA SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW SPACE CDS_DB_STRING_DESC
#define CDS_DB_SORT_CRITERIA_CONT_UPDATE_ID_ASC                 CDS_DB_PROPERTY_UPNP_CONTAINER_UPDATE_ID SPACE CDS_DB_STRING_ASC
#define CDS_DB_SORT_CRITERIA_CONT_UPDATE_ID_DSC                 CDS_DB_PROPERTY_UPNP_CONTAINER_UPDATE_ID SPACE CDS_DB_STRING_DESC

#define CDS_DB_SORT_CRITERIA_DC_CREATOR_ASC                     CDS_DB_PROPERTY_DC_CREATOR\
                                                                SPACE CDS_DB_STRING_COLLATE\
                                                                SPACE CDS_DB_STRING_ASC

#define CDS_DB_SORT_CRITERIA_DC_CREATOR_DSC                     CDS_DB_PROPERTY_DC_CREATOR\
                                                                SPACE CDS_DB_STRING_COLLATE\
                                                                SPACE CDS_DB_STRING_DESC
#define CDS_DB_SORT_CRITERIA_DC_TITLE_ASC                       CDS_DB_PROPERTY_DC_TITLE\
                                                                SPACE CDS_DB_STRING_COLLATE\
                                                                 SPACE CDS_DB_STRING_ASC

#define CDS_DB_SORT_CRITERIA_DC_TITLE_DSC                       CDS_DB_PROPERTY_DC_TITLE SPACE\
                                                                SPACE CDS_DB_STRING_COLLATE\
                                                                SPACE CDS_DB_STRING_DESC

#define CDS_DB_SORT_CRITERIA_UPNP_ALBUM_ASC                     CDS_DB_PROPERTY_UPNP_ALBUM\
                                                                SPACE CDS_DB_STRING_COLLATE\
                                                                SPACE CDS_DB_STRING_ASC
#define CDS_DB_SORT_CRITERIA_UPNP_ALBUM_DSC                     CDS_DB_PROPERTY_UPNP_ALBUM\
                                                                SPACE CDS_DB_STRING_COLLATE\
                                                                SPACE CDS_DB_STRING_DESC

#define CDS_DB_SORT_CRITERIA_UPNP_GENRE_ASC                     CDS_DB_PROPERTY_UPNP_GENRE\
                                                                SPACE CDS_DB_STRING_COLLATE\
                                                                SPACE CDS_DB_STRING_ASC

#define CDS_DB_SORT_CRITERIA_UPNP_GENRE_DSC                     CDS_DB_PROPERTY_UPNP_GENRE\
                                                                SPACE CDS_DB_STRING_COLLATE\
                                                                SPACE CDS_DB_STRING_DESC

#define CDS_DB_SORT_CRITERIA_UPNP_CLASS_ASC                     CDS_DB_PROPERTY_UPNP_CLASS\
                                                                SPACE CDS_DB_STRING_COLLATE\
                                                                SPACE CDS_DB_STRING_ASC

#define CDS_DB_SORT_CRITERIA_UPNP_CLASS_DSC                     CDS_DB_PROPERTY_UPNP_CLASS\
                                                                SPACE CDS_DB_STRING_COLLATE\
                                                                SPACE CDS_DB_STRING_DESC

#define CDS_DB_SORT_CRITERIA_UPNP_ARTIST_ASC                    CDS_DB_PROPERTY_UPNP_ARTIST\
                                                                SPACE CDS_DB_STRING_COLLATE\
                                                                SPACE CDS_DB_STRING_ASC

#define CDS_DB_SORT_CRITERIA_UPNP_ARTIST_DSC                    CDS_DB_PROPERTY_UPNP_ARTIST\
                                                                SPACE CDS_DB_STRING_COLLATE\
                                                                SPACE CDS_DB_STRING_DESC

#define CDS_DB_SORT_CRITERIA_RES_AT_PINFO_ASC                   CDS_DB_PROPERTY_RES_AT_PINFO\
                                                                SPACE CDS_DB_STRING_COLLATE\
                                                                SPACE CDS_DB_STRING_ASC

#define CDS_DB_SORT_CRITERIA_RES_AT_PINFO_DSC                   CDS_DB_PROPERTY_RES_AT_PINFO\
                                                                SPACE CDS_DB_STRING_COLLATE\
                                                                SPACE CDS_DB_STRING_DESC

#define CDS_DB_SORT_CRITERIA_BY_PROPERTY_ASC                    "%q"\
                                                                SPACE CDS_DB_STRING_COLLATE\
                                                                SPACE CDS_DB_STRING_ASC

#define CDS_DB_SORT_CRITERIA_BY_PROPERTY_DSC                    "%q"\
                                                                SPACE CDS_DB_STRING_COLLATE\
                                                                SPACE CDS_DB_STRING_DESC

#define CDS_DB_REFERENCE_METADATA_TABLE_ID \
  "REFERENCES "\
   CDS_DB_METADATA_TABLE\
  "("\
   CDS_DB_PROPERTY_ID\
  ") ON DELETE CASCADE"

#define CDS_DB_FOREIGNKEY_REFERENCE_TABLE \
 "FOREIGN KEY("\
  CDS_DB_PROPERTY_REFERENCE_MEDIA_ID\
 ") "\
 CDS_DB_REFERENCE_METADATA_TABLE_ID

#define CDS_DB_FOREIGNKEY_SUBTITLE_TABLE \
 "FOREIGN KEY("\
  CDS_DB_PROPERTY_SUBTITLE_VIDEOID\
  ") "\
  CDS_DB_REFERENCE_METADATA_TABLE_ID

#define CDS_DB_FOREIGNKEY_EXTMETA_TABLE \
 "FOREIGN KEY("\
  CDS_DB_PROPERTY_EXTMETA_METADATA_ID\
  ") "\
  CDS_DB_REFERENCE_METADATA_TABLE_ID

#define CDS_DB_FOREIGNKEY_USERMETA_TABLE\
 "FOREIGN KEY("\
  CDS_DB_PROPERTY_USERMETA_METADATA_ID\
  ") "\
  CDS_DB_REFERENCE_METADATA_TABLE_ID

#define CDS_DB_FOREIGNKEY_PROTOCOL_TABLE\
 "FOREIGN KEY("\
  CDS_DB_PROPERTY_PROTOCOL_METADATA_ID\
  ") "\
  CDS_DB_REFERENCE_METADATA_TABLE_ID

#ifdef DLNA_DB_SUPPORT_FOREIGNKEY
#define CDS_DB_FOREIGNKEY_RESOURCE_TABLE \
 ",FOREIGN KEY("\
  CDS_DB_PROPERTY_RESOURCE_METADATA_ID\
 ") "\
 CDS_DB_REFERENCE_METADATA_TABLE_ID
#else /* DLNA_DB_SUPPORT_FOREIGNKEY */
#define CDS_DB_FOREIGNKEY_RESOURCE_TABLE
#endif /* DLNA_DB_SUPPORT_FOREIGNKEY */


#ifdef DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER

#define CDS_DB_FOREIGNKEY_PLAYLIST_MAP_TABLE\
 "FOREIGN KEY("\
  CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID\
  ") "\
  CDS_DB_REFERENCE_METADATA_TABLE_ID \
 ", FOREIGN KEY("\
  CDS_DB_PROPERTY_PLAYLIST_MAP_CONTENT_ID\
  ") "\
  CDS_DB_REFERENCE_METADATA_TABLE_ID

#endif /* DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER */

#define CDS_DB_METADATA_TABLE_QUERY \
        "CREATE TABLE IF NOT EXISTS " \
         CDS_DB_METADATA_TABLE \
        "("\
         CDS_DB_PROPERTY_ID SPACE DLNA_DB_COL_TYPE_INTEGER SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY\
        "," CDS_DB_PROPERTY_PARENT_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_STORAGE_DEVICE_ID SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_MEDIA_CLASS_TYPE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_MEDIA_TYPE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_VALID_FLAG SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_SHARED_FLAG SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_REMOTE_FLAG SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_MODTIME SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_PG_VALUE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_FILEPATH SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_RESTRICTED SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_CONTAINER_PLAYABLE_MEDIACOUNT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_REF_ID SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_DC_TITLE SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_DC_CREATOR SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_DC_DATE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_UPNP_CLASS SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_UPNP_ARTIST SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_UPNP_ALBUM SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_UPNP_GENRE SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_UPNP_ORIGINAL_TRACKNO SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_RES_AT_SIZE_HIGH SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_RES_AT_SIZE_LOW SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_RES_AT_DURATION SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_RES_AT_BITRATE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_RES_AT_SAMPLEFREQ SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_RES_AT_AUDIOCHANN SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_RES_AT_WIDTH SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_RES_AT_HEIGHT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DLNAORG_FLAGS SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DLNAORG_IFOFLAG SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DLNAORG_MIMETYPE SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_IMAGE_PROFILE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_UPNP_ALBUMARTURI_ORIGINAL SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_UPNP_ALBUMARTURI_PROFILE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_UPNP_ALBUMARTURI_TN SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_UPNP_ITEM_URI SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_UPNP_CONTAINER_UPDATE_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_COMPOSER SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_KEYWORDS SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_ARTIST_INDEX SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_UPNP_RATING SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_YEAR SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_MONTH SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DAY SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_ADD_DATE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_LAST_PLAY_DATE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_PLAY_COUNT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_LAST_IDX_TIME SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_REFERENCE_INVALID SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_STREAMING SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_IS_CONTAINER SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_EXT_ID SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_RES_AT_FPS SPACE DLNA_DB_COL_TYPE_INTEGER SPACE CDS_DB_STRING_DEFAULT SPACE "0"\
        "," DLNA_DB_COL_CONSTRAINT_UNIQUE "(" CDS_DB_PROPERTY_STORAGE_DEVICE_ID\
        "," CDS_DB_PROPERTY_FILEPATH ")"\
  ")"

#define CDS_DB_METADATA_TABLE_QUERY_PUBLISHER \
        "CREATE TABLE IF NOT EXISTS " \
         CDS_DB_METADATA_TABLE \
        "("\
         CDS_DB_PROPERTY_ID SPACE DLNA_DB_COL_TYPE_INTEGER SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY\
        "," CDS_DB_PROPERTY_PARENT_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_STORAGE_DEVICE_ID SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_MEDIA_CLASS_TYPE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_MEDIA_TYPE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_VALID_FLAG SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_SHARED_FLAG SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_REMOTE_FLAG SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_MODTIME SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_PG_VALUE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_FILEPATH SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_RESTRICTED SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_CONTAINER_PLAYABLE_MEDIACOUNT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_REF_ID SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_DC_TITLE SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_DC_CREATOR SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_DC_DATE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_UPNP_CLASS SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_UPNP_ARTIST SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_UPNP_ALBUM SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_UPNP_GENRE SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_UPNP_ORIGINAL_TRACKNO SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_RES_AT_SIZE_HIGH SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_RES_AT_SIZE_LOW SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_RES_AT_DURATION SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_RES_AT_BITRATE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_RES_AT_SAMPLEFREQ SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_RES_AT_AUDIOCHANN SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_RES_AT_WIDTH SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_RES_AT_HEIGHT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DLNAORG_FLAGS SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DLNAORG_IFOFLAG SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DLNAORG_MIMETYPE SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_IMAGE_PROFILE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_UPNP_ALBUMARTURI_ORIGINAL SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_UPNP_ALBUMARTURI_PROFILE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_UPNP_ALBUMARTURI_TN SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_UPNP_ITEM_URI SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_UPNP_CONTAINER_UPDATE_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_COMPOSER SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_KEYWORDS SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_ARTIST_INDEX SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_UPNP_RATING SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_YEAR SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_MONTH SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DAY SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_ADD_DATE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_LAST_PLAY_DATE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_PLAY_COUNT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_LAST_IDX_TIME SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_REFERENCE_INVALID SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_STREAMING SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_IS_CONTAINER SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_EXT_ID SPACE DLNA_DB_COL_TYPE_TEXT\
        "," DLNA_DB_COL_CONSTRAINT_UNIQUE "(" CDS_DB_PROPERTY_STORAGE_DEVICE_ID\
        "," CDS_DB_PROPERTY_FILEPATH "," CDS_DB_PROPERTY_EXT_ID ")"\
  ")"


enum _cds_database_metadata_column_index {
  CDS_DB_PROPERTY_ID_COLUMN_INDEX,
  CDS_DB_PROPERTY_PARENT_ID_COLUMN_INDEX,
  CDS_DB_PROPERTY_STORAGE_DEVICE_ID_COLUMN_INDEX,
  CDS_DB_PROPERTY_MEDIA_CLASS_TYPE_COLUMN_INDEX,
  CDS_DB_PROPERTY_MEDIA_TYPE_COLUMN_INDEX,
  CDS_DB_PROPERTY_VALID_FLAG_COLUMN_INDEX,
  CDS_DB_PROPERTY_SHARED_FLAG_COLUMN_INDEX,
  CDS_DB_PROPERTY_REMOTE_FLAG_COLUMN_INDEX,
  CDS_DB_PROPERTY_MODTIME_COLUMN_INDEX,
  CDS_DB_PROPERTY_PG_VALUE_COLUMN_INDEX,
  CDS_DB_PROPERTY_FILEPATH_COLUMN_INDEX,
  CDS_DB_PROPERTY_RESTRICTED_COLUMN_INDEX,
  CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT_COLUMN_INDEX,
  CDS_DB_PROPERTY_CONTAINER_PLAYABLE_MEDIACOUNT_COLUMN_INDEX,
  CDS_DB_PROPERTY_REF_ID_COLUMN_INDEX,
  CDS_DB_PROPERTY_DC_TITLE_COLUMN_INDEX,
  CDS_DB_PROPERTY_DC_CREATOR_COLUMN_INDEX,
  CDS_DB_PROPERTY_DC_DATE_COLUMN_INDEX,
  CDS_DB_PROPERTY_UPNP_CLASS_COLUMN_INDEX,
  CDS_DB_PROPERTY_UPNP_ARTIST_COLUMN_INDEX,
  CDS_DB_PROPERTY_UPNP_ALBUM_COLUMN_INDEX,
  CDS_DB_PROPERTY_UPNP_GENRE_COLUMN_INDEX,
  CDS_DB_PROPERTY_UPNP_ORIGINAL_TRACKNO_COLUMN_INDEX,
  CDS_DB_PROPERTY_RES_AT_SIZE_HIGH_COLUMN_INDEX,
  CDS_DB_PROPERTY_RES_AT_SIZE_LOW_COLUMN_INDEX,
  CDS_DB_PROPERTY_RES_AT_DURATION_COLUMN_INDEX,
  CDS_DB_PROPERTY_RES_AT_BITRATE_COLUMN_INDEX,
  CDS_DB_PROPERTY_RES_AT_SAMPLEFREQ_COLUMN_INDEX,
  CDS_DB_PROPERTY_RES_AT_AUDIOCHANN_COLUMN_INDEX,
  CDS_DB_PROPERTY_RES_AT_WIDTH_COLUMN_INDEX,
  CDS_DB_PROPERTY_RES_AT_HEIGHT_COLUMN_INDEX,
  CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED_COLUMN_INDEX,
  CDS_DB_PROPERTY_DLNAORG_FLAGS_COLUMN_INDEX,
  CDS_DB_PROPERTY_DLNAORG_IFOFLAG_COLUMN_INDEX,
  CDS_DB_PROPERTY_DLNAORG_MIMETYPE_COLUMN_INDEX,
  CDS_DB_PROPERTY_IMAGE_PROFILE_COLUMN_INDEX,
  CDS_DB_PROPERTY_UPNP_ALBUMARTURI_ORIGINAL_COLUMN_INDEX,
  CDS_DB_PROPERTY_UPNP_ALBUMARTURI_PROFILE_COLUMN_INDEX,
  CDS_DB_PROPERTY_UPNP_ALBUMARTURI_TN_COLUMN_INDEX,
  CDS_DB_PROPERTY_UPNP_ITEM_URI_COLUMN_INDEX,
  CDS_DB_PROPERTY_UPNP_CONTAINER_UPDATE_ID_COLUMN_INDEX,
  CDS_DB_PROPERTY_COMPOSER_COLUMN_INDEX,
  CDS_DB_PROPERTY_KEYWORDS_COLUMN_INDEX,
  CDS_DB_PROPERTY_ARTIST_INDEX_COLUMN_INDEX,
  CDS_DB_PROPERTY_UPNP_RATING_COLUMN_INDEX,
  CDS_DB_PROPERTY_YEAR_COLUMN_INDEX,
  CDS_DB_PROPERTY_MONTH_COLUMN_INDEX,
  CDS_DB_PROPERTY_DAY_COLUMN_INDEX,
  CDS_DB_PROPERTY_ADD_DATE_COLUMN_INDEX,
  CDS_DB_PROPERTY_LAST_PLAY_DATE_COLUMN_INDEX,
  CDS_DB_PROPERTY_PLAY_COUNT_COLUMN_INDEX,
  CDS_DB_PROPERTY_LAST_IDX_TIME_COLUMN_INDEX,
  CDS_DB_PROPERTY_REFERENCE_INVALID_COLUMN_INDEX,
  CDS_DB_PROPERTY_STREAMING_COLUMN_INDEX,
  CDS_DB_PROPERTY_IS_CONTAINER_COLUM_INDEX,
  CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT_COLUMN_INDEX,
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT_COLUMN_INDEX,
  CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT_COLUMN_INDEX,
  CDS_DB_PROPERTY_EXT_ID_COLUMN_INDEX,
  CDS_DB_PROPERTY_RES_AT_FPS_COLUMN_INDEX
 /* Please be noted that adding new entries requires equivalent
  *  in nflc_cds_database.c cds_database_column_map_t  CDSDatabaseMetadataTable[] to be added as well.*/
};

// Every time a content is deleted we need to update childCount field.

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_CHILD_COUNT_QUERY \
  " CREATE TRIGGER update_child_count DELETE ON " \
  CDS_DB_METADATA_TABLE \
  " BEGIN " \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT \
  " = " \
  CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT \
  "-1 " \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = old." \
  CDS_DB_PROPERTY_PARENT_ID \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_CHILD_COUNT_QUERY_INSERT \
  " CREATE TRIGGER update_child_count_insert AFTER INSERT ON " \
  CDS_DB_METADATA_TABLE \
  " BEGIN " \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT \
  " = " \
  CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT \
  "+1 " \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = new." \
  CDS_DB_PROPERTY_PARENT_ID \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_PLAYABLE_MEDIA_COUNT_INSERT \
  " CREATE TRIGGER update_playable_media_count_insert AFTER INSERT ON " \
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "new."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " != 1"\
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_PLAYABLE_MEDIACOUNT \
  " = " \
  CDS_DB_PROPERTY_CONTAINER_PLAYABLE_MEDIACOUNT \
  " +1 " \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = new." \
  CDS_DB_PROPERTY_PARENT_ID \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_PLAYABLE_MEDIA_COUNT_DELETE \
  " CREATE TRIGGER update_playable_media_count_delete DELETE ON " \
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "old."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " != 1"\
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_PLAYABLE_MEDIACOUNT \
  " = " \
  CDS_DB_PROPERTY_CONTAINER_PLAYABLE_MEDIACOUNT \
  "-1" \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = old." \
  CDS_DB_PROPERTY_PARENT_ID \
  "; END;"


#ifdef DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION
#define CDS_DB_UPDATE_ALBUM_ARTS_QUERY\
  "UPDATE "\
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_UPNP_ALBUMARTURI_ORIGINAL \
  " = ?1, " \
  CDS_DB_PROPERTY_UPNP_ALBUMARTURI_PROFILE \
  " = ?2, " \
  CDS_DB_PROPERTY_UPNP_ALBUMARTURI_TN \
  " = ?3 " \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = ?4;"
#else /*DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION*/
#define CDS_DB_UPDATE_ALBUM_ARTS_QUERY\
  "UPDATE "\
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_UPNP_ALBUMARTURI_ORIGINAL \
  " = '%q', " \
  CDS_DB_PROPERTY_UPNP_ALBUMARTURI_PROFILE \
  " = %i, " \
  CDS_DB_PROPERTY_UPNP_ALBUMARTURI_TN \
  " = '%q' " \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = %i;"
#endif /*DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION*/


#ifdef DEVELOPMENT_ENABLE_FOLDER_BROWSE_OPTIMIZATIONS
#ifdef DEVELOPMENT_ENABLE_RECURSIVE_TRIGGERS
#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_VIDEO_COUNT_QUERY_INSERT \
  " CREATE TRIGGER update_video_count_insert AFTER INSERT ON " \
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "new."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " = 4"\
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " = 1" \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = new." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND " \
  CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " = 0 " \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_VIDEO_COUNT_QUERY_DELETE \
  " CREATE TRIGGER update_video_count_delete AFTER DELETE ON " \
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "old." CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " = 4 " \
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " = 0" \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = old." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND NOT EXISTS "\
    "( SELECT * FROM " \
    CDS_DB_METADATA_TABLE \
    " WHERE " \
    CDS_DB_PROPERTY_PARENT_ID \
    " = old." \
    CDS_DB_PROPERTY_PARENT_ID \
    " AND ( " \
    CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
    " = 1 OR " CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
    " = 4 ) LIMIT 1 " \
    ")" \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_VIDEO_COUNT_QUERY_UPDATE_INCREASE \
  " CREATE TRIGGER update_video_count_update_increase AFTER UPDATE OF " \
  CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " ON "\
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "new."CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  "> old."CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " = 1" \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = new." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND " \
  CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " = 0 " \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_VIDEO_COUNT_QUERY_UPDATE_DECREASE \
  " CREATE TRIGGER update_video_count_update_decrease AFTER UPDATE OF " \
  CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " ON "\
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "new."CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " < old."CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " = 0 " \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = new." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND NOT EXISTS "\
  "( SELECT * FROM " \
  CDS_DB_METADATA_TABLE \
  " WHERE " \
  CDS_DB_PROPERTY_PARENT_ID \
  " = old." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND ( " \
  CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " = 1 OR " CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
  " = 4 ) LIMIT 1 " \
  ")" \
  "; END;"

/*START Trigers for update audio video image count flag when content type update */

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_AUDIO_COUNT_QUERY_UPDATE \
  " CREATE TRIGGER update_audio_count_update AFTER UPDATE OF " \
  CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
  " ON "\
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "new."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " = 3 AND old."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " != 3"\
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " = 1" \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = new." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND " \
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " = 0 " \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_VIDEO_COUNT_QUERY_UPDATE \
  " CREATE TRIGGER update_video_count_update AFTER UPDATE OF " \
  CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
  " ON "\
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "new."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " = 4 "\
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " = 1" \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = new." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND " \
  CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " = 0 " \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_IMAGE_COUNT_QUERY_UPDATE \
  " CREATE TRIGGER update_image_count_update AFTER UPDATE OF " \
  CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
  " ON "\
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "new."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " = 2 "\
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " = 1" \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = new." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND " \
  CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " = 0 " \
  "; END;"


#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_VIDEO_COUNT_RESET_QUERY_UPDATE \
  " CREATE TRIGGER update_video_count_reset_update AFTER UPDATE OF " \
  CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
  " ON "\
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "old."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " = 4"\
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " = 0 " \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = old." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND NOT EXISTS "\
  "( SELECT * FROM " \
  CDS_DB_METADATA_TABLE \
  " WHERE " \
  CDS_DB_PROPERTY_PARENT_ID \
  " = old." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND ( " \
  CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " = 1 OR " CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
  " = 4 ) LIMIT 1 " \
  ")" \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_AUDIO_COUNT_RESET_QUERY_UPDATE \
  " CREATE TRIGGER update_audio_count_reset_update AFTER UPDATE OF " \
  CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
  " ON "\
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "old."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " = 3"\
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " = 0 " \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = old." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND NOT EXISTS "\
  "( SELECT * FROM " \
  CDS_DB_METADATA_TABLE \
  " WHERE " \
  CDS_DB_PROPERTY_PARENT_ID \
  " = old." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND ( " \
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " = 1 OR " CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
  " = 3 ) LIMIT 1 " \
  ")" \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_IMAGE_COUNT_RESET_QUERY_UPDATE \
  " CREATE TRIGGER update_image_count_reset_update AFTER UPDATE OF " \
  CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
  " ON "\
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "old."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " = 2"\
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " = 0 " \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = old." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND NOT EXISTS "\
  "( SELECT * FROM " \
  CDS_DB_METADATA_TABLE \
  " WHERE " \
  CDS_DB_PROPERTY_PARENT_ID \
  " = old." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND ( " \
  CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " = 1 OR " CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
  " = 2 ) LIMIT 1 " \
  ")" \
  "; END;"

/*END Trigers for update audio video image count flag when content type update */

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_AUDIO_COUNT_QUERY_INSERT \
  " CREATE TRIGGER update_audio_count_insert AFTER INSERT ON " \
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "new."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " = 3"\
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " = 1" \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = new." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND " \
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " = 0 " \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_AUDIO_COUNT_QUERY_DELETE \
  " CREATE TRIGGER update_audio_count_delete AFTER DELETE ON " \
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "old."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " = 3"\
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " = 0 " \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = old." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND NOT EXISTS "\
  "( SELECT * FROM " \
  CDS_DB_METADATA_TABLE \
  " WHERE " \
  CDS_DB_PROPERTY_PARENT_ID \
  " = old." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND ( " \
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " = 1 OR " CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
  " = 3 ) LIMIT 1 " \
  ")" \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_AUDIO_COUNT_QUERY_UPDATE_INCREASE \
  " CREATE TRIGGER update_audio_count_update_increase AFTER UPDATE OF " \
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " ON "\
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "new."CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  "> old."CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " = 1" \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = new." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND " \
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " = 0 " \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_AUDIO_COUNT_QUERY_UPDATE_DECREASE \
  " CREATE TRIGGER update_audio_count_update_decrease AFTER UPDATE OF " \
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " ON "\
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "new."CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " < old."CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " = " \
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  "-1" \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = new." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND NOT EXISTS "\
    "( SELECT * FROM " \
    CDS_DB_METADATA_TABLE \
    " WHERE " \
    CDS_DB_PROPERTY_PARENT_ID \
    " = new." \
    CDS_DB_PROPERTY_PARENT_ID \
    " AND ( " \
    CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
    " = 1 OR " CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
    " = 3 ) LIMIT 1 " \
    ")" \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_IMAGE_COUNT_QUERY_INSERT \
  " CREATE TRIGGER update_image_count_insert AFTER INSERT ON " \
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "new."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " = 2"\
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " = 1 " \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = new." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND " \
  CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " = 0 " \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_IMAGE_COUNT_QUERY_DELETE \
  " CREATE TRIGGER update_image_count_delete AFTER DELETE ON " \
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "old."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " = 2"\
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " = 0" \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = old." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND NOT EXISTS "\
  "( SELECT * FROM " \
  CDS_DB_METADATA_TABLE \
  " WHERE " \
  CDS_DB_PROPERTY_PARENT_ID \
  " = old." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND ( " \
  CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " = 1 OR " CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
  " = 2 ) LIMIT 1 " \
  ")" \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_IMAGE_COUNT_QUERY_UPDATE_INCREASE \
  " CREATE TRIGGER update_image_count_update_increase AFTER UPDATE OF " \
  CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " ON "\
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "new."CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  "> old."CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " = 1 " \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = new." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND " \
  CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " = 0 " \
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_UPDATE_IMAGE_COUNT_QUERY_UPDATE_DECREASE \
  " CREATE TRIGGER update_image_count_update_decrease AFTER UPDATE OF " \
  CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " ON "\
  CDS_DB_METADATA_TABLE \
  " FOR EACH ROW WHEN "\
  "new."CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " < old."CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " BEGIN" \
  " UPDATE " \
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " = 0" \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = new." \
  CDS_DB_PROPERTY_PARENT_ID \
  " AND NOT EXISTS "\
   "( SELECT * FROM " \
   CDS_DB_METADATA_TABLE \
   " WHERE " \
   CDS_DB_PROPERTY_PARENT_ID \
   " = new." \
   CDS_DB_PROPERTY_PARENT_ID \
   " AND ( " \
   CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
   " = 1 OR " CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
   " = 2 ) LIMIT 1 " \
   ")" \
  "; END;"
#endif /*DEVELOPMENT_ENABLE_RECURSIVE_TRIGGERS*/

#define CDS_DB_UPDATE_IMAGE_COUNT_QUERY\
  "UPDATE "\
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " = " \
  CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT \
  " %q 1" \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = %i"

#define CDS_DB_UPDATE_AUDIO_COUNT_QUERY\
  "UPDATE "\
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " = " \
  CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT \
  " %q 1" \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = %i"

#define CDS_DB_UPDATE_VIDEO_COUNT_QUERY\
  "UPDATE "\
  CDS_DB_METADATA_TABLE \
  " SET " \
  CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " = " \
  CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT \
  " %q 1" \
  " WHERE " \
  CDS_DB_PROPERTY_ID \
  " = %i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_COUNT_BY_TYPE_QUERY_PG\
    "SELECT count("\
    CDS_DB_PROPERTY_ID\
    ") FROM "\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
    CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
    CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
    CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
    "%q > 0 AND " \
    CDS_DB_PROPERTY_PG_VALUE"<=%i" \
    " UNION ALL " \
    "SELECT count("\
    CDS_DB_PROPERTY_ID\
    ") FROM "\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
    CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
    CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
    CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
    CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND " \
    CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_COUNT_BY_TYPE_QUERY\
    "SELECT count("\
     CDS_DB_PROPERTY_ID\
    ") FROM "\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
    CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
    CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
    CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
    "%q > 0 UNION ALL "\
    "SELECT count("\
    CDS_DB_PROPERTY_ID\
    ") FROM "\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
    CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
    CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
    CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
    CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_COUNT_BY_TYPE_QUERY_PG\
    "SELECT count("\
    CDS_DB_PROPERTY_ID\
    ") FROM "\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
    CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
    CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
    CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
    "%q > 0 AND " \
    CDS_DB_PROPERTY_PG_VALUE"<=%i" \
    " UNION ALL " \
    "SELECT count("\
    CDS_DB_PROPERTY_ID\
    ") FROM "\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
    CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
    CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
    CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
    CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND " \
    CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_COUNT_BY_TYPE_QUERY\
    "SELECT count("\
     CDS_DB_PROPERTY_ID\
    ") FROM "\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
    CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
    CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
    CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
    "%q > 0 UNION ALL "\
    "SELECT count("\
    CDS_DB_PROPERTY_ID\
    ") FROM "\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
    CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
    CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
    CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
    CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i"

#ifdef DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION

#define CDS_DB_GET_CHILDREN_COUNT_BY_TYPE_WITH_LIMIT_QUERY_PG\
  "SELECT count(*) "\
  "FROM "\
  "("\
    "SELECT "\
      CDS_DB_PROPERTY_ID\
    " FROM "\
      CDS_DB_METADATA_TABLE\
    " WHERE "\
      CDS_DB_PROPERTY_VALID_FLAG "=?1 "\
      "AND "\
      CDS_DB_PROPERTY_SHARED_FLAG "=?2 "\
      "AND "\
      CDS_DB_PROPERTY_PG_VALUE "<=?3"\
      "AND "\
      CDS_DB_PROPERTY_PARENT_ID "=?4 "\
      "AND "\
      "("\
        "?5 > 0"\
        " OR "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE "=?6"\
      ") "\
    "LIMIT ?7"\
  ")"

#define CDS_DB_GET_CHILDREN_COUNT_BY_TYPE_WITH_LIMIT_QUERY\
  "SELECT count(*) "\
  "FROM "\
  "("\
    "SELECT "\
      CDS_DB_PROPERTY_ID\
    " FROM "\
      CDS_DB_METADATA_TABLE\
    " WHERE "\
      CDS_DB_PROPERTY_VALID_FLAG "=?1 "\
      "AND "\
      CDS_DB_PROPERTY_SHARED_FLAG "=?2 "\
      "AND "\
      CDS_DB_PROPERTY_PARENT_ID "=?3 "\
      "AND "\
      "("\
        "?4 > 0"\
        " OR "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE "=?5"\
      ") "\
    "LIMIT ?6"\
  ")"

#else /* DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION */

#define CDS_DB_GET_CHILDREN_COUNT_BY_TYPE_WITH_LIMIT_QUERY_PG\
  "SELECT count(*) "\
  "FROM "\
  "("\
    "SELECT "\
      CDS_DB_PROPERTY_ID\
    " FROM "\
      CDS_DB_METADATA_TABLE\
    " WHERE "\
      CDS_DB_PROPERTY_VALID_FLAG "=%i "\
      "AND "\
      CDS_DB_PROPERTY_SHARED_FLAG "=%i "\
      "AND "\
      CDS_DB_PROPERTY_PG_VALUE "<=%i"\
      "AND "\
      CDS_DB_PROPERTY_PARENT_ID "=%i "\
      "AND "\
      "("\
        "%q > 0"\
        " OR "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE "=%i"\
      ") "\
    "LIMIT %i"\
  ")"

#define CDS_DB_GET_CHILDREN_COUNT_BY_TYPE_WITH_LIMIT_QUERY\
  "SELECT count(*) "\
  "FROM "\
  "("\
    "SELECT "\
      CDS_DB_PROPERTY_ID\
    " FROM "\
      CDS_DB_METADATA_TABLE\
    " WHERE "\
      CDS_DB_PROPERTY_VALID_FLAG "=%i "\
      "AND "\
      CDS_DB_PROPERTY_SHARED_FLAG "=%i "\
      "AND "\
      CDS_DB_PROPERTY_PARENT_ID "=%i "\
      "AND "\
      "("\
        "%q > 0"\
        " OR "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE "=%i"\
      ") "\
    "LIMIT %i"\
  ")"

#endif /* DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION */

#define CDS_DB_BROWSE_DIRECT_CHILDREN_BY_TYPE_QUERY_PG\
    "SELECT * FROM "\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
    CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
    CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
    CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
    "%q > 0 AND " \
    CDS_DB_PROPERTY_PG_VALUE"<=%i" \
    " UNION ALL " \
    "SELECT * FROM "\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
    CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
    CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
    CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
    CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND " \
    CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_BY_TYPE_QUERY\
    "SELECT * FROM "\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
    CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
    CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
    CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
    "%q > 0 UNION ALL "\
    "SELECT * FROM "\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
    CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
    CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
    CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
    CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i"
#endif /*DEVELOPMENT_ENABLE_FOLDER_BROWSE_OPTIMIZATIONS*/

#ifdef DEVELOPMENT_CONTENT_AGGREGATION
#define CDS_DB_METADATA_TABLE_TRIGGER_DELETE_CA_CHILDREN\
  "CREATE TRIGGER delete_ca_children"\
  " BEFORE DELETE ON "\
  CDS_DB_METADATA_TABLE\
  " FOR EACH ROW "\
  " BEGIN "\
  "DELETE FROM "\
  CDS_DB_METADATA_TABLE\
  " WHERE "\
  "old." CDS_DB_PROPERTY_ID " = "\
  CDS_DB_METADATA_TABLE "." CDS_DB_PROPERTY_PARENT_ID\
  "; END;"
#endif /* DEVELOPMENT_CONTENT_AGGREGATION */

#ifdef DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER

#define CDS_DB_METADATA_TABLE_TRIGGER_DELETE_PLAYLIST_MAP_PLAYLIST_QUERY \
  "CREATE TRIGGER delete_playlist_map_playlist"\
  " BEFORE DELETE ON "\
  CDS_DB_METADATA_TABLE\
  " FOR EACH ROW WHEN "\
  "old." CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " = 5"\
  " BEGIN "\
  "DELETE FROM "\
  CDS_DB_PLAYLIST_MAP_TABLE\
  " WHERE "\
  "old." CDS_DB_PROPERTY_ID " = "\
  CDS_DB_PLAYLIST_MAP_TABLE "." CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID\
  "; END;"

#define CDS_DB_METADATA_TABLE_TRIGGER_DELETE_PLAYLIST_MAP_CONTENT_QUERY \
  "CREATE TRIGGER delete_playlist_map_content"\
  " BEFORE DELETE ON "\
  CDS_DB_METADATA_TABLE\
  " FOR EACH ROW "\
  " BEGIN "\
  "DELETE FROM "\
  CDS_DB_PLAYLIST_MAP_TABLE\
  " WHERE "\
  "old." CDS_DB_PROPERTY_ID " = "\
  CDS_DB_PLAYLIST_MAP_TABLE "." CDS_DB_PROPERTY_PLAYLIST_MAP_CONTENT_ID\
  "; END;"

#endif /* DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER */


#ifdef DLNA_DB_SUPPORT_FOREIGNKEY
#define CDS_DB_REFERENCE_TABLE_QUERY \
	"CREATE TABLE IF NOT EXISTS " \
	 CDS_DB_REFERENCE_TABLE\
	"("\
	    CDS_DB_PROPERTY_REFERENCE_ID SPACE DLNA_DB_COL_TYPE_INTEGER SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY\
	"," CDS_DB_PROPERTY_REFERENCE_MEDIA_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_TYPE SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_FILEPATH SPACE DLNA_DB_COL_TYPE_TEXT  SPACE DLNA_DB_COL_CONSTRAINT_UNIQUE\
	"," CDS_DB_PROPERTY_REFERENCE_DC_TITLE SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_REFERENCE_RES SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_REFERENCE_RES_AT_WIDTH SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_RES_AT_HEIGHT SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_RES_AT_SIZE_HIGH SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_RES_AT_SIZE_LOW SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_RES_AT_PINFO SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_REFERENCE_PROFILE SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_SCALETYPE SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_PERMILLAGE SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_DLNAORG_PINFO_PN SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_REFERENCE_DLNAORG_PINFO_CI SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_REFERENCE_DLNAORG_PINFO_OP SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_REFERENCE_DLNAORG_MIMETYPE SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_FOREIGNKEY_REFERENCE_TABLE\
	")"
#else /*DLNA_DB_SUPPORT_FOREIGNKEY*/
#define CDS_DB_REFERENCE_TABLE_QUERY \
	"CREATE TABLE IF NOT EXISTS " \
	 CDS_DB_REFERENCE_TABLE\
	"("\
	    CDS_DB_PROPERTY_REFERENCE_ID SPACE DLNA_DB_COL_TYPE_INTEGER SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY\
	"," CDS_DB_PROPERTY_REFERENCE_MEDIA_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_TYPE SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_FILEPATH SPACE DLNA_DB_COL_TYPE_TEXT SPACE DLNA_DB_COL_CONSTRAINT_UNIQUE\
	"," CDS_DB_PROPERTY_REFERENCE_DC_TITLE SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_REFERENCE_RES SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_REFERENCE_RES_AT_WIDTH SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_RES_AT_HEIGHT SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_RES_AT_SIZE_HIGH SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_RES_AT_SIZE_LOW SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_RES_AT_PINFO SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_REFERENCE_PROFILE SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_SCALETYPE SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_PERMILLAGE SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_REFERENCE_DLNAORG_PINFO_PN SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_REFERENCE_DLNAORG_PINFO_CI SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_REFERENCE_DLNAORG_PINFO_OP SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_REFERENCE_DLNAORG_MIMETYPE SPACE DLNA_DB_COL_TYPE_TEXT\
	")"
#endif /*DLNA_DB_SUPPORT_FOREIGNKEY*/

enum _cds_database_reference_column_index {
  CDS_DB_PROPERTY_REFERENCE_ID_COLUMN_INDEX,
  CDS_DB_PROPERTY_REFERENCE_MEDIA_ID_COLUMN_INDEX,
  CDS_DB_PROPERTY_REFERENCE_TYPE_COLUMN_INDEX,
  CDS_DB_PROPERTY_REFERENCE_FILEPATH_COLUMN_INDEX,
  CDS_DB_PROPERTY_REFERENCE_DC_TITLE_COLUMN_INDEX,
  CDS_DB_PROPERTY_REFERENCE_RES_COLUMN_INDEX,
  CDS_DB_PROPERTY_REFERENCE_RES_AT_WIDTH_COLUMN_INDEX,
  CDS_DB_PROPERTY_REFERENCE_RES_AT_HEIGHT_COLUMN_INDEX,
  CDS_DB_PROPERTY_REFERENCE_RES_AT_SIZE_HIGH_COLUMN_INDEX,
  CDS_DB_PROPERTY_REFERENCE_RES_AT_SIZE_LOW_COLUMN_INDEX,
  CDS_DB_PROPERTY_REFERENCE_RES_AT_PINFO_COLUMN_INDEX,
  CDS_DB_PROPERTY_REFERENCE_PROFILE_COLUMN_INDEX,
  CDS_DB_PROPERTY_REFERENCE_SCALETYPE_COLUMN_INDEX,
  CDS_DB_PROPERTY_REFERENCE_PERMILLAGE_COLUMN_INDEX,
};


#ifdef DLNA_DB_SUPPORT_FOREIGNKEY
#define CDS_DB_SUBTITLE_TABLE_QUERY \
	"CREATE TABLE IF NOT EXISTS " \
	 CDS_DB_SUBTITLE_TABLE\
	"("\
	    CDS_DB_PROPERTY_SUBTITLE_ID SPACE DLNA_DB_COL_TYPE_INTEGER SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY\
	"," CDS_DB_PROPERTY_SUBTITLE_VIDEOID SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_SUBTITLE_FOLDER_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_SUBTITLE_TYPE SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_SUBTITLE_TITLE SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_SUBTITLE_LANGUAGE SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_SUBTITLE_FILEPATH SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_SUBTITLE_STREAMNUMBER SPACE DLNA_DB_COL_TYPE_INTEGER\
	")"
#else /*DLNA_DB_SUPPORT_FOREIGNKEY*/
#define CDS_DB_SUBTITLE_TABLE_QUERY \
	"CREATE TABLE IF NOT EXISTS " \
	 CDS_DB_SUBTITLE_TABLE\
	"("\
	    CDS_DB_PROPERTY_SUBTITLE_ID SPACE DLNA_DB_COL_TYPE_INTEGER SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY\
	"," CDS_DB_PROPERTY_SUBTITLE_VIDEOID SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_SUBTITLE_FOLDER_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_SUBTITLE_TYPE SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_SUBTITLE_TITLE SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_SUBTITLE_LANGUAGE SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_SUBTITLE_FILEPATH SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_SUBTITLE_STREAMNUMBER SPACE DLNA_DB_COL_TYPE_INTEGER\
	")"
#endif /*DLNA_DB_SUPPORT_FOREIGNKEY*/

enum _cds_database_subtitle_column_index {
  CDS_DB_PROPERTY_SUBTITLE_ID_COLUMN_INDEX,
  CDS_DB_PROPERTY_SUBTITLE_VIDEOID_COLUMN_INDEX,
  CDS_DB_PROPERTY_SUBTITLE_FOLDER_ID_COLUMN_INDEX,
  CDS_DB_PROPERTY_SUBTITLE_TYPE_COLUMN_INDEX,
  CDS_DB_PROPERTY_SUBTITLE_TITLE_COLUMN_INDEX,
  CDS_DB_PROPERTY_SUBTITLE_LANGUAGE_COLUMN_INDEX,
  CDS_DB_PROPERTY_SUBTITLE_FILEPATH_COLUMN_INDEX,
  CDS_DB_PROPERTY_SUBTITLE_STREAMNUMBER_COLUMN_INDEX,
};

#ifdef DLNA_DB_SUPPORT_FOREIGNKEY
#define CDS_DB_EXTENDED_METADATA_TABLE_QUERY \
	"CREATE TABLE IF NOT EXISTS " \
	 CDS_DB_EXTENDED_METADATA_TABLE\
	"("\
	    CDS_DB_PROPERTY_EXTMETA_ID SPACE DLNA_DB_COL_TYPE_INTEGER SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY\
	"," CDS_DB_PROPERTY_EXTMETA_METADATA_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_EXTMETA_GPSINFO_VALID SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_EXTMETA_GPSINFO_IF_CHECKED SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_EXTMETA_GPSINFO_LATITUDE SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_EXTMETA_GPSINFO_LONGITUDE SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_DRM_VALID SPACE DLNA_DB_COL_TYPE_INTEGER \
	"," CDS_DB_PROPERTY_DRM_TYPE SPACE DLNA_DB_COL_TYPE_INTEGER \
	"," CDS_DB_PROPERTY_DRM_MODE SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_DRM_RETENSION SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_DRM_APS SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_DRM_ICT SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_DRM_EPN SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_DRM_CCI SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DRM_PCPENCRYPTED_SIZE_LOW SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DRM_PCPENCRYPTED_SIZE_HIGH SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_EXTMETA_AUDIO_COMMENT SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_EXTMETA_AUDIO_YEAR SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_DRM_PROTECTED SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_FOREIGNKEY_EXTMETA_TABLE\
	")"
#else /*DLNA_DB_SUPPORT_FOREIGNKEY*/
#define CDS_DB_EXTENDED_METADATA_TABLE_QUERY \
	"CREATE TABLE IF NOT EXISTS " \
	 CDS_DB_EXTENDED_METADATA_TABLE\
	"("\
	    CDS_DB_PROPERTY_EXTMETA_ID SPACE DLNA_DB_COL_TYPE_INTEGER SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY\
	"," CDS_DB_PROPERTY_EXTMETA_METADATA_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_EXTMETA_GPSINFO_VALID SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_EXTMETA_GPSINFO_IF_CHECKED SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_EXTMETA_GPSINFO_LATITUDE SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_EXTMETA_GPSINFO_LONGITUDE SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_DRM_VALID SPACE DLNA_DB_COL_TYPE_INTEGER \
        "," CDS_DB_PROPERTY_DRM_TYPE SPACE DLNA_DB_COL_TYPE_INTEGER \
        "," CDS_DB_PROPERTY_DRM_MODE SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DRM_RETENSION SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DRM_APS SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DRM_ICT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DRM_EPN SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DRM_CCI SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DRM_PCPENCRYPTED_SIZE_LOW SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DRM_PCPENCRYPTED_SIZE_HIGH SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_EXTMETA_COVERART_VALID SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_EXTMETA_COVERART_COVERURI SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_EXTMETA_COVERART_COVERWIDTH SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_EXTMETA_COVERART_COVERHEIGHT SPACE DLNA_DB_COL_TYPE_INTEGER\
	"," CDS_DB_PROPERTY_EXTMETA_AUDIO_COMMENT SPACE DLNA_DB_COL_TYPE_TEXT\
	"," CDS_DB_PROPERTY_EXTMETA_AUDIO_YEAR SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_DRM_PROTECTED SPACE DLNA_DB_COL_TYPE_INTEGER\
	")"
#endif /*DLNA_DB_SUPPORT_FOREIGNKEY*/

enum _cds_database_ext_metadata_column_index
{
CDS_DB_PROPERTY_EXTMETA_ID_COLUMN_INDEX,
CDS_DB_PROPERTY_EXTMETA_METADATA_ID_COLUMN_INDEX,
CDS_DB_PROPERTY_EXTMETA_GPSINFO_VALID_COLUMN_INDEX,
CDS_DB_PROPERTY_EXTMETA_GPSINFO_IF_CHECKED_COLUMN_INDEX,
CDS_DB_PROPERTY_EXTMETA_GPSINFO_LATITUDE_COLUMN_INDEX,
CDS_DB_PROPERTY_EXTMETA_GPSINFO_LONGITUDE_COLUMN_INDEX,
CDS_DB_PROPERTY_DRM_VALID_COLUMN_INDEX,
CDS_DB_PROPERTY_DRM_TYPE_COLUMN_INDEX,
CDS_DB_PROPERTY_DRM_MODE_COLUMN_INDEX,
CDS_DB_PROPERTY_DRM_RETENSION_COLUMN_INDEX,
CDS_DB_PROPERTY_DRM_APS_COLUMN_INDEX,
CDS_DB_PROPERTY_DRM_ICT_COLUMN_INDEX,
CDS_DB_PROPERTY_DRM_EPN_COLUMN_INDEX,
CDS_DB_PROPERTY_DRM_CCI_COLUMN_INDEX,
CDS_DB_PROPERTY_DRM_PCPENCRYPTED_SIZE_LOW_COLUMN_INDEX,
CDS_DB_PROPERTY_DRM_PCPENCRYPTED_SIZE_HIGH_COLUMN_INDEX,
CDS_DB_PROPERTY_EXTMETA_AUDIO_COMMENT_COLUMN_INDEX,
CDS_DB_PROPERTY_EXTMETA_AUDIO_YEAR_COLUMN_INDEX,
CDS_DB_PROPERTY_DRM_PROTECTED_COLUMN_INDEX
};


#ifdef DLNA_DB_SUPPORT_FOREIGNKEY
#define CDS_DB_USER_METADATA_TABLE_QUERY \
        "CREATE TABLE IF NOT EXISTS " \
         CDS_DB_USER_METADATA_TABLE\
        "("\
            CDS_DB_PROPERTY_USERMETA_ID SPACE DLNA_DB_COL_TYPE_INTEGER SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY\
        "," CDS_DB_PROPERTY_USERMETA_METADATA_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_USERMETA_NAME SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_USERMETA_VALUE SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_FOREIGNKEY_USERMETA_TABLE\
        ")"
#else /*DLNA_DB_SUPPORT_FOREIGNKEY*/
#define CDS_DB_USER_METADATA_TABLE_QUERY \
        "CREATE TABLE IF NOT EXISTS " \
         CDS_DB_USER_METADATA_TABLE\
        "("\
            CDS_DB_PROPERTY_USERMETA_ID SPACE DLNA_DB_COL_TYPE_INTEGER SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY\
        "," CDS_DB_PROPERTY_USERMETA_METADATA_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_USERMETA_NAME SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_USERMETA_VALUE SPACE DLNA_DB_COL_TYPE_TEXT\
        ")"
#endif /*DLNA_DB_SUPPORT_FOREIGNKEY*/

enum _cds_database_user_metadata_column_index
{
CDS_DB_PROPERTY_USERMETA_ID_COLUMN_INDEX,
CDS_DB_PROPERTY_USERMETA_METADATA_ID_COLUMN_INDEX,
CDS_DB_PROPERTY_USERMETA_NAME_COLUMN_INDEX,
CDS_DB_PROPERTY_USERMETA_VALUE_COLUMN_INDEX,
};


#ifdef DLNA_DB_SUPPORT_FOREIGNKEY
#define CDS_DB_PROTOCOL_TABLE_QUERY \
        "CREATE TABLE IF NOT EXISTS " \
         CDS_DB_PROTOCOL_TABLE\
        "("\
            CDS_DB_PROPERTY_PROTOCOL_ID SPACE DLNA_DB_COL_TYPE_INTEGER SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY\
        "," CDS_DB_PROPERTY_PROTOCOL_METADATA_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_PROTOCOL_PINFO SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_PROTOCOL_PINFO_RELAXED SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_FOREIGNKEY_PROTOCOL_TABLE\
        ")"
#else /*DLNA_DB_SUPPORT_FOREIGNKEY*/
#define CDS_DB_PROTOCOL_TABLE_QUERY \
        "CREATE TABLE IF NOT EXISTS " \
         CDS_DB_PROTOCOL_TABLE\
        "("\
            CDS_DB_PROPERTY_PROTOCOL_ID SPACE DLNA_DB_COL_TYPE_INTEGER SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY\
        "," CDS_DB_PROPERTY_PROTOCOL_METADATA_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_PROTOCOL_PINFO SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_PROTOCOL_PINFO_RELAXED SPACE DLNA_DB_COL_TYPE_TEXT\
        ")"
#endif /*DLNA_DB_SUPPORT_FOREIGNKEY*/

enum _cds_database_protocol_column_index
{
CDS_DB_PROPERTY_PROTOCOL_ID_COLUMN_INDEX,
CDS_DB_PROPERTY_PROTOCOL_METADATA_ID_COLUMN_INDEX,
CDS_DB_PROPERTY_PROTOCOL_PINFO_COLUMN_INDEX,
CDS_DB_PROPERTY_PROTOCOL_PINFO_RELAXED_COLUMN_INDEX,
};

#define CDS_DB_RESOURCE_TABLE_QUERY \
  "CREATE TABLE IF NOT EXISTS " \
  CDS_DB_RESOURCE_TABLE\
  "("\
      CDS_DB_PROPERTY_RESOURCE_ID SPACE DLNA_DB_COL_TYPE_INTEGER SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY\
  "," CDS_DB_PROPERTY_RESOURCE_METADATA_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
  "," CDS_DB_PROPERTY_RESOURCE_TYPE SPACE DLNA_DB_COL_TYPE_INTEGER\
  "," CDS_DB_PROPERTY_RESOURCE_FILEPATH SPACE DLNA_DB_COL_TYPE_TEXT\
  "," CDS_DB_PROPERTY_RESOURCE_URI SPACE DLNA_DB_COL_TYPE_TEXT\
  "," CDS_DB_PROPERTY_RESOURCE_WIDTH SPACE DLNA_DB_COL_TYPE_INTEGER\
  "," CDS_DB_PROPERTY_RESOURCE_HEIGHT SPACE DLNA_DB_COL_TYPE_INTEGER\
  "," CDS_DB_PROPERTY_RESOURCE_SIZE_HIGH SPACE DLNA_DB_COL_TYPE_INTEGER\
  "," CDS_DB_PROPERTY_RESOURCE_SIZE_LOW SPACE DLNA_DB_COL_TYPE_INTEGER\
  "," CDS_DB_PROPERTY_RESOURCE_DURATION SPACE DLNA_DB_COL_TYPE_TEXT\
  "," CDS_DB_PROPERTY_RESOURCE_BITRATE SPACE DLNA_DB_COL_TYPE_INTEGER\
  "," CDS_DB_PROPERTY_RESOURCE_SAMPLEFREQ SPACE DLNA_DB_COL_TYPE_INTEGER\
  "," CDS_DB_PROPERTY_RESOURCE_AUDIOCHANN SPACE DLNA_DB_COL_TYPE_INTEGER\
  "," CDS_DB_PROPERTY_RESOURCE_PINFO SPACE DLNA_DB_COL_TYPE_TEXT\
      CDS_DB_FOREIGNKEY_RESOURCE_TABLE\
  ")"

enum _cds_database_resource_column_index {
  CDS_DB_PROPERTY_RESOURCE_ID_COLUMN_INDEX,
  CDS_DB_PROPERTY_RESOURCE_METADATA_ID_COLUMN_INDEX,
  CDS_DB_PROPERTY_RESOURCE_TYPE_COLUMN_INDEX,
  CDS_DB_PROPERTY_RESOURCE_FILEPATH_COLUMN_INDEX,
  CDS_DB_PROPERTY_RESOURCE_URI_COLUMN_INDEX,
  CDS_DB_PROPERTY_RESOURCE_WIDTH_COLUMN_INDEX,
  CDS_DB_PROPERTY_RESOURCE_HEIGHT_COLUMN_INDEX,
  CDS_DB_PROPERTY_RESOURCE_SIZE_HIGH_COLUMN_INDEX,
  CDS_DB_PROPERTY_RESOURCE_SIZE_LOW_COLUMN_INDEX,
  CDS_DB_PROPERTY_RESOURCE_DURATION_COLUMN_INDEX,
  CDS_DB_PROPERTY_RESOURCE_BITRATE_COLUMN_INDEX,
  CDS_DB_PROPERTY_RESOURCE_SAMPLEFREQ_COLUMN_INDEX,
  CDS_DB_PROPERTY_RESOURCE_AUDIOCHANN_COLUMN_INDEX,
  CDS_DB_PROPERTY_RESOURCE_PINFO_COLUMN_INDEX
};

#define CDS_DB_OBJRIGHT_TABLE_QUERY \
        "CREATE TABLE IF NOT EXISTS " \
         CDS_DB_OBJECT_RIGHTS_TABLE \
        "("\
         CDS_DB_PROPERTY_OBJRIGHT_ID SPACE DLNA_DB_COL_TYPE_INTEGER SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY\
        "," CDS_DB_PROPERTY_OBJRIGHT_METADATA_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_OBJRIGHT_IS_DRM_PROTECT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_OBJRIGHT_ALLOW_DTCP_PROTECT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_OBJRIGHT_SUBSCRIPTION_TIME SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_OBJRIGHT_CCI SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_OBJRIGHT_RETENTION_TIME SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_OBJRIGHT_CONCURENT_VIEW SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_OBJRIGHT_PLAYCOUNT SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_OBJRIGHT_ALLOW_DISTRIBUTION SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_OBJRIGHT_NO_DEVICES_ACCESSED SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_OBJRIGHT_NO_DEVICES_ALLOWED SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," DLNA_DB_COL_CONSTRAINT_UNIQUE "(" CDS_DB_PROPERTY_OBJRIGHT_METADATA_ID ")"\
    	")"

enum _cds_database_object_rights_column_index
{
	CDS_DB_PROPERTY_OBJRIGHT_ID_COLUMN_INDEX,
	CDS_DB_PROPERTY_OBJRIGHT_METADATA_ID_COLUMN_INDEX,
	CDS_DB_PROPERTY_OBJRIGHT_IS_DRM_PROTECT_COLUMN_INDEX,
	CDS_DB_PROPERTY_OBJRIGHT_ALLOW_DTCP_PROTECT_COLUMN_INDEX,
	CDS_DB_PROPERTY_OBJRIGHT_SUBSCRIPTION_TIME_COLUMN_INDEX,
	CDS_DB_PROPERTY_OBJRIGHT_CCI_COLUMN_INDEX,
	CDS_DB_PROPERTY_OBJRIGHT_RETENTION_TIME_COLUMN_INDEX,
	CDS_DB_PROPERTY_OBJRIGHT_CONCURENT_VIEW_COLUMN_INDEX,
	CDS_DB_PROPERTY_OBJRIGHT_PLAYCOUNT_COLUMN_INDEX,
	CDS_DB_PROPERTY_OBJRIGHT_ALLOW_DISTRIBUTION_COLUMN_INDEX,
	CDS_DB_PROPERTY_OBJRIGHT_NO_DEVICES_ACCESSED_COLUMN_INDEX,
	CDS_DB_PROPERTY_OBJRIGHT_NO_DEVICES_ALLOWED_COLUMN_INDEX
};

#ifdef DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER
#ifdef DLNA_DB_SUPPORT_FOREIGNKEY
#define CDS_DB_PLAYLIST_MAP_TABLE_QUERY \
        "CREATE TABLE IF NOT EXISTS " \
        CDS_DB_PLAYLIST_MAP_TABLE \
        "(" \
            CDS_DB_PROPERTY_PLAYLIST_MAP_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
            SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY\
            SPACE "AUTOINCREMENT"\
        "," CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_PLAYLIST_MAP_CONTENT_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_FOREIGNKEY_PLAYLIST_MAP_TABLE\
        ")"
#else /*DLNA_DB_SUPPORT_FOREIGNKEY*/
#define CDS_DB_PLAYLIST_MAP_TABLE_QUERY \
        "CREATE TABLE IF NOT EXISTS " \
        CDS_DB_PLAYLIST_MAP_TABLE \
        "(" \
            CDS_DB_PROPERTY_PLAYLIST_MAP_ID SPACE DLNA_DB_COL_TYPE_INTEGER DLNA_DB_COL_CONSTRAINT_PRIMARYKEY SPACE "AUTOINCREMENT"\
        "," CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_PLAYLIST_MAP_CONTENT_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
        ")"
#endif /*DLNA_DB_SUPPORT_FOREIGNKEY*/

enum _cds_database_playlist_column_index
{
CDS_DB_PROPERTY_PLAYLIST_MAP_ID_COLUMN_INDEX,
CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID_COLUMN_INDEX,
CDS_DB_PROPERTY_PLAYLIST_MAP_CONTENT_ID_COLUMN_INDEX,
};

#endif /* DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER */

#ifdef DEVELOPMENT_ENABLE_ADS
#define CDS_DB_MPD_SEGMENTS_TABLE_QUERY \
        "CREATE TABLE IF NOT EXISTS " \
        CDS_DB_MPD_SEGMENTS_TABLE \
        "(" \
            CDS_DB_PROPERTY_MPD_SEGMENTS_ID SPACE DLNA_DB_COL_TYPE_INTEGER SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY SPACE "AUTOINCREMENT"\
        "," CDS_DB_PROPERTY_MPD_SEGMENTS_MPD_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_MPD_SEGMENTS_FILEPATH SPACE DLNA_DB_COL_TYPE_TEXT\
        ")"
enum _cds_database_mpd_segments_column_index
{
CDS_DB_PROPERTY_MPD_SEGMENTS_ID_COLUMN_INDEX,
CDS_DB_PROPERTY_MPD_SEGMENTS_MAPID_COLUMN_INDEX,
CDS_DB_PROPERTY_MPD_SEGMENTS_FILEPATH_COLUMN_INDEX,
};
#endif /* DEVELOPMENT_ENABLE_ADS */

#ifdef DEVELOPMENT_ENABLE_CVP_SERVER_PLAYSPEED
#define CDS_DB_SCALEDFILE_TABLE_QUERY \
        "CREATE TABLE IF NOT EXISTS " \
        CDS_DB_SCALEDFILE_TABLE \
        "(" \
            CDS_DB_PROPERTY_SCALEDFILE_ID SPACE DLNA_DB_COL_TYPE_INTEGER SPACE DLNA_DB_COL_CONSTRAINT_PRIMARYKEY SPACE "AUTOINCREMENT"\
        "," CDS_DB_PROPERTY_SCALEDFILE_METADATA_ID SPACE DLNA_DB_COL_TYPE_INTEGER\
        "," CDS_DB_PROPERTY_SCALEDFILE_PLAYSPEED SPACE DLNA_DB_COL_TYPE_TEXT\
        "," CDS_DB_PROPERTY_SCALEDFILE_FILEPATH SPACE DLNA_DB_COL_TYPE_TEXT SPACE DLNA_DB_COL_CONSTRAINT_UNIQUE\
        ")"
enum _cds_database_scaledfile_column_index
{
CDS_DB_PROPERTY_SCALEDFILE_ID_INDEX,
CDS_DB_PROPERTY_SCALEDFILE_METADATA_ID_INDEX,
CDS_DB_PROPERTY_SCALEDFILE_PLAYSPEED_INDEX,
CDS_DB_PROPERTY_SCALEDFILE_FILEPATH_INDEX
};
#endif /* DEVELOPMENT_ENABLE_CVP_SERVER_PLAYSPEED */

#define CDS_DB_GET_PROPERTY_BY_ID_QUERY\
        "SELECT * FROM "\
        "%q"\
        " WHERE "\
        "%q=%i;"

#define CDS_DB_GET_ONE_PROPERTY_BY_ID_QUERY\
        "SELECT %q FROM "\
        "%q"\
        " WHERE "\
        "%q=%i;"

#define CDS_DB_GET_PROPERTY_BY_STRING\
        "SELECT %q FROM "\
        "%q"\
        " WHERE "\
        "%q='%q';"

#define CDS_DB_GET_PROPERTY_BY_TWO_STRINGS\
        "SELECT %q FROM "\
        "%q"\
        " WHERE "\
        "%q='%q' AND "\
        "%q='%q';"

#define CDS_DB_GET_PROPERTY_BY_STRING_AND_NUM\
        "SELECT %q FROM "\
        "%q"\
        " WHERE "\
        "%q='%q' AND "\
        "%q=%i;"

#define CDS_DB_GET_FROM_METADATA_TABLE_BY_ID_QUERY \
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_ID\
        "=%i"

#define CDS_DB_GET_FROM_METADATA_TABLE_QUERY \
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_ID\
        ">%i AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID\
        "='%q' "\
        CDS_DB_STRING_ORDER_BY SPACE CDS_DB_PROPERTY_ID SPACE CDS_DB_STRING_ASC\
        " LIMIT 1 "

#define CDS_DB_GET_FROM_METADATA_TABLE_WITH_PARENT_QUERY \
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_ID\
        ">%i AND "\
        CDS_DB_PROPERTY_PARENT_ID\
        "='%i' AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID\
        "='%q' "\
        CDS_DB_STRING_ORDER_BY SPACE CDS_DB_PROPERTY_ID SPACE CDS_DB_STRING_ASC\
        " LIMIT 1 "

#define CDS_DB_GET_FROM_BY_STORAGE_BY_ID_QUERY\
        "SELECT * FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        "%q=%i"

#define CDS_DB_GET_FROM_METADATA_TABLE_BY_PATH_QUERY \
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_FILEPATH\
        "='%q'"

#define CDS_DB_GET_FROM_REFERENCE_TABLE_BY_ID_QUERY \
        "SELECT * FROM "\
        CDS_DB_REFERENCE_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_REFERENCE_ID\
        "=%i;"

#define CDS_DB_GET_FROM_SUBTITLE_TABLE_BY_ID_QUERY \
        "SELECT * FROM "\
        CDS_DB_SUBTITLE_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_SUBTITLE_ID\
        "=%i;"

#define CDS_DB_GET_FROM_SUBTITLE_TABLE_WITH_PARENT_QUERY \
        "SELECT * FROM "\
        CDS_DB_SUBTITLE_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_SUBTITLE_ID\
        ">%i AND "\
        CDS_DB_PROPERTY_SUBTITLE_FOLDER_ID\
        "='%i' "\
        CDS_DB_STRING_ORDER_BY SPACE CDS_DB_PROPERTY_ID SPACE CDS_DB_STRING_ASC\
        " LIMIT 1 "

#define CDS_DB_ADD_REFERENCES_QUERY \
        "SELECT * FROM "\
        CDS_DB_REFERENCE_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_REFERENCE_MEDIA_ID\
        "=%i;"

#define CDS_DB_ADD_SUBTITLES_QUERY\
        "SELECT * FROM "\
        CDS_DB_SUBTITLE_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_SUBTITLE_VIDEOID\
        "=%i;"

#define CDS_DB_GET_SUBTITLE_BY_FULL_PATH_QUERY\
        "SELECT * FROM "\
        CDS_DB_SUBTITLE_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_SUBTITLE_FILEPATH " ='%q';"

#ifdef DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER

//Here is an example of CDS_DB_INSERT_INTO_PLAYLIST_MAP_TABLE_BY_CONTENT_PATH
//Note that playlist is first and content is second.
//
//INSERT INTO tplaylistmap (playlist_id, content_id)
//SELECT a1.id, a2.id
//FROM tmetadata as a1 JOIN tmetadata as a2
//WHERE a1.filePath = "/testcontent/bin/playlist2.pls" AND a2.filePath = "/testcontent/Audio/MP3/O-MP3-3.mp3";


#define CDS_DB_INSERT_INTO_PLAYLIST_MAP_TABLE_BY_PATH\
        "INSERT INTO "\
        CDS_DB_PLAYLIST_MAP_TABLE\
        "("\
            CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID\
        "," CDS_DB_PROPERTY_PLAYLIST_MAP_CONTENT_ID\
        ")"\
        "SELECT "\
            "a1."CDS_DB_PROPERTY_ID\
        "," "a2."CDS_DB_PROPERTY_ID\
        " FROM "\
            CDS_DB_METADATA_TABLE " AS a1"\
            " JOIN "\
            CDS_DB_METADATA_TABLE " AS a2"\
        " WHERE "\
            "( a1."CDS_DB_PROPERTY_FILEPATH " = '%q'"\
            " AND "\
            "a2."CDS_DB_PROPERTY_FILEPATH " = '%q')" \
            " AND a2."CDS_DB_PROPERTY_MEDIA_TYPE " <>0;"

#endif /* DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER */


#ifdef DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION

#define CDS_DB_INSERT_INTO_METADATA_TABLE_QUERY_VALUES\
  "?1, ?2, ?3, ?4, ?5, ?6, ?7, ?8, ?9, ?10, ?11, ?12, ?13, ?14, ?15, ?16, ?17, ?18, ?19, ?20, ?21, ?22, ?23, ?24, ?25, ?26, ?27"

#else /* DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION */

#define CDS_DB_INSERT_INTO_METADATA_TABLE_QUERY_VALUES\
  "%i, %i, %i, %i, %i, '%q', %i, %i, %i, %i, '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', %i, %i, %i, %i, %i, %i, %i, %i, '%q'"

#endif /* DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION */


#define CDS_DB_INSERT_INTO_METADATA_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_METADATA_TABLE\
        "("\
            CDS_DB_PROPERTY_MEDIA_CLASS_TYPE\
        "," SPACE CDS_DB_PROPERTY_IS_CONTAINER\
        "," SPACE CDS_DB_PROPERTY_VALID_FLAG\
        "," SPACE CDS_DB_PROPERTY_SHARED_FLAG\
        "," SPACE CDS_DB_PROPERTY_PARENT_ID\
        "," SPACE CDS_DB_PROPERTY_STORAGE_DEVICE_ID\
        "," SPACE CDS_DB_PROPERTY_MEDIA_TYPE\
        "," SPACE CDS_DB_PROPERTY_MODTIME\
        "," SPACE CDS_DB_PROPERTY_DC_DATE\
        "," SPACE CDS_DB_PROPERTY_PG_VALUE\
        "," SPACE CDS_DB_PROPERTY_FILEPATH\
        "," SPACE CDS_DB_PROPERTY_UPNP_CLASS\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE\
        "," SPACE CDS_DB_PROPERTY_DC_CREATOR\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM\
        "," SPACE CDS_DB_PROPERTY_UPNP_ARTIST\
        "," SPACE CDS_DB_PROPERTY_UPNP_GENRE\
        "," SPACE CDS_DB_PROPERTY_RESTRICTED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_MIMETYPE\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_HIGH\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW\
        "," SPACE CDS_DB_PROPERTY_ADD_DATE\
        "," SPACE CDS_DB_PROPERTY_YEAR\
        "," SPACE CDS_DB_PROPERTY_MONTH\
        "," SPACE CDS_DB_PROPERTY_DAY\
        "," SPACE CDS_DB_PROPERTY_LAST_PLAY_DATE\
        "," SPACE CDS_DB_PROPERTY_PLAY_COUNT\
        "," SPACE CDS_DB_PROPERTY_EXT_ID\
        ") "\
        "VALUES (" CDS_DB_INSERT_INTO_METADATA_TABLE_QUERY_VALUES ");"

#define CDS_DB_INSERT_AUDIO_FULL_INTO_METADATA_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_METADATA_TABLE\
        "("\
            CDS_DB_PROPERTY_MEDIA_CLASS_TYPE\
        "," SPACE CDS_DB_PROPERTY_IS_CONTAINER\
        "," SPACE CDS_DB_PROPERTY_VALID_FLAG\
        "," SPACE CDS_DB_PROPERTY_SHARED_FLAG\
        "," SPACE CDS_DB_PROPERTY_PARENT_ID\
        "," SPACE CDS_DB_PROPERTY_STORAGE_DEVICE_ID\
        "," SPACE CDS_DB_PROPERTY_MEDIA_TYPE\
        "," SPACE CDS_DB_PROPERTY_MODTIME\
        "," SPACE CDS_DB_PROPERTY_DC_DATE\
        "," SPACE CDS_DB_PROPERTY_PG_VALUE\
        "," SPACE CDS_DB_PROPERTY_FILEPATH\
        "," SPACE CDS_DB_PROPERTY_UPNP_CLASS\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE\
        "," SPACE CDS_DB_PROPERTY_DC_CREATOR\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM\
        "," SPACE CDS_DB_PROPERTY_UPNP_ARTIST\
        "," SPACE CDS_DB_PROPERTY_UPNP_GENRE\
        "," SPACE CDS_DB_PROPERTY_RESTRICTED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_MIMETYPE\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_HIGH\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW\
        "," SPACE CDS_DB_PROPERTY_ADD_DATE\
        "," SPACE CDS_DB_PROPERTY_LAST_PLAY_DATE\
        "," SPACE CDS_DB_PROPERTY_PLAY_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT\
        "," SPACE CDS_DB_PROPERTY_UPNP_ORIGINAL_TRACKNO\
        "," SPACE CDS_DB_PROPERTY_RES_AT_DURATION\
        "," SPACE CDS_DB_PROPERTY_RES_AT_BITRATE\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SAMPLEFREQ\
        "," SPACE CDS_DB_PROPERTY_RES_AT_AUDIOCHANN\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_ORIGINAL\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_PROFILE\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_TN\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS\
        "," SPACE CDS_DB_PROPERTY_COMPOSER\
        "," SPACE CDS_DB_PROPERTY_ARTIST_INDEX\
        "," SPACE CDS_DB_PROPERTY_UPNP_RATING\
        ") "\
        "VALUES (%i, %i, %i, %i, %i, '%q', %i, %i, %i, %i, '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', %i, %i, %i, %i, %i, 0, 0, 0, 0, '%q', '%q', %i, %i, %i, '%q', %i, '%q', %i, %i, '%q', '%q', '%q');"

#define CDS_DB_INSERT_IMAGE_FULL_INTO_METADATA_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_METADATA_TABLE\
        "("\
            CDS_DB_PROPERTY_MEDIA_CLASS_TYPE\
        "," SPACE CDS_DB_PROPERTY_IS_CONTAINER\
        "," SPACE CDS_DB_PROPERTY_VALID_FLAG\
        "," SPACE CDS_DB_PROPERTY_SHARED_FLAG\
        "," SPACE CDS_DB_PROPERTY_PARENT_ID\
        "," SPACE CDS_DB_PROPERTY_STORAGE_DEVICE_ID\
        "," SPACE CDS_DB_PROPERTY_MEDIA_TYPE\
        "," SPACE CDS_DB_PROPERTY_MODTIME\
        "," SPACE CDS_DB_PROPERTY_DC_DATE\
        "," SPACE CDS_DB_PROPERTY_PG_VALUE\
        "," SPACE CDS_DB_PROPERTY_FILEPATH\
        "," SPACE CDS_DB_PROPERTY_UPNP_CLASS\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE\
        "," SPACE CDS_DB_PROPERTY_DC_CREATOR\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM\
        "," SPACE CDS_DB_PROPERTY_UPNP_ARTIST\
        "," SPACE CDS_DB_PROPERTY_UPNP_GENRE\
        "," SPACE CDS_DB_PROPERTY_RESTRICTED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_MIMETYPE\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_HIGH\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW\
        "," SPACE CDS_DB_PROPERTY_ADD_DATE\
        "," SPACE CDS_DB_PROPERTY_LAST_PLAY_DATE\
        "," SPACE CDS_DB_PROPERTY_PLAY_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT\
        "," SPACE CDS_DB_PROPERTY_RES_AT_WIDTH\
        "," SPACE CDS_DB_PROPERTY_RES_AT_HEIGHT\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS\
        "," SPACE CDS_DB_PROPERTY_IMAGE_PROFILE\
        "," SPACE CDS_DB_PROPERTY_KEYWORDS\
        "," SPACE CDS_DB_PROPERTY_YEAR\
        "," SPACE CDS_DB_PROPERTY_MONTH\
        "," SPACE CDS_DB_PROPERTY_DAY\
        "," SPACE CDS_DB_PROPERTY_UPNP_RATING\
        ") "\
        "VALUES (%i, %i, %i, %i, %i, '%q', %i, %i, %i, %i, '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', %i, %i, %i, %i, %i, 0, 0, 0, 0, %i, %i, %i, %i, %i, '%q', %i, %i, %i, '%q');"

#define CDS_DB_INSERT_VIDEO_FULL_INTO_METADATA_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_METADATA_TABLE\
        "("\
            CDS_DB_PROPERTY_MEDIA_CLASS_TYPE\
        "," SPACE CDS_DB_PROPERTY_IS_CONTAINER\
        "," SPACE CDS_DB_PROPERTY_VALID_FLAG\
        "," SPACE CDS_DB_PROPERTY_SHARED_FLAG\
        "," SPACE CDS_DB_PROPERTY_PARENT_ID\
        "," SPACE CDS_DB_PROPERTY_STORAGE_DEVICE_ID\
        "," SPACE CDS_DB_PROPERTY_MEDIA_TYPE\
        "," SPACE CDS_DB_PROPERTY_MODTIME\
        "," SPACE CDS_DB_PROPERTY_DC_DATE\
        "," SPACE CDS_DB_PROPERTY_PG_VALUE\
        "," SPACE CDS_DB_PROPERTY_FILEPATH\
        "," SPACE CDS_DB_PROPERTY_UPNP_CLASS\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE\
        "," SPACE CDS_DB_PROPERTY_DC_CREATOR\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM\
        "," SPACE CDS_DB_PROPERTY_UPNP_ARTIST\
        "," SPACE CDS_DB_PROPERTY_UPNP_GENRE\
        "," SPACE CDS_DB_PROPERTY_RESTRICTED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_MIMETYPE\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_HIGH\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW\
        "," SPACE CDS_DB_PROPERTY_ADD_DATE\
        "," SPACE CDS_DB_PROPERTY_LAST_PLAY_DATE\
        "," SPACE CDS_DB_PROPERTY_PLAY_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT\
        "," SPACE CDS_DB_PROPERTY_UPNP_ORIGINAL_TRACKNO\
        "," SPACE CDS_DB_PROPERTY_RES_AT_DURATION\
        "," SPACE CDS_DB_PROPERTY_RES_AT_BITRATE\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SAMPLEFREQ\
        "," SPACE CDS_DB_PROPERTY_RES_AT_AUDIOCHANN\
        "," SPACE CDS_DB_PROPERTY_RES_AT_WIDTH\
        "," SPACE CDS_DB_PROPERTY_RES_AT_HEIGHT\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_HIGH\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_ORIGINAL\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_PROFILE\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_TN\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_IFOFLAG\
        "," SPACE CDS_DB_PROPERTY_YEAR\
        "," SPACE CDS_DB_PROPERTY_MONTH\
        "," SPACE CDS_DB_PROPERTY_DAY\
        "," SPACE CDS_DB_PROPERTY_UPNP_RATING\
        "," CDS_DB_PROPERTY_RES_AT_FPS\
        ") "\
        "VALUES (%i, %i, %i, %i, %i, '%q', %i, %i, %i, %i, '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', %i, %i, %i, %i, %i, 0, 0, 0, 0, '%q', '%q', %i, %i, %i, %i, %i, %i, %i,'%q', %i, '%q', %i, %i, %i, %i, %i, %i, '%q', %i);"

#define CDS_DB_INSERT_PLAYLIST_FULL_INTO_METADATA_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_METADATA_TABLE\
        "("\
            CDS_DB_PROPERTY_MEDIA_CLASS_TYPE\
        "," SPACE CDS_DB_PROPERTY_IS_CONTAINER\
        "," SPACE CDS_DB_PROPERTY_VALID_FLAG\
        "," SPACE CDS_DB_PROPERTY_SHARED_FLAG\
        "," SPACE CDS_DB_PROPERTY_PARENT_ID\
        "," SPACE CDS_DB_PROPERTY_STORAGE_DEVICE_ID\
        "," SPACE CDS_DB_PROPERTY_MEDIA_TYPE\
        "," SPACE CDS_DB_PROPERTY_MODTIME\
        "," SPACE CDS_DB_PROPERTY_DC_DATE\
        "," SPACE CDS_DB_PROPERTY_PG_VALUE\
        "," SPACE CDS_DB_PROPERTY_FILEPATH\
        "," SPACE CDS_DB_PROPERTY_UPNP_CLASS\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE\
        "," SPACE CDS_DB_PROPERTY_DC_CREATOR\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM\
        "," SPACE CDS_DB_PROPERTY_UPNP_ARTIST\
        "," SPACE CDS_DB_PROPERTY_UPNP_GENRE\
        "," SPACE CDS_DB_PROPERTY_RESTRICTED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_MIMETYPE\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_HIGH\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW\
        "," SPACE CDS_DB_PROPERTY_ADD_DATE\
        "," SPACE CDS_DB_PROPERTY_LAST_PLAY_DATE\
        "," SPACE CDS_DB_PROPERTY_PLAY_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS\
        ") "\
        "VALUES (%i, %i, %i, %i, %i, '%q', %i, %i, %i, %i, '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', %i, %i, %i, %i, %i, 0, 0, 0, 0, %i, %i);"


#ifdef DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION

#define CDS_DB_INSERT_CONTAINER_INTO_METADATA_TABLE_QUERY_VALUES\
  "?1, ?2, ?3, ?4, ?5, ?6, ?7, ?8, ?9, ?10, ?11, ?12, ?13, ?14, ?15, ?16, ?17, ?18, ?19, ?20, ?21, ?22, 0, 0, 0, 0, 0"

#else /* DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION */

#define CDS_DB_INSERT_CONTAINER_INTO_METADATA_TABLE_QUERY_VALUES\
  "%i, %i, %i, %i, %i, '%q', %i, %i, %i, %i, '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', %i, %i, %i, 0, 0, 0, 0, 0, '%q'"

#endif /* DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION */

#define CDS_DB_INSERT_CONTAINER_INTO_METADATA_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_METADATA_TABLE\
        "("\
            CDS_DB_PROPERTY_MEDIA_CLASS_TYPE\
        "," SPACE CDS_DB_PROPERTY_IS_CONTAINER\
        "," SPACE CDS_DB_PROPERTY_VALID_FLAG\
        "," SPACE CDS_DB_PROPERTY_SHARED_FLAG\
        "," SPACE CDS_DB_PROPERTY_PARENT_ID\
        "," SPACE CDS_DB_PROPERTY_STORAGE_DEVICE_ID\
        "," SPACE CDS_DB_PROPERTY_MEDIA_TYPE\
        "," SPACE CDS_DB_PROPERTY_MODTIME\
        "," SPACE CDS_DB_PROPERTY_DC_DATE\
        "," SPACE CDS_DB_PROPERTY_PG_VALUE\
        "," SPACE CDS_DB_PROPERTY_FILEPATH\
        "," SPACE CDS_DB_PROPERTY_UPNP_CLASS\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE\
        "," SPACE CDS_DB_PROPERTY_DC_CREATOR\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM\
        "," SPACE CDS_DB_PROPERTY_UPNP_ARTIST\
        "," SPACE CDS_DB_PROPERTY_UPNP_GENRE\
        "," SPACE CDS_DB_PROPERTY_RESTRICTED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_MIMETYPE\
        "," SPACE CDS_DB_PROPERTY_ADD_DATE\
        "," SPACE CDS_DB_PROPERTY_LAST_PLAY_DATE\
        "," SPACE CDS_DB_PROPERTY_PLAY_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_PLAYABLE_MEDIACOUNT\
        "," SPACE CDS_DB_PROPERTY_EXT_ID\
        ") "\
        "VALUES (" CDS_DB_INSERT_CONTAINER_INTO_METADATA_TABLE_QUERY_VALUES ");"

#define CDS_DB_INSERT_CONTAINER_INTO_METADATA_FULL_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_METADATA_TABLE\
        "("\
            CDS_DB_PROPERTY_MEDIA_CLASS_TYPE\
        "," SPACE CDS_DB_PROPERTY_IS_CONTAINER\
        "," SPACE CDS_DB_PROPERTY_VALID_FLAG\
        "," SPACE CDS_DB_PROPERTY_SHARED_FLAG\
        "," SPACE CDS_DB_PROPERTY_PARENT_ID\
        "," SPACE CDS_DB_PROPERTY_STORAGE_DEVICE_ID\
        "," SPACE CDS_DB_PROPERTY_MEDIA_TYPE\
        "," SPACE CDS_DB_PROPERTY_MODTIME\
        "," SPACE CDS_DB_PROPERTY_DC_DATE\
        "," SPACE CDS_DB_PROPERTY_PG_VALUE\
        "," SPACE CDS_DB_PROPERTY_FILEPATH\
        "," SPACE CDS_DB_PROPERTY_UPNP_CLASS\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE\
        "," SPACE CDS_DB_PROPERTY_DC_CREATOR\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM\
        "," SPACE CDS_DB_PROPERTY_UPNP_ARTIST\
        "," SPACE CDS_DB_PROPERTY_UPNP_GENRE\
        "," SPACE CDS_DB_PROPERTY_RESTRICTED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_MIMETYPE\
        "," SPACE CDS_DB_PROPERTY_ADD_DATE\
        "," SPACE CDS_DB_PROPERTY_LAST_PLAY_DATE\
        "," SPACE CDS_DB_PROPERTY_PLAY_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_PLAYABLE_MEDIACOUNT\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_ORIGINAL\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_PROFILE\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_TN\
        "," SPACE CDS_DB_PROPERTY_UPNP_CONTAINER_UPDATE_ID\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS\
        ") "\
        "VALUES (%i, %i, %i, %i, %i, '%q', %i, %i, %i, %i, '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', %i, %i, %i, 0, 0, 0, 0, 0, '%q', %i ,'%q', %i, %i, %i);"

#ifdef DEVELOPMENT_CONTENT_AGGREGATION

#define CDS_DB_DELETE_CA_ITEM_FROM_METADATA_TABLE_BY_MODTIME_AND_DEVICE_ID\
        "DELETE FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_MODTIME"!=%i"\
        " AND "\
        CDS_DB_PROPERTY_PARENT_ID"!=0"\
        " AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q';"

#define CDS_DB_DELETE_CA_ITEM_FROM_METADATA_TABLE \
        "DELETE FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_SHARED_FLAG"=0"\
        " AND "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"!=1;"

#define CDS_DB_INVALIDATE_CA_ITEM_FROM_METADATA_TABLE_BY_DEVICE_ID \
        "UPDATE "\
        CDS_DB_METADATA_TABLE\
        " SET "\
        CDS_DB_PROPERTY_VALID_FLAG"=0"\
        " WHERE "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q';"

#define CDS_DB_INSERT_CA_CONTAINER_INTO_METADATA_TABLE_QUERY\
    "INSERT INTO "\
    CDS_DB_METADATA_TABLE\
    "("\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE\
        "," SPACE CDS_DB_PROPERTY_VALID_FLAG\
        "," SPACE CDS_DB_PROPERTY_SHARED_FLAG\
        "," SPACE CDS_DB_PROPERTY_REMOTE_FLAG\
        "," SPACE CDS_DB_PROPERTY_PARENT_ID\
        "," SPACE CDS_DB_PROPERTY_STORAGE_DEVICE_ID\
        "," SPACE CDS_DB_PROPERTY_MEDIA_TYPE\
        "," SPACE CDS_DB_PROPERTY_MODTIME\
        "," SPACE CDS_DB_PROPERTY_DC_DATE\
        "," SPACE CDS_DB_PROPERTY_PG_VALUE\
        "," SPACE CDS_DB_PROPERTY_FILEPATH\
        "," SPACE CDS_DB_PROPERTY_UPNP_CLASS\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE\
        "," SPACE CDS_DB_PROPERTY_DC_CREATOR\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM\
        "," SPACE CDS_DB_PROPERTY_UPNP_ARTIST\
        "," SPACE CDS_DB_PROPERTY_UPNP_GENRE\
        "," SPACE CDS_DB_PROPERTY_RESTRICTED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_MIMETYPE\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_HIGH\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_ORIGINAL\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_PROFILE\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS\
        "," SPACE CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT\
        ") "\
        "VALUES (%i, %i, %i, %i, %i, '%q', %i, %i, %i, %i, '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', %i, %i, '%q', %i, %i, %i, %i);"

#define CDS_DB_INSERT_CA_IMAGE_INTO_METADATA_TABLE_QUERY\
    "INSERT INTO "\
    CDS_DB_METADATA_TABLE\
    "("\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE\
        "," SPACE CDS_DB_PROPERTY_UPNP_ITEM_URI\
        "," SPACE CDS_DB_PROPERTY_VALID_FLAG\
        "," SPACE CDS_DB_PROPERTY_SHARED_FLAG\
        "," SPACE CDS_DB_PROPERTY_REMOTE_FLAG\
        "," SPACE CDS_DB_PROPERTY_PARENT_ID\
        "," SPACE CDS_DB_PROPERTY_STORAGE_DEVICE_ID\
        "," SPACE CDS_DB_PROPERTY_MEDIA_TYPE\
        "," SPACE CDS_DB_PROPERTY_MODTIME\
        "," SPACE CDS_DB_PROPERTY_DC_DATE\
        "," SPACE CDS_DB_PROPERTY_PG_VALUE\
        "," SPACE CDS_DB_PROPERTY_FILEPATH\
        "," SPACE CDS_DB_PROPERTY_UPNP_CLASS\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE\
        "," SPACE CDS_DB_PROPERTY_DC_CREATOR\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM\
        "," SPACE CDS_DB_PROPERTY_UPNP_ARTIST\
        "," SPACE CDS_DB_PROPERTY_UPNP_GENRE\
        "," SPACE CDS_DB_PROPERTY_RESTRICTED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_MIMETYPE\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_HIGH\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW\
        "," SPACE CDS_DB_PROPERTY_RES_AT_WIDTH\
        "," SPACE CDS_DB_PROPERTY_RES_AT_HEIGHT\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS\
        "," SPACE CDS_DB_PROPERTY_IMAGE_PROFILE\
        "," SPACE CDS_DB_PROPERTY_REF_ID\
        "," SPACE CDS_DB_PROPERTY_YEAR\
        "," SPACE CDS_DB_PROPERTY_MONTH\
        "," SPACE CDS_DB_PROPERTY_DAY\
        ") "\
        "VALUES (%i, '%q', %i, %i, %i, %i, '%q', %i, %i, %i, %i, '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', %i, %i, %i, %i, %i, %i, %i, '%q', %i, %i, %i);"

#define CDS_DB_INSERT_CA_AUDIO_INTO_METADATA_TABLE_QUERY\
    "INSERT INTO "\
    CDS_DB_METADATA_TABLE\
    "("\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE\
        "," SPACE CDS_DB_PROPERTY_UPNP_ITEM_URI\
        "," SPACE CDS_DB_PROPERTY_VALID_FLAG\
        "," SPACE CDS_DB_PROPERTY_SHARED_FLAG\
        "," SPACE CDS_DB_PROPERTY_REMOTE_FLAG\
        "," SPACE CDS_DB_PROPERTY_PARENT_ID\
        "," SPACE CDS_DB_PROPERTY_STORAGE_DEVICE_ID\
        "," SPACE CDS_DB_PROPERTY_MEDIA_TYPE\
        "," SPACE CDS_DB_PROPERTY_MODTIME\
        "," SPACE CDS_DB_PROPERTY_DC_DATE\
        "," SPACE CDS_DB_PROPERTY_PG_VALUE\
        "," SPACE CDS_DB_PROPERTY_FILEPATH\
        "," SPACE CDS_DB_PROPERTY_UPNP_CLASS\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE\
        "," SPACE CDS_DB_PROPERTY_DC_CREATOR\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM\
        "," SPACE CDS_DB_PROPERTY_UPNP_ARTIST\
        "," SPACE CDS_DB_PROPERTY_UPNP_GENRE\
        "," SPACE CDS_DB_PROPERTY_RESTRICTED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_MIMETYPE\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_HIGH\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW\
        "," SPACE CDS_DB_PROPERTY_UPNP_ORIGINAL_TRACKNO\
        "," SPACE CDS_DB_PROPERTY_RES_AT_DURATION\
        "," SPACE CDS_DB_PROPERTY_RES_AT_BITRATE\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SAMPLEFREQ\
        "," SPACE CDS_DB_PROPERTY_RES_AT_AUDIOCHANN\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_ORIGINAL\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_PROFILE\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS\
        "," SPACE CDS_DB_PROPERTY_REF_ID\
        "," SPACE CDS_DB_PROPERTY_YEAR\
        "," SPACE CDS_DB_PROPERTY_MONTH\
        "," SPACE CDS_DB_PROPERTY_DAY\
        "," SPACE CDS_DB_PROPERTY_ARTIST_INDEX\
        ") "\
        "VALUES (%i, '%q', %i, %i, %i, %i, '%q', %i, %i, %i, %i, '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', %i, %i, '%q', '%q', %i, %i, %i, '%q', %i, %i, %i, '%q', %i, %i, %i, '%q');"

#define CDS_DB_INSERT_CA_VIDEO_INTO_METADATA_TABLE_QUERY\
    "INSERT INTO "\
    CDS_DB_METADATA_TABLE\
    "("\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE\
        "," SPACE CDS_DB_PROPERTY_UPNP_ITEM_URI\
        "," SPACE CDS_DB_PROPERTY_VALID_FLAG\
        "," SPACE CDS_DB_PROPERTY_SHARED_FLAG\
        "," SPACE CDS_DB_PROPERTY_REMOTE_FLAG\
        "," SPACE CDS_DB_PROPERTY_PARENT_ID\
        "," SPACE CDS_DB_PROPERTY_STORAGE_DEVICE_ID\
        "," SPACE CDS_DB_PROPERTY_MEDIA_TYPE\
        "," SPACE CDS_DB_PROPERTY_MODTIME\
        "," SPACE CDS_DB_PROPERTY_DC_DATE\
        "," SPACE CDS_DB_PROPERTY_PG_VALUE\
        "," SPACE CDS_DB_PROPERTY_FILEPATH\
        "," SPACE CDS_DB_PROPERTY_UPNP_CLASS\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE\
        "," SPACE CDS_DB_PROPERTY_DC_CREATOR\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM\
        "," SPACE CDS_DB_PROPERTY_UPNP_ARTIST\
        "," SPACE CDS_DB_PROPERTY_UPNP_GENRE\
        "," SPACE CDS_DB_PROPERTY_RESTRICTED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_MIMETYPE\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_HIGH\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW\
        "," SPACE CDS_DB_PROPERTY_UPNP_ORIGINAL_TRACKNO\
        "," SPACE CDS_DB_PROPERTY_RES_AT_DURATION\
        "," SPACE CDS_DB_PROPERTY_RES_AT_BITRATE\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SAMPLEFREQ\
        "," SPACE CDS_DB_PROPERTY_RES_AT_AUDIOCHANN\
        "," SPACE CDS_DB_PROPERTY_RES_AT_WIDTH\
        "," SPACE CDS_DB_PROPERTY_RES_AT_HEIGHT\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_IFOFLAG\
        "," SPACE CDS_DB_PROPERTY_REF_ID\
        "," SPACE CDS_DB_PROPERTY_YEAR\
        "," SPACE CDS_DB_PROPERTY_MONTH\
        "," SPACE CDS_DB_PROPERTY_DAY\
        ") "\
        "VALUES (%i, '%q', %i, %i, %i, %i, '%q', %i, %i, %i, %i, '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', %i, %i, '%q', '%q', %i, %i, %i, %i, %i, %i, %i, %i, '%q', %i, %i, %i);"


#define CDS_DB_INSERT_CA_DOCUMENT_INTO_METADATA_TABLE_QUERY\
    "INSERT INTO "\
    CDS_DB_METADATA_TABLE\
    "("\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE\
        "," SPACE CDS_DB_PROPERTY_UPNP_ITEM_URI\
        "," SPACE CDS_DB_PROPERTY_VALID_FLAG\
        "," SPACE CDS_DB_PROPERTY_SHARED_FLAG\
        "," SPACE CDS_DB_PROPERTY_REMOTE_FLAG\
        "," SPACE CDS_DB_PROPERTY_PARENT_ID\
        "," SPACE CDS_DB_PROPERTY_STORAGE_DEVICE_ID\
        "," SPACE CDS_DB_PROPERTY_MEDIA_TYPE\
        "," SPACE CDS_DB_PROPERTY_MODTIME\
        "," SPACE CDS_DB_PROPERTY_DC_DATE\
        "," SPACE CDS_DB_PROPERTY_PG_VALUE\
        "," SPACE CDS_DB_PROPERTY_FILEPATH\
        "," SPACE CDS_DB_PROPERTY_UPNP_CLASS\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE\
        "," SPACE CDS_DB_PROPERTY_DC_CREATOR\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM\
        "," SPACE CDS_DB_PROPERTY_UPNP_ARTIST\
        "," SPACE CDS_DB_PROPERTY_UPNP_GENRE\
        "," SPACE CDS_DB_PROPERTY_RESTRICTED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_MIMETYPE\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_HIGH\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW\
        "," SPACE CDS_DB_PROPERTY_UPNP_ORIGINAL_TRACKNO\
        "," SPACE CDS_DB_PROPERTY_RES_AT_DURATION\
        "," SPACE CDS_DB_PROPERTY_RES_AT_BITRATE\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SAMPLEFREQ\
        "," SPACE CDS_DB_PROPERTY_RES_AT_AUDIOCHANN\
        "," SPACE CDS_DB_PROPERTY_RES_AT_WIDTH\
        "," SPACE CDS_DB_PROPERTY_RES_AT_HEIGHT\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_IFOFLAG\
        "," SPACE CDS_DB_PROPERTY_REF_ID\
        "," SPACE CDS_DB_PROPERTY_YEAR\
        "," SPACE CDS_DB_PROPERTY_MONTH\
        "," SPACE CDS_DB_PROPERTY_DAY\
        ") "\
        "VALUES (%i, '%q', %i, %i, %i, %i, '%q', %i, %i, %i, %i, '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', '%q', %i, %i, '%q', '%q', %i, %i, %i, %i, %i, %i, %i, %i, '%q', %i, %i, %i);"
#endif /* DEVELOPMENT_CONTENT_AGGREGATION */

#define CDS_DB_INSERT_INTO_REFERENCE_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_REFERENCE_TABLE\
        "("\
            CDS_DB_PROPERTY_REFERENCE_MEDIA_ID\
        "," SPACE CDS_DB_PROPERTY_REFERENCE_TYPE\
        "," SPACE CDS_DB_PROPERTY_REFERENCE_FILEPATH\
        "," SPACE CDS_DB_PROPERTY_REFERENCE_DC_TITLE\
        "," SPACE CDS_DB_PROPERTY_REFERENCE_RES_AT_WIDTH\
        "," SPACE CDS_DB_PROPERTY_REFERENCE_RES_AT_HEIGHT\
        "," SPACE CDS_DB_PROPERTY_REFERENCE_RES_AT_SIZE_HIGH\
        "," SPACE CDS_DB_PROPERTY_REFERENCE_RES_AT_SIZE_LOW\
        "," SPACE CDS_DB_PROPERTY_REFERENCE_RES_AT_PINFO\
        "," SPACE CDS_DB_PROPERTY_REFERENCE_PROFILE\
        "," SPACE CDS_DB_PROPERTY_REFERENCE_SCALETYPE\
        "," SPACE CDS_DB_PROPERTY_REFERENCE_PERMILLAGE\
         ") "\
        "VALUES (%i, %i, '%q', '%q', %i, %i, %i, %i, '%q', %i, %i, %i);"

#define CDS_DB_INSERT_INTO_SUBTITLE_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_SUBTITLE_TABLE\
        "("\
            CDS_DB_PROPERTY_SUBTITLE_VIDEOID\
        "," SPACE CDS_DB_PROPERTY_SUBTITLE_FOLDER_ID\
        "," SPACE CDS_DB_PROPERTY_SUBTITLE_TYPE\
        "," SPACE CDS_DB_PROPERTY_SUBTITLE_TITLE\
        "," SPACE CDS_DB_PROPERTY_SUBTITLE_LANGUAGE\
        "," SPACE CDS_DB_PROPERTY_SUBTITLE_FILEPATH\
        "," SPACE CDS_DB_PROPERTY_SUBTITLE_STREAMNUMBER\
         ") "\
        "VALUES (%i, %i, %i, '%q', '%q', '%q', %i);"

#ifdef DEVELOPMENT_ENABLE_CVP_SERVER_PLAYSPEED
#define CDS_DB_INSERT_INTO_SCALEDFILE_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_SCALEDFILE_TABLE\
        "("\
        		CDS_DB_PROPERTY_SCALEDFILE_METADATA_ID\
        "," SPACE CDS_DB_PROPERTY_SCALEDFILE_PLAYSPEED\
        "," SPACE CDS_DB_PROPERTY_SCALEDFILE_FILEPATH\
         ") "\
        "VALUES (%i, '%q', '%q');"
#endif /* DEVELOPMENT_ENABLE_CVP_SERVER_PLAYSPEED */

#define CDS_DB_RESET_VIDEO_ID_IN_SUBTITLE_TABLE_BY_VIDEO_ID_QUERY\
        "UPDATE "\
        CDS_DB_SUBTITLE_TABLE\
        " SET "\
        CDS_DB_PROPERTY_SUBTITLE_VIDEOID"=0"\
        " WHERE "\
        CDS_DB_PROPERTY_SUBTITLE_VIDEOID"=%i;"


#define CDS_DB_DELETE_EMBEDED_FROM_SUBTITLE_TABLE_BY_VIDEO_ID_QUERY\
        "DELETE FROM "\
        CDS_DB_SUBTITLE_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_SUBTITLE_VIDEOID"=%i"\
        " AND "\
        CDS_DB_PROPERTY_SUBTITLE_TYPE"=%i;"


#define CDS_DB_INSERT_INTO_USER_METADATA_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_USER_METADATA_TABLE\
        "("\
            CDS_DB_PROPERTY_USERMETA_METADATA_ID\
        "," SPACE CDS_DB_PROPERTY_USERMETA_NAME\
        "," SPACE CDS_DB_PROPERTY_USERMETA_VALUE\
         ") "\
        "VALUES (%i, '%q', '%q');"



#ifdef DEVELOPMENT_ENABLE_USER_AGENT_CUSTOMIZATION_SONY_BRAVIA_PROFILING

#define CDS_DB_INSERT_INTO_PROTOCOL_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_PROTOCOL_TABLE\
        "("\
            CDS_DB_PROPERTY_PROTOCOL_METADATA_ID\
        "," SPACE CDS_DB_PROPERTY_PROTOCOL_PINFO\
        "," SPACE CDS_DB_PROPERTY_PROTOCOL_PINFO_RELAXED\
         ") "\
        "VALUES (%i, '%q', '%q');"

#else /* DEVELOPMENT_ENABLE_USER_AGENT_CUSTOMIZATION_SONY_BRAVIA_PROFILING */

#define CDS_DB_INSERT_INTO_PROTOCOL_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_PROTOCOL_TABLE\
        "("\
            CDS_DB_PROPERTY_PROTOCOL_METADATA_ID\
        "," SPACE CDS_DB_PROPERTY_PROTOCOL_PINFO\
        "," SPACE CDS_DB_PROPERTY_PROTOCOL_PINFO_RELAXED\
         ") "\
        "VALUES (%i, '%q', '(NULL)');"

#endif /* DEVELOPMENT_ENABLE_USER_AGENT_CUSTOMIZATION_SONY_BRAVIA_PROFILING */

#define CDS_DB_INSERT_INTO_RESOURCE_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_RESOURCE_TABLE\
        "("\
            CDS_DB_PROPERTY_RESOURCE_METADATA_ID\
        "," SPACE CDS_DB_PROPERTY_RESOURCE_TYPE\
        "," SPACE CDS_DB_PROPERTY_RESOURCE_FILEPATH\
        "," SPACE CDS_DB_PROPERTY_RESOURCE_URI\
        "," SPACE CDS_DB_PROPERTY_RESOURCE_WIDTH\
        "," SPACE CDS_DB_PROPERTY_RESOURCE_HEIGHT\
        "," SPACE CDS_DB_PROPERTY_RESOURCE_SIZE_HIGH\
        "," SPACE CDS_DB_PROPERTY_RESOURCE_SIZE_LOW\
        "," SPACE CDS_DB_PROPERTY_RESOURCE_DURATION\
        "," SPACE CDS_DB_PROPERTY_RESOURCE_BITRATE\
        "," SPACE CDS_DB_PROPERTY_RESOURCE_SAMPLEFREQ\
        "," SPACE CDS_DB_PROPERTY_RESOURCE_AUDIOCHANN\
        "," SPACE CDS_DB_PROPERTY_RESOURCE_PINFO\
         ") "\
        "VALUES (%i, %i, '%q', '%q', %i, %i, %i, %i, '%q', %i, %i, %i, '%q');"

#define CDS_DB_INSERT_INTO_OBJECT_RIGHTS_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_OBJECT_RIGHTS_TABLE\
        "("\
        		CDS_DB_PROPERTY_OBJRIGHT_METADATA_ID\
        		"," SPACE CDS_DB_PROPERTY_OBJRIGHT_IS_DRM_PROTECT\
        		"," SPACE CDS_DB_PROPERTY_OBJRIGHT_ALLOW_DTCP_PROTECT\
        		"," SPACE CDS_DB_PROPERTY_OBJRIGHT_SUBSCRIPTION_TIME\
        		"," SPACE CDS_DB_PROPERTY_OBJRIGHT_CCI\
        		"," SPACE CDS_DB_PROPERTY_OBJRIGHT_RETENTION_TIME\
        		"," SPACE CDS_DB_PROPERTY_OBJRIGHT_CONCURENT_VIEW\
        		"," SPACE CDS_DB_PROPERTY_OBJRIGHT_PLAYCOUNT\
        		"," SPACE CDS_DB_PROPERTY_OBJRIGHT_ALLOW_DISTRIBUTION\
        		"," SPACE CDS_DB_PROPERTY_OBJRIGHT_NO_DEVICES_ACCESSED\
        		"," SPACE CDS_DB_PROPERTY_OBJRIGHT_NO_DEVICES_ALLOWED\
        		") "\
        		"VALUES (%i, %i, %i, %i, %i, %i, %i, %i, %i, %i, %i);"

#define CDS_DB_UPDATE_OBJECT_RIGHTS_TABLE_QUERY\
        "UPDATE "\
        CDS_DB_OBJECT_RIGHTS_TABLE\
        " SET "\
        CDS_DB_PROPERTY_OBJRIGHT_IS_DRM_PROTECT"='%i'"\
        "," SPACE CDS_DB_PROPERTY_OBJRIGHT_ALLOW_DTCP_PROTECT"='%i'"\
        "," SPACE CDS_DB_PROPERTY_OBJRIGHT_SUBSCRIPTION_TIME"='%i'"\
        "," SPACE CDS_DB_PROPERTY_OBJRIGHT_CCI"='%i'"\
        "," SPACE CDS_DB_PROPERTY_OBJRIGHT_RETENTION_TIME"=%i"\
        "," SPACE CDS_DB_PROPERTY_OBJRIGHT_CONCURENT_VIEW"='%i'"\
        "," SPACE CDS_DB_PROPERTY_OBJRIGHT_PLAYCOUNT"=%i"\
        "," SPACE CDS_DB_PROPERTY_OBJRIGHT_ALLOW_DISTRIBUTION"=%i"\
        "," SPACE CDS_DB_PROPERTY_OBJRIGHT_NO_DEVICES_ACCESSED"=%i"\
        "," SPACE CDS_DB_PROPERTY_OBJRIGHT_NO_DEVICES_ALLOWED"=%i"\
        " WHERE "\
        CDS_DB_PROPERTY_OBJRIGHT_METADATA_ID\
        "=%i;"

#define CDS_DB_GET_FROM_OBJECT_RIGHTS_TABLE_QUERY "SELECT * FROM "\
		CDS_DB_OBJECT_RIGHTS_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_OBJRIGHT_METADATA_ID\
        "=%i"

#define CDS_DB_INSERT_AUDIO_COMMENT_AND_YEAR_INTO_EXTENDED_METADATA_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_EXTENDED_METADATA_TABLE\
        "("\
			CDS_DB_PROPERTY_EXTMETA_METADATA_ID\
		"," SPACE CDS_DB_PROPERTY_EXTMETA_AUDIO_COMMENT\
		"," SPACE CDS_DB_PROPERTY_EXTMETA_AUDIO_YEAR\
         ") "\
        "VALUES (%i, '%q', %i);"

#ifdef HAVE_DTCP
#define CDS_DB_INSERT_DRM_INTO_EXTENDED_METADATA_TABLE_QUERY\
        "INSERT INTO "\
         CDS_DB_EXTENDED_METADATA_TABLE\
        "("\
            CDS_DB_PROPERTY_EXTMETA_METADATA_ID\
            "," SPACE CDS_DB_PROPERTY_DRM_TYPE\
            "," SPACE CDS_DB_PROPERTY_DRM_MODE\
            "," SPACE CDS_DB_PROPERTY_DRM_RETENSION\
            "," SPACE CDS_DB_PROPERTY_DRM_APS\
            "," SPACE CDS_DB_PROPERTY_DRM_ICT\
            "," SPACE CDS_DB_PROPERTY_DRM_EPN\
            "," SPACE CDS_DB_PROPERTY_DRM_CCI\
            "," SPACE CDS_DB_PROPERTY_DRM_PCPENCRYPTED_SIZE_LOW\
            "," SPACE CDS_DB_PROPERTY_DRM_PCPENCRYPTED_SIZE_HIGH\
            "," SPACE CDS_DB_PROPERTY_DRM_VALID\
        ") "\
        "VALUES (%i, %i, %i, %i, %i, %i, %i, %i, %i, %i, %i);"

#define CDS_DB_UPDATE_DRM_INFO_EXTENDEND_METADATA_QUERY\
        "UPDATE "\
        CDS_DB_EXTENDED_METADATA_TABLE\
        " SET "\
        CDS_DB_PROPERTY_DRM_TYPE"=%i"\
        "," SPACE CDS_DB_PROPERTY_DRM_MODE"=%i"\
        "," SPACE CDS_DB_PROPERTY_DRM_RETENSION"=%i"\
        "," SPACE CDS_DB_PROPERTY_DRM_APS"=%i"\
        "," SPACE CDS_DB_PROPERTY_DRM_ICT"=%i"\
        "," SPACE CDS_DB_PROPERTY_DRM_EPN"=%i"\
        "," SPACE CDS_DB_PROPERTY_DRM_CCI"=%i"\
        "," SPACE CDS_DB_PROPERTY_DRM_PCPENCRYPTED_SIZE_LOW"=%i"\
        "," SPACE CDS_DB_PROPERTY_DRM_PCPENCRYPTED_SIZE_HIGH"=%i"\
        " WHERE "\
        CDS_DB_PROPERTY_EXTMETA_METADATA_ID"=%i"\
        " AND "\
        CDS_DB_PROPERTY_DRM_VALID"=1;"

#define CDS_DB_INSERT_DTCP_INFO_INTO_EXTENDED_METADATA_TABLE_QUERY\
        "INSERT INTO "\
         CDS_DB_EXTENDED_METADATA_TABLE\
        "("\
            CDS_DB_PROPERTY_EXTMETA_METADATA_ID\
            "," SPACE CDS_DB_PROPERTY_DRM_TYPE\
            "," SPACE CDS_DB_PROPERTY_DRM_CCI\
            "," SPACE CDS_DB_PROPERTY_DRM_VALID\
        ") "\
        "VALUES (%i, %i, %i, %i);"

#define CDS_DB_UPDATE_DTCP_INFO_EXTENDED_METADATA_QUERY\
        "UPDATE "\
        CDS_DB_EXTENDED_METADATA_TABLE\
        " SET "\
        CDS_DB_PROPERTY_DRM_TYPE"=%i"\
        "," SPACE CDS_DB_PROPERTY_DRM_CCI"=%i"\
        " WHERE "\
        CDS_DB_PROPERTY_EXTMETA_METADATA_ID"=%i"\
        " AND "\
        CDS_DB_PROPERTY_DRM_VALID"=1;"

#endif /*HAVE_DTCP*/

#define CDS_DB_INSERT_DRM_PROTECTED_INTO_EXTENDED_METADATA_TABLE_QUERY\
        "INSERT INTO "\
         CDS_DB_EXTENDED_METADATA_TABLE\
        "("\
            CDS_DB_PROPERTY_EXTMETA_METADATA_ID\
            "," SPACE CDS_DB_PROPERTY_DRM_PROTECTED\
            "," SPACE CDS_DB_PROPERTY_DRM_VALID\
        ") "\
        "VALUES (%i, %i, %i);"

#ifdef DEVELOPMENT_ENABLE_ADS
#define CDS_DB_INSERT_INTO_MPD_SEGMENTS_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_MPD_SEGMENTS_TABLE\
        "("\
        	CDS_DB_PROPERTY_MPD_SEGMENTS_MPD_ID\
        "," SPACE CDS_DB_PROPERTY_MPD_SEGMENTS_FILEPATH\
        ") "\
        "VALUES (%i, '%q');"

#define CDS_DB_GET_FROM_MPD_SEGMENTS_TABLE_QUERY\
        "SELECT * FROM "\
        CDS_DB_MPD_SEGMENTS_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_MPD_SEGMENTS_FILEPATH\
        "='%q';"
#endif /* DEVELOPMENT_ENABLE_ADS */

#define CDS_DB_UPDATE_DRM_PROTECTED_EXTENDEND_METADATA_QUERY\
        "UPDATE "\
        CDS_DB_EXTENDED_METADATA_TABLE\
        " SET "\
        CDS_DB_PROPERTY_DRM_PROTECTED"=%i"\
        " WHERE "\
        CDS_DB_PROPERTY_EXTMETA_METADATA_ID"=%i"\
        " AND "\
        CDS_DB_PROPERTY_DRM_VALID"=1;"

#define CDS_DB_UPDATE_CONTAINER_METADATA_QUERY\
        "UPDATE "\
        CDS_DB_METADATA_TABLE\
        " SET "\
            CDS_DB_PROPERTY_DC_TITLE"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DC_CREATOR"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_ORIGINAL"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_PROFILE"=%i"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_TN"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_CONTAINER_UPDATE_ID"=%i"\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED"=%i"\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS"=%i"\
        " WHERE "\
        CDS_DB_PROPERTY_ID\
        "=%i;"

#define CDS_DB_UPDATE_CONTAINER_UPDATE_ID_QUERY\
        "UPDATE "\
        CDS_DB_METADATA_TABLE\
        " SET "\
            CDS_DB_PROPERTY_UPNP_CONTAINER_UPDATE_ID"='%i'"\
        " WHERE "\
        CDS_DB_PROPERTY_ID\
        "=%i;"


#define CDS_DB_UPLOADED_CONTAINER_METADATA_UPDATE_QUERY\
        "UPDATE "\
        CDS_DB_METADATA_TABLE\
        " SET "\
            CDS_DB_PROPERTY_DC_TITLE"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DC_CREATOR"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_ORIGINAL"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_PROFILE"=%i"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_TN"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED"=%i"\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS"=%i"\
        "," SPACE CDS_DB_PROPERTY_RESTRICTED"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DC_DATE"=%i"\
        " WHERE "\
        CDS_DB_PROPERTY_ID\
        "=%i;"

#define CDS_DB_UPDATE_IMAGE_METADATA_QUERY\
        "UPDATE "\
        CDS_DB_METADATA_TABLE\
        " SET "\
            CDS_DB_PROPERTY_DC_CREATOR"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DC_DATE"=%i"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM"='%q'"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_WIDTH"=%i"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_HEIGHT"=%i"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_HIGH"=%i"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW"=%i"\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED"=%i"\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS"=%i"\
        "," SPACE CDS_DB_PROPERTY_IMAGE_PROFILE"=%i"\
        "," SPACE CDS_DB_PROPERTY_KEYWORDS"='%q'"\
        "," SPACE CDS_DB_PROPERTY_YEAR"=%i"\
        "," SPACE CDS_DB_PROPERTY_MONTH"=%i"\
        "," SPACE CDS_DB_PROPERTY_DAY"=%i"\
        "," SPACE CDS_DB_PROPERTY_UPNP_RATING"='%q'"\
        " WHERE "\
        CDS_DB_PROPERTY_ID\
        "=%i;"

#define CDS_DB_UPDATE_DOCUMENT_METADATA_QUERY\
        "UPDATE "\
        CDS_DB_METADATA_TABLE\
        " SET "\
            CDS_DB_PROPERTY_DC_CREATOR"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DC_DATE"=%i"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_HIGH"=%i"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW"=%i"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED"=%i"\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS"=%i"\
        "," SPACE CDS_DB_PROPERTY_YEAR"=%i"\
        "," SPACE CDS_DB_PROPERTY_MONTH"=%i"\
        "," SPACE CDS_DB_PROPERTY_DAY"=%i"\
        "," SPACE CDS_DB_PROPERTY_UPNP_RATING"='%q'"\
        " WHERE "\
        CDS_DB_PROPERTY_ID\
        "=%i;"

#define CDS_DB_UPDATE_AUDIO_METADATA_QUERY\
        "UPDATE "\
        CDS_DB_METADATA_TABLE\
        " SET "\
            CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i"\
        "," SPACE CDS_DB_PROPERTY_MEDIA_TYPE"=%i"\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_MIMETYPE"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DC_CREATOR"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DC_DATE"=%i"\
        "," SPACE CDS_DB_PROPERTY_UPNP_CLASS"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ARTIST"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_GENRE"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ORIGINAL_TRACKNO"='%q'"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_DURATION"='%q'"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_BITRATE"=%i"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SAMPLEFREQ"=%i"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_AUDIOCHANN"=%i"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_HIGH"=%i"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW"=%i"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_ORIGINAL"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_PROFILE"=%i"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_TN"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED"=%i"\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS"=%i"\
        "," SPACE CDS_DB_PROPERTY_COMPOSER"='%q'"\
        "," SPACE CDS_DB_PROPERTY_ARTIST_INDEX"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_RATING"='%q'"\
        " WHERE "\
        CDS_DB_PROPERTY_ID\
        "=%i;"

#define CDS_DB_UPDATE_VIDEO_METADATA_QUERY\
        "UPDATE "\
        CDS_DB_METADATA_TABLE\
        " SET "\
            CDS_DB_PROPERTY_DC_CREATOR"='%q'"\
        "," SPACE CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i"\
        "," SPACE CDS_DB_PROPERTY_MEDIA_TYPE"=%i"\
        "," SPACE CDS_DB_PROPERTY_UPNP_CLASS"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DC_DATE"=%i"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ARTIST"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_GENRE"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ORIGINAL_TRACKNO"='%q'"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_DURATION"='%q'"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_BITRATE"=%i"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SAMPLEFREQ"=%i"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_AUDIOCHANN"=%i"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_WIDTH"=%i"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_HEIGHT"=%i"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_HIGH"=%i"\
        "," SPACE CDS_DB_PROPERTY_RES_AT_SIZE_LOW"=%i"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_ORIGINAL"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_PROFILE"=%i"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUMARTURI_TN"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED"=%i"\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS"=%i"\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_IFOFLAG"=%i"\
        "," SPACE CDS_DB_PROPERTY_YEAR"=%i"\
        "," SPACE CDS_DB_PROPERTY_MONTH"=%i"\
        "," SPACE CDS_DB_PROPERTY_DAY"=%i"\
        "," SPACE CDS_DB_PROPERTY_UPNP_RATING"='%q'"\
        "," CDS_DB_PROPERTY_RES_AT_FPS"=%i"\
        " WHERE "\
        CDS_DB_PROPERTY_ID\
        "=%i;"

#define CDS_DB_UPDATE_PLAYLIST_METADATA_QUERY\
        "UPDATE "\
        CDS_DB_METADATA_TABLE\
        " SET "\
            CDS_DB_PROPERTY_DC_CREATOR"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DC_TITLE"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DC_DATE"=%i"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ALBUM"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_ARTIST"='%q'"\
        "," SPACE CDS_DB_PROPERTY_UPNP_GENRE"='%q'"\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_DLNAMANAGED"=%i"\
        "," SPACE CDS_DB_PROPERTY_DLNAORG_FLAGS"=%i"\
        " WHERE "\
        CDS_DB_PROPERTY_ID\
        "=%i;"

#ifdef DEVELOPMENT_ENABLE_USER_AGENT_CUSTOMIZATION_SONY_BRAVIA_PROFILING
#define CDS_DB_GET_PROTOCOL_RELAXED_BY_ID_QUERY\
        "SELECT "\
        CDS_DB_PROPERTY_PROTOCOL_PINFO_RELAXED\
        " FROM "\
        CDS_DB_PROTOCOL_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_PROTOCOL_METADATA_ID\
        "=%i;"
#endif /* DEVELOPMENT_ENABLE_USER_AGENT_CUSTOMIZATION_SONY_BRAVIA_PROFILING */

#define CDS_DB_GET_PROTOCOL_BY_ID_QUERY\
        "SELECT "\
        CDS_DB_PROPERTY_PROTOCOL_PINFO\
        " FROM "\
        CDS_DB_PROTOCOL_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_PROTOCOL_METADATA_ID\
        "=%i;"

#define CDS_DB_GET_ID_PROTOCOL_BY_ID_QUERY\
        "SELECT * FROM "\
        CDS_DB_PROTOCOL_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_PROTOCOL_METADATA_ID\
        "=%i;"

#define CDS_DB_GET_RESOURCE_BY_ID_QUERY\
        "SELECT * FROM "\
        CDS_DB_RESOURCE_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_RESOURCE_METADATA_ID\
        "=%i;"

#define CDS_DB_GET_MIME_TYPE_BY_ID_QUERY\
        "SELECT "\
        CDS_DB_PROPERTY_DLNAORG_MIMETYPE\
        " FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_ID\
        "=%i;"

#define CDS_DB_UPDATE_PROTOCOL_QUERY\
        "UPDATE "\
        CDS_DB_PROTOCOL_TABLE\
        " SET "\
        CDS_DB_PROPERTY_PROTOCOL_PINFO"='%q'"\
        " WHERE "\
        CDS_DB_PROPERTY_PROTOCOL_ID\
        "=%i;"

#define CDS_DB_DELETE_PROTOCOL_QUERY\
        "DELETE FROM "\
        CDS_DB_PROTOCOL_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_PROTOCOL_METADATA_ID\
        "=%i;"


#ifdef DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER

#define CDS_DB_DELETE_PLAYLIST_MAP_QUERY\
        "DELETE FROM "\
        CDS_DB_PLAYLIST_MAP_TABLE\
        ";"

#define CDS_DB_DELETE_ENTRY_PLAYLIST_MAP_QUERY\
        "DELETE FROM "\
        CDS_DB_PLAYLIST_MAP_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID\
        "=%i;"

#define CDS_DB_RESET_PLAYLIST_MAP_SEQUENCE_QUERY\
        "UPDATE sqlite_sequence SET seq=1 WHERE name = '"\
        CDS_DB_PLAYLIST_MAP_TABLE\
        "';"

#endif /* DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER */


#define CDS_DB_UPDATE_INTEGER_TYPE_METADATA_PROPERTY_BY_INT_PROPERTY\
        "UPDATE "\
        CDS_DB_METADATA_TABLE\
        " SET "\
        "%q=%i WHERE "\
        "%q=%i;"

#define CDS_DB_UPDATE_INTEGER_TYPE_METADATA_PROPERTY_BY_TEXT_PROPERTY\
        "UPDATE "\
        CDS_DB_METADATA_TABLE\
        " SET "\
        "%q=%i WHERE "\
        "%q LIKE '%q';"

#define CDS_DB_UPDATE_INTEGER_TYPE_METADATA_PROPERTY_FOR_ALL\
       "UPDATE" \
       SPACE CDS_DB_METADATA_TABLE \
       SPACE "SET"\
       SPACE "%q=%i;"

#define CDS_DB_UPDATE_INTEGER_TYPE_METADATA_PROPERTY_FOR_ALL_IGNORE_BY_INTEGER\
       "UPDATE" \
       SPACE CDS_DB_METADATA_TABLE \
       SPACE "SET"\
       SPACE "%q=%i WHERE "\
       "%q" CDS_DB_OPERATOR_NOT_EQUAL "%i;"

#define CDS_DB_UPDATE_INTEGER_TYPE_METADATA_PROPERTY_BY_PARENT_ID_QUERY\
        "UPDATE "\
        CDS_DB_METADATA_TABLE\
        " SET "\
        "%q=%i WHERE "\
        CDS_DB_PROPERTY_PARENT_ID"=%i;"

#define CDS_DB_UPDATE_TEXT_TYPE_METADATA_PROPERTY_BY_ID_QUERY\
         "UPDATE "\
        CDS_DB_METADATA_TABLE\
        " SET "\
        "'%q'='%q' WHERE "\
        CDS_DB_PROPERTY_ID"=%i;"

#define CDS_DB_GET_TOTAL_MEDIA_BY_MEDIA_CLASS_TYPE_QUERY\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q';"

#define CDS_DB_GET_TOTAL_MEDIA_BY_MEDIA_TYPE_QUERY\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_MEDIA_TYPE"=%i AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q';"

#define CDS_DB_GET_TOTAL_MEDIA_FOR_SM_REFERENCE_QUERY\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_MEDIA_TYPE"=%i"\
        " AND "\
        CDS_DB_PROPERTY_IMAGE_PROFILE"=%i"\
        " OR "\
        CDS_DB_PROPERTY_IMAGE_PROFILE"=%i;"

#define CDS_DB_GET_MEDIA_FOR_SM_REFERENCE_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_MEDIA_TYPE"=%i"\
        " AND "\
        CDS_DB_PROPERTY_IMAGE_PROFILE"=%i"\
        " OR "\
        CDS_DB_PROPERTY_IMAGE_PROFILE"=%i"\
        " LIMIT %i"\
        " OFFSET %i;"

#define CDS_DB_GET_USER_METADATA_BY_PROPERTY_QUERY\
        "SELECT * FROM "\
        CDS_DB_USER_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_USERMETA_NAME " LIKE '%q';"

#define CDS_DB_GET_USER_METADATA_BY_VALUE_QUERY\
        "SELECT * FROM "\
        CDS_DB_USER_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_USERMETA_VALUE " LIKE '%q';"

#define CDS_DB_GET_USER_METADATA_BY_CONTENT_ID_QUERY\
        "SELECT * FROM "\
        CDS_DB_USER_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_USERMETA_METADATA_ID " =%i;"

#define CDS_DB_GET_USER_METADATA_BY_ID_QUERY\
        "SELECT * FROM "\
        CDS_DB_USER_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_USERMETA_ID " =%i;"

#define CDS_DB_UPDATE_USER_METADATA_BY_ID_QUERY\
        "UPDATE "\
        CDS_DB_USER_METADATA_TABLE\
        " SET "\
            CDS_DB_PROPERTY_USERMETA_METADATA_ID"=%i"\
        "," SPACE CDS_DB_PROPERTY_USERMETA_NAME"='%q'"\
        "," SPACE CDS_DB_PROPERTY_USERMETA_VALUE"='%q'"\
        " WHERE "\
        CDS_DB_PROPERTY_USERMETA_ID"=%i;"

#define CDS_DB_UPDATE_REFERENCE_QUERY\
        "UPDATE "\
        CDS_DB_REFERENCE_TABLE\
        " SET "\
            CDS_DB_PROPERTY_REFERENCE_RES_AT_SIZE_HIGH"=%i"\
        "," SPACE CDS_DB_PROPERTY_REFERENCE_RES_AT_SIZE_LOW"=%i"\
        "," SPACE CDS_DB_PROPERTY_REFERENCE_RES_AT_WIDTH"=%i"\
        "," SPACE CDS_DB_PROPERTY_REFERENCE_RES_AT_HEIGHT"=%i"\
        " WHERE "\
        CDS_DB_PROPERTY_REFERENCE_ID"=%i;"

#define CDS_DB_GET_METADATA_BY_INTEGER_PROPERTY_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        "%q=%i AND "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q'"\
        " LIMIT %i"\
        " OFFSET %i;"

#define CDS_DB_GET_METADATA_BY_TEXT_PROPERTY_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        "%q='%q'"\
        " LIMIT %i"\
        " OFFSET %i;"


#ifdef DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER

#define CDS_DB_GET_METADATA_FILE_PATH_BY_UPNP_CLASS_PROPERTY_QUERY\
        "SELECT " CDS_DB_PROPERTY_FILEPATH " FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE " = %i AND "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q';"


#define CDS_DB_GET_PLAYLIST_MAP_COUNT_CONTENT\
        "SELECT COUNT(*) FROM "\
        CDS_DB_PLAYLIST_MAP_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID " = %i;"

#endif /* DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER */


#define CDS_DB_GET_METADATA_FOR_MPE_REFERENCES_BY_TYPE_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        "(%q=%i OR %q=%i) AND "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q'"\
        " LIMIT %i"\
        " OFFSET %i;"

#define CDS_DB_GET_METADATA_FOR_NON_MPE_REFERENCES_BY_TYPE_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        "%q=%i AND "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q'"\
        " LIMIT %i"\
        " OFFSET %i;"


#ifdef DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION

#define CDS_DB_GET_METADATA_FOR_ALBUMARTS_AND_REFERENCES_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=?1 AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"=?2 "\
        " LIMIT ?3"\
        " OFFSET ?4;"

#else /*DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION*/

#define CDS_DB_GET_METADATA_FOR_ALBUMARTS_AND_REFERENCES_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q'"\
        " LIMIT %i"\
        " OFFSET %i;"

#endif /*DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION*/


#define CDS_DB_GET_METADATA_FOR_SUBTITLES_BY_TYPE_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        "%q=%i AND "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q'"\
        " LIMIT %i"\
        " OFFSET %i;"

#ifdef DEVELOPMENT_ENABLE_CVP_SERVER_PLAYSPEED
#define CDS_DB_GET_METADATA_FOR_PRESCALEFILES_BY_TYPE_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        "(%q=%i OR %q=%i OR %q=%i) AND "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q'"\
        " LIMIT %i"\
        " OFFSET %i;"
#endif /* DEVELOPMENT_ENABLE_CVP_SERVER_PLAYSPEED */

#define CDS_DB_GET_REFERENCE_FOR_MPE_REFERENCES_BY_ID_QUERY\
        "SELECT * FROM "\
        CDS_DB_REFERENCE_TABLE\
        " WHERE "\
        "%q=%i;"

#define CDS_DB_GET_MEDIA_REFERENCE_BY_TYPE_QUERY\
        "SELECT * FROM "\
        CDS_DB_REFERENCE_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_REFERENCE_TYPE"=%i"\
        " AND "\
        CDS_DB_PROPERTY_REFERENCE_MEDIA_ID"=%i;"

#define CDS_DB_GET_DRM_INFO_FROM_EXT_METADTA_BY_METADATA_ID_QUERY\
        "SELECT * FROM "\
        CDS_DB_EXTENDED_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_EXTMETA_METADATA_ID"=%i"\
        " AND "\
        CDS_DB_PROPERTY_DRM_VALID"=1;"

#define CDS_DB_GET_DRM_PROTECTED_FROM_EXT_METADTA_BY_METADATA_ID_QUERY\
        "SELECT " CDS_DB_PROPERTY_DRM_PROTECTED " FROM "\
        CDS_DB_EXTENDED_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_EXTMETA_METADATA_ID"=%i"\
        " AND "\
        CDS_DB_PROPERTY_DRM_VALID"=1;"

#define CDS_DB_GET_DRM_CCI_FROM_EXT_METADTA_BY_METADATA_ID_QUERY\
        "SELECT " CDS_DB_ASTERIX " FROM "\
        CDS_DB_EXTENDED_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_EXTMETA_METADATA_ID"=%i"\
        " AND "\
        CDS_DB_PROPERTY_DRM_VALID"=1;"

#define CDS_DB_GET_AUDIO_COMMENT_AND_YEAR_FROM_EXTENDED_METADATA_TABLE_QUERY\
        "SELECT * FROM "\
        CDS_DB_EXTENDED_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_EXTMETA_METADATA_ID"=%i;"

#define CDS_DB_COLUMN_NUMBER_OF_FILE_ID_IN_GPS_STATEMENT 0
#define CDS_DB_COLUMN_NUMBER_OF_FILE_PATH_IN_GPS_STATEMENT 1
#define CDS_DB_GET_ID_AND_FILEPATH_BY_INTEGER_PROPERTY_NOT_IN_EXTENDED_METADATA_QUERY\
        "SELECT "\
        CDS_DB_METADATA_TABLE "." CDS_DB_PROPERTY_ID " as " CDS_DB_PROPERTY_ID ", "\
			CDS_DB_METADATA_TABLE "." CDS_DB_PROPERTY_FILEPATH " as " CDS_DB_PROPERTY_FILEPATH\
        " FROM "\
        CDS_DB_METADATA_TABLE " LEFT OUTER JOIN " CDS_DB_EXTENDED_METADATA_TABLE\
		" on "\
		"("CDS_DB_METADATA_TABLE "." CDS_DB_PROPERTY_ID "=" CDS_DB_EXTENDED_METADATA_TABLE "." CDS_DB_PROPERTY_EXTMETA_METADATA_ID ")"\
        " WHERE "\
        CDS_DB_EXTENDED_METADATA_TABLE "." CDS_DB_PROPERTY_EXTMETA_GPSINFO_LATITUDE " is null"\
		" AND "\
        CDS_DB_METADATA_TABLE ".%q=%i"\
        " LIMIT %i"\
        " OFFSET %i;"

#define CDS_DB_GET_COUNT_BY_INTEGER_PROPERTY_NOT_IN_EXTENDED_METADATA_QUERY\
        "SELECT count(*) FROM "\
        CDS_DB_METADATA_TABLE " LEFT OUTER JOIN " CDS_DB_EXTENDED_METADATA_TABLE\
		" on "\
		"("CDS_DB_METADATA_TABLE "." CDS_DB_PROPERTY_ID "=" CDS_DB_EXTENDED_METADATA_TABLE "." CDS_DB_PROPERTY_EXTMETA_METADATA_ID ")"\
        " WHERE "\
        CDS_DB_EXTENDED_METADATA_TABLE "." CDS_DB_PROPERTY_EXTMETA_GPSINFO_LATITUDE " is null"\
		" AND "\
        CDS_DB_METADATA_TABLE ".%q=%i"

#ifdef DEVELOPMENT_ENABLE_ADS
#define CDS_DB_DELETE_DUPLICATED_FILES_FOR_METADATA\
		"DELETE FROM "\
		CDS_DB_METADATA_TABLE\
		" WHERE SUBSTR ("\
		CDS_DB_PROPERTY_FILEPATH\
		",%i)"\
		" IN ( SELECT "\
		CDS_DB_PROPERTY_MPD_SEGMENTS_FILEPATH\
		" FROM "\
		CDS_DB_MPD_SEGMENTS_TABLE\
		")"
#endif /* DEVELOPMENT_ENABLE_ADS */

#define CDS_DB_UPDATE_SUBTITLE_FOR_VIDEO_QUERY\
        "UPDATE "\
        CDS_DB_SUBTITLE_TABLE\
        " SET "\
        CDS_DB_PROPERTY_SUBTITLE_VIDEOID"=%i"\
        " WHERE "\
        CDS_DB_PROPERTY_SUBTITLE_FOLDER_ID"=%i"\
        " AND "\
        CDS_DB_PROPERTY_SUBTITLE_TITLE"='%q';"

#define CDS_DB_DELETE_BY_ID_QUERY\
        "DELETE FROM "\
        "%q"\
        " WHERE "\
        "%q=%i;"

#define CDS_DB_DELETE_BY_TEXT_QUERY\
        "DELETE FROM "\
        "%q"\
        " WHERE "\
        "%q='%q';"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_TOTAL_QUERY_PG\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        CDS_DB_PROPERTY_PARENT_ID"=%i AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q' AND "\
        CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_TOTAL_QUERY_PG_NO_EMPTY\
        "SELECT count("\
        CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
        "("CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT">0 OR " \
           CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT">0 OR " \
           CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT">0" \
        ") AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q' AND "\
        CDS_DB_PROPERTY_PG_VALUE"<=%i" \
        " UNION ALL " \
        "SELECT count("\
        CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"<>1 AND " \
        CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_TOTAL_QUERY\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_PARENT_ID"=%i AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q'"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_TOTAL_QUERY_NO_EMPTY\
        "SELECT count("\
        CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
        "("CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT">0 OR " \
           CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT">0 OR " \
           CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT">0" \
        ") AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q'"\
        " UNION ALL " \
        "SELECT count("\
        CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"<>1"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_TOTAL_BY_TYPE_QUERY_PG\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND " \
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_PARENT_ID"=%i AND (" \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i OR " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=1) AND " \
        CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_TOTAL_BY_TYPE_QUERY\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_PARENT_ID"=%i AND (" \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i OR " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=1)"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_SUB_QUERY_PG\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_PARENT_ID"=%i AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q' AND "\
        CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_SUB_QUERY_PG_NO_EMPTY\
    "SELECT * FROM "\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
    CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
    CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
    CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
    "("CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT">0 OR " \
       CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT">0 OR " \
       CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT">0" \
    ") AND "\
    CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q' AND "\
    CDS_DB_PROPERTY_PG_VALUE"<=%i" \
    " UNION ALL " \
    "SELECT * FROM "\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
    CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
    CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
    CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
    CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"<>1 AND " \
    CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_SUB_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_PARENT_ID"=%i AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q'"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_SUB_QUERY_NO_EMPTY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
        "("CDS_DB_PROPERTY_CONTAINER_IMAGE_COUNT">0 OR " \
           CDS_DB_PROPERTY_CONTAINER_AUDIO_COUNT">0 OR " \
           CDS_DB_PROPERTY_CONTAINER_VIDEO_COUNT">0" \
        ") AND "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q'"\
        " UNION ALL " \
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_PARENT_ID"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"<>1"

#ifdef DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER

#define CDS_DB_BROWSE_DIRECT_CHILDREN_PLAYLIST_QUERY_PG\
        "SELECT a1.* FROM "\
        CDS_DB_METADATA_TABLE " AS a1"\
        " INNER JOIN "\
        CDS_DB_PLAYLIST_MAP_TABLE " AS a2"\
        " ON "\
        "a1." CDS_DB_PROPERTY_ID\
        " = "\
        "a2." CDS_DB_PROPERTY_PLAYLIST_MAP_CONTENT_ID\
        " WHERE "\
        "a1." CDS_DB_PROPERTY_VALID_FLAG "=%i AND "\
        "a1." CDS_DB_PROPERTY_SHARED_FLAG "=%i AND " \
        "a2." CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID "=%i AND "\
        "a1." CDS_DB_PROPERTY_PG_VALUE "<=%i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_PLAYLIST_TOTAL_QUERY_PG\
        "SELECT COUNT(*) FROM "\
        CDS_DB_METADATA_TABLE " AS a1"\
        " INNER JOIN "\
        CDS_DB_PLAYLIST_MAP_TABLE " AS a2"\
        " ON "\
        "a1." CDS_DB_PROPERTY_ID\
        " = "\
        "a2." CDS_DB_PROPERTY_PLAYLIST_MAP_CONTENT_ID\
        " WHERE "\
        "a1." CDS_DB_PROPERTY_VALID_FLAG "=%i AND "\
        "a1." CDS_DB_PROPERTY_SHARED_FLAG "=%i AND " \
        "a2." CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID "=%i AND "\
        "a1." CDS_DB_PROPERTY_PG_VALUE "<=%i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_PLAYLIST_BY_TYPE_QUERY_PG\
        "SELECT a1.* FROM "\
        CDS_DB_METADATA_TABLE " AS a1"\
        " INNER JOIN "\
        CDS_DB_PLAYLIST_MAP_TABLE " AS a2"\
        " ON "\
        "a1." CDS_DB_PROPERTY_ID\
        " = "\
        "a2." CDS_DB_PROPERTY_PLAYLIST_MAP_CONTENT_ID\
        " WHERE "\
        "a1." CDS_DB_PROPERTY_VALID_FLAG "=%i AND "\
        "a1." CDS_DB_PROPERTY_SHARED_FLAG "=%i AND " \
        "a2." CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID "=%i AND ("\
        "a1." CDS_DB_PROPERTY_MEDIA_CLASS_TYPE "=%i OR " \
        "a1." CDS_DB_PROPERTY_MEDIA_CLASS_TYPE "=1) AND " \
        "a1." CDS_DB_PROPERTY_PG_VALUE "<=%i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_PLAYLIST_TOTAL_BY_TYPE_QUERY_PG\
        "SELECT COUNT(*) FROM "\
        CDS_DB_METADATA_TABLE " AS a1"\
        " INNER JOIN "\
        CDS_DB_PLAYLIST_MAP_TABLE " AS a2"\
        " ON "\
        "a1." CDS_DB_PROPERTY_ID\
        " = "\
        "a2." CDS_DB_PROPERTY_PLAYLIST_MAP_CONTENT_ID\
        " WHERE "\
        "a1." CDS_DB_PROPERTY_VALID_FLAG "=%i AND "\
        "a1." CDS_DB_PROPERTY_SHARED_FLAG "=%i AND " \
        "a2." CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID "=%i AND ("\
        "a1." CDS_DB_PROPERTY_MEDIA_CLASS_TYPE "=%i OR " \
        "a1." CDS_DB_PROPERTY_MEDIA_CLASS_TYPE "=1) AND " \
        "a1." CDS_DB_PROPERTY_PG_VALUE "<=%i" \


#define CDS_DB_BROWSE_DIRECT_CHILDREN_PLAYLIST_QUERY\
        "SELECT a1.* FROM "\
        CDS_DB_METADATA_TABLE " AS a1"\
        " INNER JOIN "\
        CDS_DB_PLAYLIST_MAP_TABLE " AS a2"\
        " ON "\
        "a1." CDS_DB_PROPERTY_ID\
        " = "\
        "a2." CDS_DB_PROPERTY_PLAYLIST_MAP_CONTENT_ID\
        " WHERE "\
        "a1." CDS_DB_PROPERTY_VALID_FLAG "=%i AND "\
        "a1." CDS_DB_PROPERTY_SHARED_FLAG "=%i AND " \
        "a2." CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID "=%i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_PLAYLIST_TOTAL_QUERY\
        "SELECT COUNT(*) FROM "\
        CDS_DB_METADATA_TABLE " AS a1"\
        " INNER JOIN "\
        CDS_DB_PLAYLIST_MAP_TABLE " AS a2"\
        " ON "\
        "a1." CDS_DB_PROPERTY_ID\
        " = "\
        "a2." CDS_DB_PROPERTY_PLAYLIST_MAP_CONTENT_ID\
        " WHERE "\
        "a1." CDS_DB_PROPERTY_VALID_FLAG "=%i AND "\
        "a1." CDS_DB_PROPERTY_SHARED_FLAG "=%i AND " \
        "a2." CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID "=%i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_PLAYLIST_BY_TYPE_QUERY\
        "SELECT a1.* FROM "\
        CDS_DB_METADATA_TABLE " AS a1"\
        " INNER JOIN "\
        CDS_DB_PLAYLIST_MAP_TABLE " AS a2"\
        " ON "\
        "a1." CDS_DB_PROPERTY_ID\
        " = "\
        "a2." CDS_DB_PROPERTY_PLAYLIST_MAP_CONTENT_ID\
        " WHERE "\
        "a1." CDS_DB_PROPERTY_VALID_FLAG "=%i AND "\
        "a1." CDS_DB_PROPERTY_SHARED_FLAG "=%i AND " \
        "a2." CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID "=%i AND (" \
        "a1." CDS_DB_PROPERTY_MEDIA_CLASS_TYPE "=%i OR " \
        "a1." CDS_DB_PROPERTY_MEDIA_CLASS_TYPE "=1)"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_PLAYLIST_TOTAL_BY_TYPE_QUERY\
        "SELECT COUNT(*) FROM "\
        CDS_DB_METADATA_TABLE " AS a1"\
        " INNER JOIN "\
        CDS_DB_PLAYLIST_MAP_TABLE " AS a2"\
        " ON "\
        "a1." CDS_DB_PROPERTY_ID\
        " = "\
        "a2." CDS_DB_PROPERTY_PLAYLIST_MAP_CONTENT_ID\
        " WHERE "\
        "a1." CDS_DB_PROPERTY_VALID_FLAG "=%i AND "\
        "a1." CDS_DB_PROPERTY_SHARED_FLAG "=%i AND " \
        "a2." CDS_DB_PROPERTY_PLAYLIST_MAP_PLAYLIST_ID "=%i AND (" \
        "a1." CDS_DB_PROPERTY_MEDIA_CLASS_TYPE "=%i OR " \
        "a1." CDS_DB_PROPERTY_MEDIA_CLASS_TYPE "=1)"

#ifdef DEVELOPEMENT_WINDOWS_PLAYLISTS
#define CDS_DB_GET_FILE_FOR_WINDOWS_PLAYLISTS_QUERY\
		    CDS_DB_STRING_SELECT CDS_DB_PROPERTY_FILEPATH \
		    CDS_DB_STRING_FROM CDS_DB_METADATA_TABLE\
		    CDS_DB_STRING_WHERE \
  CDS_DB_PROPERTY_FILEPATH SPACE " LIKE '%q';"
#endif /*DEVELOPEMENT_WINDOWS_PLAYLISTS*/

#endif /* DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER */

#define CDS_DB_GET_ALL_BY_TYPE_QUERY\
       "SELECT * FROM "\
       CDS_DB_METADATA_TABLE\
       " WHERE "\
       CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_SUB_BY_TYPE_QUERY_PG\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_PARENT_ID"=%i AND (" \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i OR " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=1) AND " \
        CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_DIRECT_CHILDREN_SUB_BY_TYPE_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_PARENT_ID"=%i AND (" \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i OR " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=1)"

#define CDS_DB_BROWSE_VIRTUAL_BY_TYPE_SUB_QUERY_PG\
        "SELECT * FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND "\
        CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_VIRTUAL_BY_TYPE_SUB_QUERY\
        "SELECT * FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i"

#define CDS_DB_GET_TOTAL_CONTENT_QUERY\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i"

#define CDS_DB_BROWSE_VIRTUAL_TOTAL_QUERY_PG\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND " \
        CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_VIRTUAL_TOTAL_QUERY\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i"

#define CDS_DB_BROWSE_VIRTUAL_BY_TYPE_TOTAL_SUB_QUERY_PG\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND "\
        CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_VIRTUAL_BY_TYPE_TOTAL_SUB_QUERY\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i"

#define CDS_DB_BROWSE_VIRTUAL_BY_PROPERTY_TOTAL_SUB_QUERY_PG\
        "SELECT count(DISTINCT %q) FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND "\
        CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_VIRTUAL_BY_PROPERTY_TOTAL_SUB_QUERY\
        "SELECT count(DISTINCT %q) FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i"

#define CDS_DB_BROWSE_VIRTUAL_BY_PROPERTY_SUB_QUERY_PG\
        "SELECT DISTINCT %q FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND "\
        CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_VIRTUAL_BY_PROPERTY_SUB_QUERY\
        "SELECT DISTINCT %q FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i"

#define CDS_DB_BROWSE_VIRTUAL_BY_METADATA_TOTAL_QUERY_PG\
        "SELECT COUNT(%q) FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND "\
        CDS_DB_PROPERTY_PG_VALUE"<=%i AND "\
        "%q='%q'"

#define CDS_DB_BROWSE_VIRTUAL_BY_METADATA_TOTAL_QUERY\
        "SELECT COUNT(%q) FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND "\
        "%q='%q'"

#define CDS_DB_BROWSE_VIRTUAL_QUERY_PG\
        "SELECT * FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND "\
        CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_VIRTUAL_QUERY\
        "SELECT * FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i"

#define CDS_DB_BROWSE_VIRTUAL_PLAYLIST_BY_PROPERTY_SUB_QUERY_PG\
        "SELECT * FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND "\
        CDS_DB_PROPERTY_PG_VALUE"<=%i AND " \
        "%q" SPACE CDS_DB_OPERATOR_IS_NOT_NULL " AND " \
        "%q != '(NULL)' AND %q > 0"

#define CDS_DB_BROWSE_VIRTUAL_PLAYLIST_BY_PROPERTY_SUB_QUERY\
        "SELECT * FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND " \
        "%q" SPACE CDS_DB_OPERATOR_IS_NOT_NULL " AND " \
        "%q != '(NULL)' AND %q > 0"

#define CDS_DB_BROWSE_VIRTUAL_PLAYLIST_BY_PROPERTY_TOTAL_SUB_QUERY_PG\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND "\
        CDS_DB_PROPERTY_PG_VALUE"<=%i AND " \
        "%q" SPACE CDS_DB_OPERATOR_IS_NOT_NULL " AND " \
        "%q != '(NULL)' AND %q > 0"

#define CDS_DB_BROWSE_VIRTUAL_PLAYLIST_BY_PROPERTY_TOTAL_SUB_QUERY\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND " \
        "%q" SPACE CDS_DB_OPERATOR_IS_NOT_NULL " AND " \
        "%q != '(NULL)' AND %q > 0"

#define CDS_DB_BROWSE_BY_TYPE_BY_DEVICE_TOTAL_SUB_QUERY_PG\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND "\
        CDS_DB_PROPERTY_PG_VALUE"<=%i AND " \
        CDS_DB_PROPERTY_PARENT_ID"=%i" \
        CDS_DB_STRING_UNION_ALL \
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND "\
        CDS_DB_PROPERTY_PG_VALUE"<=%i AND " \
        CDS_DB_PROPERTY_PARENT_ID"=%i"

#define CDS_DB_BROWSE_BY_TYPE_BY_DEVICE_TOTAL_SUB_QUERY\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND "\
        CDS_DB_PROPERTY_PARENT_ID"=%i" \
        CDS_DB_STRING_UNION_ALL \
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND "\
        CDS_DB_PROPERTY_PARENT_ID"=%i"

#define CDS_DB_GET_TOTAL_INFO_FROM_EXT_METADTA_BY_METADATA_ID_QUERY\
        "SELECT count("\
        CDS_DB_PROPERTY_EXTMETA_ID\
        ") FROM "\
        CDS_DB_EXTENDED_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_EXTMETA_METADATA_ID"=%i;"

#ifdef ENABLE_GPS_SUPPORT
#define CDS_DB_INSERT_GPS_INTO_EXTENDED_METADATA_TABLE_QUERY\
        "INSERT INTO "\
        CDS_DB_EXTENDED_METADATA_TABLE\
        "("\
          CDS_DB_PROPERTY_EXTMETA_METADATA_ID\
          "," SPACE CDS_DB_PROPERTY_EXTMETA_GPSINFO_VALID\
          "," SPACE CDS_DB_PROPERTY_EXTMETA_GPSINFO_LATITUDE\
          "," SPACE CDS_DB_PROPERTY_EXTMETA_GPSINFO_LONGITUDE\
        ") "\
        "VALUES (%i, 1,'%q', '%q');"

#define CDS_DB_UPDATE_GPS_INFO_EXTENDEND_METADATA_TABLE_QUERY\
        "UPDATE "\
        CDS_DB_EXTENDED_METADATA_TABLE\
        " SET "\
        CDS_DB_PROPERTY_EXTMETA_GPSINFO_VALID"=%i"\
        "," SPACE CDS_DB_PROPERTY_EXTMETA_GPSINFO_LATITUDE"=%q"\
        "," SPACE CDS_DB_PROPERTY_EXTMETA_GPSINFO_LONGITUDE"=%q"\
        " WHERE "\
        CDS_DB_PROPERTY_EXTMETA_METADATA_ID"=%i;"

#define CDS_DB_GET_GPS_INFO_FROM_EXT_METADTA_BY_METADATA_ID_QUERY\
        "SELECT * FROM "\
        CDS_DB_EXTENDED_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_EXTMETA_METADATA_ID"=%i"\
        " AND "\
        CDS_DB_PROPERTY_EXTMETA_GPSINFO_VALID"=1;"

#define CDS_DB_BROWSE_VIRTUAL_TOTAL_GPS_IMG_SUB_QUERY_PG \
        "SELECT count("\
         "tm."CDS_DB_PROPERTY_ID\
        ") FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " AS tm INNER JOIN "\
        "%q."\
        CDS_DB_EXTENDED_METADATA_TABLE\
        " AS tem ON tm.id=tem."\
        CDS_DB_PROPERTY_EXTMETA_METADATA_ID\
        " WHERE "\
        "tem."CDS_DB_PROPERTY_EXTMETA_GPSINFO_VALID"=1 AND "\
        "tm."CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        "tm."CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        "tm."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND "\
        "tm."CDS_DB_PROPERTY_PG_VALUE"<=%i "

#define CDS_DB_BROWSE_VIRTUAL_TOTAL_GPS_IMG_SUB_QUERY\
        "SELECT count("\
         "tm."CDS_DB_PROPERTY_ID\
        ") FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " AS tm INNER JOIN "\
        "%q."\
        CDS_DB_EXTENDED_METADATA_TABLE\
        " AS tem ON tm.id=tem."\
        CDS_DB_PROPERTY_EXTMETA_METADATA_ID\
        " WHERE "\
        "tem."CDS_DB_PROPERTY_EXTMETA_GPSINFO_VALID"=1 AND "\
        "tm."CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        "tm."CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        "tm."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i "

#define CDS_DB_BROWSE_VIRTUAL_GPS_IMG_SUB_QUERY_PG \
        "SELECT tm.*,"\
        "tem."CDS_DB_PROPERTY_EXTMETA_GPSINFO_VALID\
        " FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " AS tm INNER JOIN "\
        "%q."\
        CDS_DB_EXTENDED_METADATA_TABLE\
        " AS tem ON tm.id=tem."\
        CDS_DB_PROPERTY_EXTMETA_METADATA_ID\
        " WHERE "\
        "tem."CDS_DB_PROPERTY_EXTMETA_GPSINFO_VALID"=1 AND "\
        "tm."CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        "tm."CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        "tm."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND "\
        "tm."CDS_DB_PROPERTY_PG_VALUE"<=%i "

#define CDS_DB_BROWSE_VIRTUAL_GPS_IMG_SUB_QUERY\
        "SELECT tm.*,"\
        "tem."CDS_DB_PROPERTY_EXTMETA_GPSINFO_VALID\
        " FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " AS tm INNER JOIN "\
        "%q."\
        CDS_DB_EXTENDED_METADATA_TABLE\
        " AS tem ON tm.id=tem."\
        CDS_DB_PROPERTY_EXTMETA_METADATA_ID\
        " WHERE "\
        "tem."CDS_DB_PROPERTY_EXTMETA_GPSINFO_VALID"=1 AND "\
        "tm."CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        "tm."CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        "tm."CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i "

#endif /* ENABLE_GPS_SUPPORT */

#define CDS_DB_SEARCH_STORAGE_SUB_QUERY_PG\
        "SELECT * FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_PG_VALUE"<=%i "

#define CDS_DB_SEARCH_STORAGE_SUB_QUERY\
        "SELECT * FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i "

#define CDS_DB_SEARCH_STORAGE_TOTAL_QUERY_PG\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_PG_VALUE"<=%i "

#define CDS_DB_SEARCH_STORAGE_TOTAL_QUERY\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i "

#define CDS_DB_CONTENT_BY_ID_SUB_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_ID"=%i"

#define CDS_DB_CONTENT_BY_STORAGE_TOTAL_QUERY\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE

#define CDS_DB_CONTENT_BY_STORAGE_SUB_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i" \
        CDS_DB_OFFSET_LIMIT_END_QUERY

#define CDS_DB_CONTENT_BY_TYPE_SUB_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i"

#define CDS_DB_CONTENT_BY_TYPE_TOTAL_QUERY\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i"

#define CDS_DB_CONTENT_SEARCH_SUB_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i"

#define CDS_DB_CONTENT_SEARCH_TOTAL_QUERY\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i"

#define CDS_DB_CONTAINER_TYPE_CHILDREN_COUNT_QUERY\
        "SELECT count(%q) FROM %q WHERE %q=%i;"

#define CDS_DB_UPDATE_INTEGER_PROPERTY_BY_NUM_OPERATOR\
        "UPDATE %q SET %q=%i WHERE "\
        "%q"\
        SPACE "%q"\
        SPACE "%i;"

#define CDS_DB_UPDATE_INTEGER_PROPERTY_BY_STRING_OPERATOR_QUERY\
       "UPDATE %q SET %q=%i WHERE "\
        "%q"\
        SPACE "%q"\
        SPACE "'%%"\
        "%q"\
        "%%';"

 /* Query for changing storage subfolder level pg values */
#define CDS_DB_UPDATE_INTEGER_PROPERTY_BY_STRING_OPERATOR_QUERY_2\
       "UPDATE %q SET %q=%i WHERE "\
       "%q='%q' AND "\
        "%q"\
        SPACE "%q"\
        SPACE "'%%"\
        "%q" PATH_SEPARATOR\
        "%%';"

 /* Query for changing storage folder pg level*/
#define CDS_DB_UPDATE_INTEGER_PROPERTY_BY_STRING_OPERATOR_QUERY_3\
       "UPDATE %q SET %q=%i WHERE "\
       "%q='%q' AND "\
        "%q"\
        SPACE "%q"\
        SPACE "'%%"\
        "%q"\
        "%%';"

#define CDS_DB_UPDATE_INTEGER_PROPERTY_BY_STORAGE_DEVICE_ID\
       "UPDATE" \
       SPACE CDS_DB_METADATA_TABLE \
       SPACE "SET"\
       SPACE "%q=%i" \
       SPACE "WHERE"\
       SPACE CDS_DB_PROPERTY_STORAGE_DEVICE_ID" LIKE '%q';"

#define CDS_DB_GET_PG_PROPERTY_BY_STORAGE_DEVICE_ID\
	"SELECT " \
	CDS_DB_PROPERTY_PG_VALUE \
	" FROM "\
	CDS_DB_METADATA_TABLE\
	" WHERE "\
	SPACE CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q'" \
	" AND "\
	SPACE CDS_DB_PROPERTY_FILEPATH "='%q';"


#define CDS_DB_UPDATE_INTEGER_PROPERTY_FOR_ALL\
       "UPDATE" \
       SPACE CDS_DB_METADATA_TABLE \
       SPACE "SET"\
       SPACE "%q=%i;"

#if defined(ENABLE_WEBUI_SUPPORT) || defined(ENABLE_AHL)
/* @WB */
#define CDS_DB_WEBUI_DIRECT_CHILDREN_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_PARENT_ID"=%i"\
        CDS_DB_OFFSET_LIMIT_END_QUERY

#define CDS_DB_WEBUI_DIRECT_CHILDREN_QUERY_OPTIMIZED\
        "SELECT " \
        CDS_DB_PROPERTY_ID \
        "," CDS_DB_PROPERTY_PARENT_ID \
        "," CDS_DB_PROPERTY_STORAGE_DEVICE_ID \
        "," CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
        "," CDS_DB_PROPERTY_FILEPATH \
        "," CDS_DB_PROPERTY_VALID_FLAG \
        "," CDS_DB_PROPERTY_SHARED_FLAG \
        "," CDS_DB_PROPERTY_PG_VALUE \
        "," CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT \
        " FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_PARENT_ID"=%i"\
        CDS_DB_OFFSET_LIMIT_END_QUERY

#define CDS_DB_WEBUI_DIRECT_CHILDREN_TOTAL_QUERY\
		"SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_PARENT_ID"=%i"

#define CDS_DB_WEBUI_CONTENT_INFO_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_ID"=%i"
#define CDS_DB_WEBUI_CONTENT_INFO_QUERY_OPTIMIZED\
    "SELECT " \
    CDS_DB_PROPERTY_ID \
    "," CDS_DB_PROPERTY_PARENT_ID \
    "," CDS_DB_PROPERTY_STORAGE_DEVICE_ID \
    "," CDS_DB_PROPERTY_MEDIA_CLASS_TYPE \
    "," CDS_DB_PROPERTY_FILEPATH \
    "," CDS_DB_PROPERTY_VALID_FLAG \
    "," CDS_DB_PROPERTY_SHARED_FLAG \
    "," CDS_DB_PROPERTY_PG_VALUE \
    "," CDS_DB_PROPERTY_CONTAINER_CHILD_COUNT \
    " FROM "\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
        CDS_DB_PROPERTY_ID"=%i"
#endif /* ENABLE_WEBUI_SUPPORT || ENABLE_AHL */

#define CDS_DB_CHECK_CONTENT_BY_PATH\
        "SELECT count("\
        CDS_DB_PROPERTY_FILEPATH \
        ") FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_FILEPATH"='%q'"

#ifdef DEVELOPMENT_DMS_STORAGE_LAST_INDEX_TIME
#define CDS_DB_GET_LAST_IDX_TIME\
		"SELECT" SPACE CDS_DB_PROPERTY_LAST_IDX_TIME SPACE\
		"FROM" SPACE CDS_DB_METADATA_TABLE SPACE\
		"WHERE id=%i;"
#define CDS_DB_UPDATE_LAST_IDX_TIME\
		"UPDATE" SPACE CDS_DB_METADATA_TABLE SPACE\
		"SET" SPACE CDS_DB_PROPERTY_LAST_IDX_TIME "=%i" SPACE\
		"WHERE id=%i;"
#endif /* DEVELOPMENT_DMS_STORAGE_LAST_INDEX_TIME */

#define CDS_DB_GET_UPNPALBUMARTURI_QUERY_BY_PROPERTY\
        "SELECT "\
        CDS_DB_PROPERTY_UPNP_ALBUMARTURI_ORIGINAL \
        "," CDS_DB_PROPERTY_UPNP_ALBUMARTURI_PROFILE \
        "," CDS_DB_PROPERTY_UPNP_ALBUMARTURI_TN \
        " FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_MEDIA_CLASS_TYPE"=%i AND " \
        "%q='%q'"\
        " LIMIT 1"

#ifdef DEVELOPMENT_CONTENT_AGGREGATION
#define CONTENT_AGGREGATION_DB_ALIAS         "uCA"
#endif /* DEVELOPMENT_CONTENT_AGGREGATION */

#define CENTRAL_LOCATION_DB_ALIAS            "uCENTRAL"
#define MAIN_DB_ALIAS                        "main"

#define CDS_DB_UPDATE_REFERENCE_INVALID\
    "UPDATE" SPACE CDS_DB_METADATA_TABLE SPACE\
    "SET" SPACE CDS_DB_PROPERTY_REFERENCE_INVALID "=%i" SPACE\
    "WHERE id=%i;"

#define CDS_DB_TABLE_ROW_COUNT_QUERY\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM %q"

#define CDS_DB_TABLE_ROW_COUNT_QUERY_FOR_DEVICE\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM %q"\
        " WHERE "\
        CDS_DB_PROPERTY_STORAGE_DEVICE_ID"='%q'"

#define CDS_DB_UPDATE_ROOT_TITLE_QUERY\
    "UPDATE" SPACE CDS_DB_METADATA_TABLE SPACE\
    "SET" SPACE CDS_DB_PROPERTY_DC_TITLE"='%q'"\
    "WHERE" SPACE CDS_DB_PROPERTY_ID"=%i"

#define CDS_DB_UPDATE_UPNP_ALBUM_FOR_ROOT_QUERY\
    "UPDATE" SPACE CDS_DB_METADATA_TABLE SPACE\
    "SET" SPACE CDS_DB_PROPERTY_UPNP_ALBUM"='%q'"\
    "WHERE" SPACE CDS_DB_PROPERTY_UPNP_ALBUM"='%q' AND "\
    CDS_DB_PROPERTY_PARENT_ID"=%i"

#define CDS_DB_BROWSE_VIRTUAL_PVR_CONTENT_TOTAL_SUB_QUERY_PG\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        CDS_DB_PROPERTY_STREAMING"=1 AND "\
        CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_VIRTUAL_PVR_CONTENT_TOTAL_SUB_QUERY\
    "SELECT count("\
     CDS_DB_PROPERTY_ID\
    ") FROM "\
    "%q."\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
    CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
    CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
    CDS_DB_PROPERTY_STREAMING"=1"

#define CDS_DB_BROWSE_VIRTUAL_PVR_CONTENT_SUB_QUERY_PG\
        "SELECT * FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_STREAMING"=1 AND "\
        CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_VIRTUAL_PVR_CONTENT_SUB_QUERY\
        "SELECT * FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_STREAMING"=1"

#define CDS_DB_BROWSE_PUBLISHED_CONTENT_TOTAL_SUB_QUERY_PG\
        "SELECT count("\
         CDS_DB_PROPERTY_ID\
        ") FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_PARENT_ID"=%i AND "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND "\
        CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_PUBLISHED_CONTENT_TOTAL_SUB_QUERY\
    "SELECT count("\
     CDS_DB_PROPERTY_ID\
    ") FROM "\
    "%q."\
    CDS_DB_METADATA_TABLE\
    " WHERE "\
    CDS_DB_PROPERTY_PARENT_ID"=%i AND "\
    CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
    CDS_DB_PROPERTY_SHARED_FLAG"=%i"

#define CDS_DB_BROWSE_PUBLISHED_CONTENT_SUB_QUERY_PG\
        "SELECT * FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_PARENT_ID"=%i AND "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i AND " \
        CDS_DB_PROPERTY_PG_VALUE"<=%i"

#define CDS_DB_BROWSE_PUBLISHED_CONTENT_SUB_QUERY\
        "SELECT * FROM "\
        "%q."\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_PARENT_ID"=%i AND "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_SHARED_FLAG"=%i"

#define CDS_DB_BROWSE_PUBLISHED_CONTENT_QUERY_PREMIUM "SELECT * FROM " CDS_DB_METADATA_TABLE " WHERE "
#define CDS_DB_BROWSE_PUBLISHED_CONTENT_QUERY\
        "SELECT * FROM "\
        CDS_DB_METADATA_TABLE\
        " WHERE "\
        CDS_DB_PROPERTY_PARENT_ID"=%i AND "\
        CDS_DB_PROPERTY_VALID_FLAG"=%i AND "\
        CDS_DB_PROPERTY_PG_VALUE"=%i"

#define CDS_DB_BEGIN_TRANSACTION "BEGIN TRANSACTION;"

#define CDS_DB_COMMIT_TRANSACTION "COMMIT TRANSACTION;"

enum {
  NFLC_CDS_DATABASE_PROPERTY_TYPE_INT,
  NFLC_CDS_DATABASE_PROPERTY_TYPE_TEXT
};
typedef slim_int property_type;


#ifdef DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION

enum _cds_database_statements_type
{

  CDS_DB_STATEMENTS_INSERT_INTO_METADATA = 0,
  CDS_DB_STATEMENTS_INSERT_INTO_METADATA_CONTAINER,


#ifdef DEVELOPMENT_ENABLE_FOLDER_BROWSE_OPTIMIZATIONS
#ifdef DEVELOPMENT_ENABLE_RECURSIVE_TRIGGERS

  CDS_DB_STATEMENTS_GET_CHILDREN_COUNT_BY_TYPE_WITH_LIMIT,
  CDS_DB_STATEMENTS_GET_CHILDREN_COUNT_BY_TYPE_WITH_LIMIT_PG,

#endif /* DEVELOPMENT_ENABLE_RECURSIVE_TRIGGERS */
#endif /* DEVELOPMENT_ENABLE_FOLDER_BROWSE_OPTIMIZATIONS */

  CDS_DB_STATEMENTS_GET_MEDIA_INFO_FOR_REFERENCES,
  CDS_DB_STATEMENTS_UPDATE_ALBUM_ARTS

};

#endif /* DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION */


typedef struct cds_database_column_map_
{
  slim_int column_id;
  char* column_name;
  slim_int column_type;
} cds_database_column_map_t;

#ifdef CDS_DB_SUPPORT_DATABASE_INDEX
typedef struct cds_db_index_map_
{
  slim_char* index;
  slim_char* table;
  slim_char* column;
} cds_database_index_map_t;
#endif /*CDS_DB_SUPPORT_DATABASE_INDEX*/

typedef struct database_table_info_
{
  struct database_table_info_ *prev;
  struct database_table_info_ *next;
  slim_char* table_name;
} database_table_info;

typedef struct database_index_info_
{
  struct database_index_info_ *prev;
  struct database_index_info_ *next;
  slim_char* index_name;
} database_index_info;

typedef struct cds_database_info_
{
  slim_char* db_filepath;
  dlna_db_handle handle;
  slim_int journalMode;
  slim_int cache_size;
  slim_bool sharedcache;
  List(database_table_info*) table_list;
  List(database_index_info*) index_list;
  slim_int schemaVersion;
  slim_int userVersion;
  slim_int flags;


#ifdef DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION

  dlna_db_stmt * statements;

#endif /* DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION */


} cds_database_info;

typedef struct cds_db_get_content_storage_info_
{
  slim_char* storage_device_path;
  slim_char* storage_data_dir;
  slim_int storage_device_db_id;
  slim_bool storage_is_central;
} cds_db_get_content_storage_info;

#ifdef DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER

#ifdef DEVELOPEMENT_WINDOWS_PLAYLISTS
struct windows_playlist_params {
  slim_char *path;
};
#endif /*DEVELOPEMENT_WINDOWS_PLAYLISTS*/

#endif /*DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER*/

struct _extended_flags;

slim_int
cds_database_initialize(void);

void
cds_database_finalize(void);

#ifdef DLNA_DB_SUPPORT_JOURNAL_MODE_WAL
slim_int
cds_database_enable_checkpoint(cds_database_info* database);
#endif /* DLNA_DB_SUPPORT_JOURNAL_MODE_WAL */

slim_int
cds_database_close_connection(cds_database_info *database_info);

cds_database_info *
cds_database_create_database(slim_char* database_path, slim_bool is_central,
    slim_bool is_local_db_wal, slim_bool premium_db, slim_bool aggregated_db);

cds_database_info *
cds_database_open_database(slim_char* database_path, slim_bool *is_deleted, slim_bool is_central, slim_bool is_local_db_wal, void* top);

slim_int
cds_database_attach_database(cds_database_info* database, slim_char* attach_database_path, slim_char* attach_alias);

slim_int
cds_database_detach_database(cds_database_info* database, slim_char* attach_alias);

void
cds_database_format_query_string(slim_char **out_query, slim_char *query, ...);

slim_int
cds_database_bind_text_to_statement(dlna_db_stmt database_stmt, slim_char* value, slim_int count);

void
cds_database_set_busy_handler(void* usb_cfg, slim_bool is_indexing);

slim_int
cds_database_is_empty(cds_database_info *database, slim_bool *out_value);

slim_int
cds_database_get_total_indexed_count(cds_database_info *database, slim_int *out_value, slim_char *device_uuid);

slim_int
cds_database_get_content_by_path_prepare_statement(cds_database_info * in_database,
    slim_char * in_path,
    dlna_db_stmt * out_database_stmt);

slim_int
cds_database_get_content_by_id_prepare_statement(cds_database_info * in_database,
    slim_int  in_id,
    dlna_db_stmt * out_database_stmt);

slim_int
cds_database_get_content_get_content_type(dlna_db_stmt in_database_stmt,
    slim_int * out_content_type);

slim_int
cds_database_get_subtitle_by_folder_id_greater_than(cds_database_info *database, slim_int *curr_id, slim_char** file_path, slim_int id, slim_int folder_id);

slim_int
cds_database_get_subtitle_count_by_full_path(cds_database_info *database, slim_int *count, slim_char* full_path);

slim_int
cds_database_get_subtitle_id_by_full_path(cds_database_info *database, slim_char* content_path);

slim_int
cds_database_get_content_metadata(cds_database_info * in_database,
    dlna_db_stmt database_stmt,
    cds_db_get_content_storage_info * storage_info,
    void * in_c);

slim_int
cds_database_get_content_by_id(cds_database_info *database,
    cds_db_get_content_storage_info *storage_info, void* in_c, slim_int id);

//#ifdef DEVELOPMENT_ENABLE_PUBLISH_CONTENT
#ifdef DEVELOPMENT_PUBLISH_ONLINE_RECORDED_CONTENT_API
slim_int
cds_database_metadata_find_item_id_by_extid(cds_database_info* database, slim_char* extId, slim_int* out_id);
slim_int
cds_database_metadata_find_item_id_by_path(cds_database_info* database, slim_char* path, slim_int* out_id);
#ifdef DEVELOPMENT_PUBLISH_CONTENT_OBJECT_RIGHTS_API
slim_int
cds_database_stream_object_rights_insert(cds_database_info* database, slim_int metadata_id, void* in_struct);
slim_int
cds_database_stream_object_rights_get(cds_database_info* database, slim_int metadata_id, void* out_struct);
slim_int
cds_database_stream_object_rights_update(cds_database_info* database, slim_int metadata_id, void* in_struct);
#endif /* DEVELOPMENT_PUBLISH_CONTENT_OBJECT_RIGHTS_API */
#endif /* DEVELOPMENT_PUBLISH_ONLINE_RECORDED_CONTENT_API */

slim_int
cds_database_get_content(cds_database_info *database,
  dlna_db_stmt database_stmt, cds_db_get_content_storage_info *storage_info,
  void* in_c, struct _extended_flags * ext_flags);

slim_int
cds_database_get_content_id_for_device_by_uuid(cds_database_info *database, slim_char* uuid);

slim_char*
cds_database_get_content_title_for_device_by_uuid(cds_database_info *database, slim_char* uuid);

slim_int
cds_database_get_content_id_by_path(cds_database_info *database, slim_char* content_path, slim_char *uuid);

slim_int
cds_database_get_content_id_by_path_only(cds_database_info *database, slim_char* content_path);


slim_int
cds_database_get_reference_id_by_full_path(cds_database_info *database, slim_char* content_path);

slim_int
cds_database_insert_content_into_metadata(cds_database_info *database, void* cinfo);

slim_int
cds_database_insert_content_into_protocol(cds_database_info *database, void* in_cinfo);

slim_int
cds_database_insert_resource(cds_database_info *database, void* in_res);

slim_int
cds_database_get_resource_list(cds_database_info * database, void* in_c);

#ifdef DEVELOPMENT_CONTENT_AGGREGATION
slim_int
cds_database_insert_container_into_ca_metadata(cds_database_info *database, void* in_cinfo);

slim_int
cds_database_insert_audio_into_ca_metadata(cds_database_info *database, void* in_cinfo);

slim_int
cds_database_insert_image_into_ca_metadata(cds_database_info *database, void* in_cinfo);

slim_int
cds_database_insert_video_into_ca_metadata(cds_database_info *database, void* in_cinfo);

slim_int
cds_database_insert_document_into_ca_metadata(cds_database_info *database, void* in_cinfo);

slim_int
cds_database_delete_item_from_ca_metadata(cds_database_info *database, slim_char *in_uuid, slim_word in_modtime);

slim_int
cds_database_delete_device_from_ca_metadata(cds_database_info *database, slim_char *in_uuid);

slim_int
cds_database_purge_ca_metadata(cds_database_info *database);
#endif /* DEVELOPMENT_CONTENT_AGGREGATION */

slim_int
cds_database_insert_caudio_into_extended_metadata(cds_database_info *database, void* in_c, slim_int c_id);

slim_int
cds_database_get_caudio_extnded_metadata(cds_database_info *database, void *in_c);

slim_int
cds_database_insert_reference(cds_database_info *database, void* in_cref);

#if defined(DEVELOPMENT_ENABLE_PUBLISH_STREAMING_CONTENT) || defined(DEVELOPMENT_ENABLE_PUBLISH_CONTENT)
slim_int
cds_database_insert_streaming_content_resource(cds_database_info *database, void* in_cref, slim_int id);
#endif /*DEVELOPMENT_ENABLE_PUBLISH_STREAMING_CONTENT*/

slim_int
cds_database_insert_subtitle(cds_database_info *database, void* in_sub);

slim_int
cds_database_get_indexing_object_info_greater_than(cds_database_info *database, void* in_cinfo, slim_int id, slim_char *device_uuid);

slim_int
cds_database_get_indexing_object_info_by_parent_greater_than(cds_database_info *database, void* in_cinfo, slim_int id, slim_int parent_id, slim_char *device_uuid);

slim_int
cds_database_modify_int_type_metadata_prop_by_value(cds_database_info *database, slim_int id, slim_char* property_name, slim_int value);

slim_int
cds_database_update_play_count_last_played(cds_database_info *database, slim_int id, slim_int value, dlna_time_t date);

slim_int
cds_database_get_indexing_object_info_by_id(cds_database_info *database, void* in_cinfo, slim_int id);

/* @WB */
slim_int
cds_database_get_indexing_object_info_by_path(cds_database_info *database, void* in_cinfo, slim_char* path);

slim_int
cds_database_get_indexing_object_info(dlna_db_stmt database_stmt, void* in_cinfo);

slim_int
cds_database_update_metadata(cds_database_info *database, void* in_c, slim_int id);

slim_int
cds_database_update_container_update_id(cds_database_info *database, void* in_c, slim_int id);

slim_int
cds_database_modify_int_type_metadata_prop_by_value(cds_database_info *database, slim_int id, slim_char* property_name, slim_int value);

slim_int
cds_database_update_int_type_metadata_prop_by_int_prop
(
    cds_database_info *database,
    slim_char* prop1, slim_int prop1_value,
    slim_char *prop2, slim_int prop2_value
);

slim_int
cds_database_update_int_type_metadata_prop_by_text_prop
(
    cds_database_info *database,
    slim_char* prop1, slim_int prop1_value,
    slim_char *prop2, slim_char *prop2_value
);

slim_int
cds_database_update_int_type_metadata_prop_for_all
(
    cds_database_info *database,
    slim_char* prop, slim_int prop_value
);

#ifdef ENABLE_IGNORE_FILE_IF_CRASH
slim_int
cds_database_insert_fake_for_ignore_into_metadata(cds_database_info *database, slim_char* full_path, slim_char* device_uuid, slim_int parent_id);

slim_int
cds_database_update_int_type_metadata_prop_validation
(
    cds_database_info *database,
    slim_char* device_uuid,
    slim_int prop_value
);


slim_int
cds_database_update_int_type_metadata_prop_for_all_ignore
(
    cds_database_info *database,
    slim_char* prop, slim_int prop_value,
    slim_char* prop_ign, slim_int prop_ign_value
);
#endif /* ENABLE_IGNORE_FILE_IF_CRASH */

slim_int
cds_database_update_integer_type_metadata_property_by_num_operator(cds_database_info *database, slim_char* property, slim_int property_value, slim_char* op_property, slim_char* op, slim_int op_value);

slim_int
cds_database_update_integer_type_metadata_property_by_string_operator(cds_database_info *database, slim_char* property, slim_int property_value, slim_char* op_property, slim_char* op, slim_char* op_value);

slim_int
cds_database_update_text_type_metadata_property_by_id(cds_database_info *database, slim_char* property, slim_char* property_value, slim_int id);

slim_int
cds_database_get_property_by_object_id(cds_database_info *database, enum _cds_database_metadata_column_index column_index, slim_int id, slim_int id_type, slim_char **out_value, slim_int *out_type);

slim_int
cds_database_get_text_type_metadata_property(dlna_db_stmt database_smt, enum _cds_database_metadata_column_index column_index, slim_char **out_value);

void
cds_database_get_integer_type_metadata_property(dlna_db_stmt database_smt, enum _cds_database_metadata_column_index column_index, slim_int* out_value);

void
cds_database_get_integer_type_reference_property(dlna_db_stmt database_stmt, enum _cds_database_reference_column_index column_index, slim_int* out_value);

slim_int
cds_database_get_text_type_reference_property(dlna_db_stmt database_stmt, enum _cds_database_reference_column_index column_index, slim_char **out_value);

/* Allows to extract a text type value from col_id-th column from statement database_stmt. */
void
cds_database_get_text_type_from_statement(dlna_db_stmt database_smt, slim_int col_id, slim_char **out_value);

/* Allows to extract an integer type value from col_id-th column from statement database_stmt. */
void
cds_database_get_integer_type_from_statement(dlna_db_stmt database_smt, slim_int col_id, slim_int* out_value);

slim_int
cds_database_get_total_media_by_media_class_type_for_device(cds_database_info *database, slim_int in_type, slim_char *device_uuid);

slim_bool
cds_database_check_if_extended_metadata_exists(cds_database_info *database,
                                               slim_int metadata_id);

#ifdef ENABLE_GPS_SUPPORT
slim_int
cds_database_insert_gps_extended_metadata(cds_database_info *database,
                                          slim_int id, slim_double* latitude,
                                          slim_double* longitude);

slim_int
cds_database_update_gps_extended_metadata(cds_database_info *database,
                                          slim_int id, slim_int gps_valid,
                                          slim_double* latitude,
                                          slim_double* longitude);
#endif /* ENABLE_GPS_SUPPORT */

slim_int
cds_database_get_total_media_by_media_type_for_device(cds_database_info *database, slim_int in_type, slim_char *device_uuid);

dlna_db_stmt
cds_database_get_statement_for_media_references_by_id(cds_database_info *database, slim_int id);

dlna_db_stmt
cds_database_get_statement_for_media_subtitles(cds_database_info *database, slim_char *device_uuid, slim_int limit, slim_int offset);

slim_int
cds_database_get_database_statement_status(dlna_db_stmt database_stmt);

void
cds_database_finalize_database_statement(dlna_db_stmt database_stmt);

slim_int
cds_database_get_pglevel_by_deviceid(cds_database_info *database, slim_char *in_deviceId, slim_int *out_pg_level);

slim_int
cds_database_reset_video_id_in_subtitles_for_video(cds_database_info *database, slim_int video_id);

slim_int
cds_database_delete_embeded_subtitle_for_video(cds_database_info *database, slim_int video_id);

slim_int
cds_database_update_reference(cds_database_info *database, void* in_cref);

slim_int
cds_database_update_subtitle_for_video(cds_database_info *database, slim_int video_id, slim_int folder_id, slim_char* title);


#ifdef DEVELOPMENT_ENABLE_USER_AGENT_CUSTOMIZATION_SONY_BRAVIA_PROFILING

struct contents;

slim_int
cds_database_add_protocol(dlna_db_stmt database_stmt, void * out_protocol_list, struct contents * c);

#endif /* DEVELOPMENT_ENABLE_USER_AGENT_CUSTOMIZATION_SONY_BRAVIA_PROFILING */


slim_int
cds_database_delete_by_id(cds_database_info *database, slim_int id_type, slim_int id);

void
cds_database_append_sort_criteria(slim_char* query, void* sort_param);

slim_int
cds_database_get_browse_direct_children_total(cds_database_info *database, slim_int parent_id, slim_int pg_value);

slim_int
cds_database_get_browse_virtual_by_type_total(cds_database_info *database, slim_char* query);

dlna_db_stmt
cds_database_get_browse_direct_children_stmt(cds_database_info *database, slim_int parent_id, slim_int pg_value, void* in_sort_param, slim_int limit, slim_int offset);

slim_int
cds_database_get_browse_total(cds_database_info *database, slim_char* query);

slim_int
cds_database_get_browse_by_property_value_total(cds_database_info *database, slim_char* query, slim_char* property_value, slim_int count);

dlna_db_stmt
cds_database_get_browse_database_stmt(cds_database_info *database, slim_char* query, slim_int limit, slim_int offset);

slim_int
cds_database_insert_user_metadata(cds_database_info *database, void *in_user_metadata, slim_int id);

slim_int
cds_database_get_user_metadata_info_list_by_data(cds_database_info * database, const slim_char * text, slim_bool property, void * out_user_metadata_info_list);

slim_int
cds_database_get_user_metadata_list_by_content_id(cds_database_info * database, slim_int content_id, void * out_user_metadata_list);

slim_int
cds_database_get_user_metadata_info_list_by_content_id(cds_database_info * database, slim_int content_id, void * out_user_metadata_info_list);

slim_int
cds_database_get_user_metadata_info_by_id(cds_database_info * database, slim_int id, void * out_user_metadata_info);

slim_int
cds_database_insert_user_metadata_info(cds_database_info * database, void * in_user_metadata_info);

slim_int
cds_database_insert_user_metadata_info_list(cds_database_info * database, void * in_user_metadata_info_list);

slim_int
cds_database_delete_user_metadata_by_id(cds_database_info * database, slim_int id);

slim_int
cds_database_delete_user_metadata_by_content_id(cds_database_info * database, slim_int content_id);

slim_int
cds_database_delete_user_metadata_by_data(cds_database_info * database, const slim_char * text, slim_bool property);

slim_int
cds_database_update_user_metadata_info_by_id(cds_database_info * database, void * in_user_metadata_info);

enum search_match_result
cds_database_search_evaluate_search_exp(slim_char* squery, struct search_exp *s_exp);

dlna_db_stmt
cds_database_get_search_database_stmt(cds_database_info *database, slim_char* query, slim_int limit, slim_int offset);

slim_int
cds_database_get_search_total(cds_database_info *database, slim_char* query);

/* @WB */
#if defined(ENABLE_WEBUI_SUPPORT) || defined(ENABLE_AHL) || defined(DEVELOPMENT_CONTENT_API)
dlna_db_stmt
cds_database_get_content_database_stmt(cds_database_info *database, slim_char* query);
#endif /* ENABLE_WEBUI_SUPPORT || ENABLE_AHL || DEVELOPMENT_CONTENT_API */

#if defined(ENABLE_WEBUI_SUPPORT) || defined(ENABLE_AHL)
slim_int
cds_database_get_content_info(dlna_db_stmt database_stmt, void** in_cinfo);
#endif /* ENABLE_WEBUI_SUPPORT || ENABLE_AHL */

/* @WB */
slim_int
cds_database_update_children_integer_type_metadata_property_by_path(cds_database_info *database, slim_char* property, slim_int property_value, slim_char* path, slim_char *in_deviceId);

slim_int
cds_database_get_content_protocol_info(dlna_db_stmt database_stmt, slim_char **protocol_info);

#ifdef DEVELOPMENT_DMS_STORAGE_LAST_INDEX_TIME
slim_int
cds_database_update_last_idx_time(cds_database_info *database, slim_int device_db_id);
slim_int
cds_database_get_storage_last_idx_time( cds_database_info *database, dlna_time_t *out_last_idx_time, slim_int device_db_id);
#endif /* DEVELOPMENT_DMS_STORAGE_LAST_INDEX_TIME */


slim_int
cds_database_get_container_albumArtUri_by_album(cds_database_info *database, slim_char* in_album, void *in_c,
    slim_char *storage_device_path, slim_bool is_central, slim_int content_type);

slim_int
cds_database_get_container_albumArtUri_by_title(cds_database_info *database, slim_char* in_title, void *in_c,
    slim_char *storage_device_path, slim_bool is_central, slim_int content_type);

slim_int
cds_database_update_reference_invalid(cds_database_info* database, slim_bool reference_invalid, slim_int id);

slim_int
cds_database_get_content_childcount(cds_database_info* database, slim_int parent_id);

slim_int
cds_database_get_storage_children_count(cds_database_info* database, slim_int id, slim_int *out_children_count);

slim_int
cds_database_get_content_children_ids(cds_database_info* database, slim_int parent_id, slim_int* child_count, slim_int** ids);

slim_bool
cds_database_check_if_content_by_path(cds_database_info* database, slim_char* relpath);

slim_int
cds_update_uploaded_container_metadata(cds_database_info *database, void* in_c, slim_int id);

slim_int
cds_database_update_root_title(cds_database_info * database, slim_char *new_title, slim_int device_db_id);

slim_int
cds_database_update_upnp_album_for_root_items(cds_database_info * database,
    slim_char *old_album, slim_char *new_album, slim_int device_db_id);

slim_int
cds_database_get_parent_id_by_id(cds_database_info *database, slim_char* query);

slim_int
cds_database_get_protocol_list_by_content_id(cds_database_info * database,
    slim_int content_id, void* in_c);

#ifdef DEVELOPMENT_ENABLE_USER_AGENT_CUSTOMIZATION_SONY_BRAVIA_PROFILING
slim_int
cds_database_get_relaxed_protocol_list_by_content_id(cds_database_info * database,
    slim_int content_id, void* in_c);
#endif /* DEVELOPMENT_ENABLE_USER_AGENT_CUSTOMIZATION_SONY_BRAVIA_PROFILING */

#ifdef DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER

typedef slim_int (*cds_database_playlist_analyze_routine)(
    cds_database_info * in_database,
    slim_char * in_device_path,
    slim_word in_device_path_length,
    slim_char * in_playlist_path,
    void * in_arg);

slim_int
cds_database_parse_playlists(cds_database_info * in_database,
    slim_char * in_device_path,
    slim_char *in_devide_uuid,
    cds_database_playlist_analyze_routine in_callback,
    void * in_arg);

slim_int
cds_database_insert_into_playlist_map(cds_database_info * in_database,
    slim_char * in_playlist_path,
    slim_char * in_content_path
#ifdef DEVELOPEMENT_MULTIPLE_QUERIES_OPTIMIZATION
    , void *in_queries
#endif /*DEVELOPEMENT_MULTIPLE_QUERIES_OPTIMIZATION*/
    );

slim_int
cds_database_clean_playlist_map(cds_database_info * in_database);

slim_int
cds_database_clean_entry_playlist_map(cds_database_info * in_database,
    slim_int playlist_id);

#ifdef DEVELOPEMENT_WINDOWS_PLAYLISTS
slim_int
cds_database_search_for_playlist_file(cds_database_info * in_database,
    slim_char * in_file_name, struct windows_playlist_params ** out_paths, slim_int *out_paths_count);
#endif /*DEVELOPEMENT_WINDOWS_PLAYLISTS*/

#endif /* DEVELOPMENT_ENABLE_PLAYLIST_CONTAINER */

#ifdef DEVELOPEMENT_MULTIPLE_QUERIES_OPTIMIZATION

void*
multiple_queries_object_alloc(slim_word max_queries);

void
multiple_queries_object_free(void** multiple_queries);

slim_int
cds_database_multiple_queries_add_query(cds_database_info * in_database, const slim_char * query,
    void *queries , ...);

slim_int
cds_database_multiple_queries_finalize_queries(cds_database_info * in_database,
    void *queries );
#endif

void
cds_database_analyze_database(cds_database_info * database);

#ifdef HAVE_DTCP
slim_int
cds_database_insert_dtcp_info_extended_metadata_by_id(cds_database_info *database, slim_int cci, slim_int id);
slim_int
cds_database_update_dtcp_info_extended_metadata_by_id(cds_database_info *database, slim_int cci, slim_int id);
#endif /*HAVE_DTCP*/
slim_bool
cds_database_content_drm_info_exists(cds_database_info *database, slim_int id);


#ifdef DEVELOPEMENT_PARTIAL_INDEXING_ONE_INSERT_OPTIMIZATION

slim_int
cds_database_insert_drm_protected_extended_metadata_by_id(cds_database_info *database, slim_int protection, slim_int id);
slim_int
cds_database_update_drm_protected_extended_metadata_by_id(cds_database_info *database, slim_int protection, slim_int id);

slim_int
cds_database_insert_full_metadata(cds_database_info *database, void* in_c, void *info);

#endif /*DEVELOPEMENT_PARTIAL_INDEXING_ONE_INSERT_OPTIMIZATION*/


#ifdef DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION

dlna_db_stmt
cds_database_statements_bind(struct cds_database_info_ * in_db,
    enum _cds_database_statements_type in_statement, ...);

void
cds_database_statements_unbind(dlna_db_stmt in_stmt);

#endif /* DEVELOPMENT_DATABASE_STATEMENTS_PRECOMPILATION */

slim_char*
cds_database_escape_special_chars(slim_char *value, slim_int str_len);

slim_int
cds_database_update_album_arts_by_id(cds_database_info *database, void* c, slim_int id, slim_int ctype);

slim_int
cds_database_get_media_thumbnail_references_for_device(cds_database_info *database, slim_char *device_uuid, slim_int limit, slim_int offset, void *in_cinfo);

#ifdef DEVELOPMENT_ENABLE_ADS
slim_int
cds_database_insert_segments_into_mpd_segments(cds_database_info *database, void* in_cinfo, slim_char* in_device_path);

slim_char *
cds_database_get_segments_into_mpd_segments(cds_database_info *database, slim_char* query);

slim_int
cds_database_delete_mpd_segment_in_metadata(cds_database_info *database, slim_char *device_uuid);

#endif /* DEVELOPMENT_ENABLE_ADS */

#ifdef DEVELOPMENT_ENABLE_CVP_SERVER_PLAYSPEED
dlna_db_stmt
cds_database_get_statement_for_prescaledfiles(cds_database_info *database, slim_char *device_uuid, slim_int limit, slim_int offset);

slim_int
cds_database_insert_prescaledfile(cds_database_info *database, slim_int in_metadata_id, slim_char* in_playspeed, slim_char* in_filepath);

slim_int
cds_database_update_protocol_by_protocol_id(cds_database_info *database, slim_int in_protocol_id, slim_char* in_pinfo);
#endif /* DEVELOPMENT_ENABLE_CVP_SERVER_PLAYSPEED */

#ifdef HAVE_DTCP
slim_int
cds_database_get_drm_cci(cds_database_info *database, slim_int id, slim_int *out_cci);
#endif/* HAVE_DTCP */

slim_bool
cds_database_was_modified(cds_database_info * database);

#endif /*_CDS_DATABASE_H*/
